import{_ as H,a as Q}from"./BaseFormSelect.a27fad28.js";import{_ as w}from"./BaseFormInput.90fab33f.js";import{_ as T}from"./BaseFormTextarea.411346c3.js";import{_ as D,d as E,z as r,a as V,i as q,u as j,A as z,k as c,g as L,h as s,l as m,e as M,f as l,j as h}from"./index.0dbdd8c0.js";import{u as G}from"./vee-validate.esm.5134fc0c.js";import{q as J}from"./data.6ab9a877.js";import{u as p}from"./questions.ee41367c.js";import{b as K,c as d,a as O,e as P}from"./array.9d55df34.js";import{u as U}from"./system.6a3a7555.js";import"./BaseMessage.c3165d5c.js";import"./BaseSelect.45bf0d37.js";import"./BaseInput.347f38d3.js";import"./BaseTextarea.1cb938ac.js";import"./api.a5ece804.js";const W={class:"m-2 p-8 grid grid-cols-1 lg:grid-cols-2 2xl:grid-cols-3 gap-4 bg-white rounded-2xl duration-500"},X=E({__name:"AdminQuestionEdit",setup(Y){var g,B,F,v,y;const b=r(()=>U().systemStatus),a=V(),e=r(()=>Number(a.params.roleId)),u=r(()=>p().question({roleId:e.value,id:Number(a.params.id)})),A=K({content:d().required("\u6B64\u6B04\u4F4D\u5FC5\u586B"),tag:d().required("\u6B64\u6B04\u4F4D\u5FC5\u586B"),textHint:d(),typeId:O(),isRequired:P()}),{setFieldValue:o,values:n,handleSubmit:N}=G({validationSchema:A});o("content",((g=u.value)==null?void 0:g.content)||""),o("tag",((B=u.value)==null?void 0:B.tag)||""),o("textHint",((F=u.value)==null?void 0:F.textHint)||""),o("typeId",((v=u.value)==null?void 0:v.typeId)||1),o("isRequired",((y=u.value)==null?void 0:y.isRequired)||!1);const _=q("setToastData",()=>null),f=q("setIsLoading",()=>null),R=N(async t=>{try{f(!0);const x=await p().updateQuestion({roleId:e.value,id:Number(a.params.id),question:{content:t.content,tag:t.tag,textHint:t.textHint,typeId:Number(t.typeId),isRequired:String(t.isRequired)==="true"}});_({isActive:!0,variant:"success",message:"\u66F4\u65B0\u6210\u529F"}),p().readQuestionnaire(e.value),i.push(`/admin/question/${e.value}`)}catch({response:x}){_({isActive:!0,variant:"error",message:"\u66F4\u65B0\u5931\u6557"})}finally{f(!1)}}),i=j(),S=()=>i.push(`/admin/question/${e.value}`);return z(()=>{b.value!==0&&i.push(`/admin/question/${e.value}`)}),(t,x)=>{const C=Q,I=T,$=w,k=H;return m(),c(k,{size:"full",onConfirm:s(R),onCancel:S},{default:L(()=>[M("article",W,[l(C,{class:"col-span-1 p-0",name:"typeId",options:s(J),title:"\u8ACB\u9078\u64C7\u554F\u7B54\u985E\u578B"},null,8,["options"]),l(I,{name:"content",class:"col-span-1 lg:col-span-2 2xl:col-span-3",title:"\u8ACB\u8F38\u5165\u554F\u984C\u6558\u8FF0"}),l($,{name:"tag",type:"text",class:"col-span-1 p-0",title:"\u8ACB\u8F38\u5165\u6A19\u7C64"}),Number(s(n).typeId)===2||Number(s(n).typeId)===3?(m(),c(I,{key:0,name:"textHint",class:"col-span-1 lg:col-span-2 2xl:col-span-3",title:"\u8ACB\u8F38\u5165\u6587\u5B57\u554F\u984C\u6558\u8FF0"})):h("v-if",!0),Number(s(n).typeId)===2||Number(s(n).typeId)===3?(m(),c(C,{key:1,class:"col-span-1 p-0",name:"isRequired",options:[{text:"\u9078\u586B",value:!1},{text:"\u5FC5\u586B",value:!0}],title:"\u662F\u5426\u5FC5\u586B"})):h("v-if",!0)])]),_:1},8,["onConfirm"])}}}),de=D(X,[["__file","/home/runner/work/peer-assessment/peer-assessment/src/views/AdminQuestionEdit.vue"]]);export{de as default};
