import{v as $,r as d}from"./index.d57fffa1.js";import{u as c}from"./api.749027f8.js";const H=$("history",()=>{const l=d(),u=async({year:e,filename:t})=>{try{const r=await c.post("/history",{year:e,filename:t});return Promise.resolve(r)}catch(r){return Promise.reject(r)}},p=async()=>{try{const e=await c.get("/history/filter");return l.value=e.data.data,Promise.resolve(e)}catch(e){return Promise.reject(e)}},y=d(),h=async({year:e,filename:t,roleId:r})=>{try{const o=await c.get(`/history/scores?year=${e}&filename=${t}&roleId=${r}`);return y.value=o.data.data,Promise.resolve(o)}catch(o){return Promise.reject(o)}},m=d();return{createHistory:u,readHistory:p,histories:l,allHistoryScore:y,historyScore:m,readAllHistoryScore:h,readHistoryScore:async({year:e,filename:t,roleId:r,managerId:o})=>{try{const s=await c.get(`/history/scores?year=${e}&filename=${t}&roleId=${r}&managerId=${o}`);return m.value=s.data.data,Promise.resolve(s)}catch(s){return Promise.reject(s)}},readAllHistoryReport:async({year:e,filename:t,roleId:r})=>{try{const o=await c.get(`/history/download?year=${e}&filename=${t}&roleId=${r}`,{responseType:"blob"}),s=o.data,i=`${e}-${t}-${r}.xlsx`,a=document.createElement("a");return a.download=i,a.style.display="none",a.href=URL.createObjectURL(s),document.body.appendChild(a),a.click(),URL.revokeObjectURL(a.href),document.body.removeChild(a),Promise.resolve(o)}catch(o){return Promise.reject(o)}},readHistoryReport:async({year:e,filename:t,roleId:r,managerId:o})=>{try{const s=await c.get(`/history/download?year=${e}&filename=${t}&roleId=${r}&managerId=${o}`,{responseType:"blob"}),i=s.data,a=`${e}-${t}-${r}.xlsx`,n=document.createElement("a");return n.download=a,n.style.display="none",n.href=URL.createObjectURL(i),document.body.appendChild(n),n.click(),URL.revokeObjectURL(n.href),document.body.removeChild(n),Promise.resolve(s)}catch(s){return Promise.reject(s)}}}});export{H as u};
