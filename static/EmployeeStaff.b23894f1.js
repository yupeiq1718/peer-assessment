import{_ as L}from"./TheSideBar.d62e08f8.js";import{_ as Q}from"./BaseTable.d0bd1820.js";import{_ as E,d as T,z as c,i as k,u as $,l,k as C,g as n,e as d,t as b,f as o,q as R,h as i,c as q,C as z,F as U,s as G,A as H,b as J,T as D,j as K,B as O}from"./index.66fffcdf.js";import{_ as P}from"./BaseScore.52162c76.js";import{_ as W}from"./BaseTag.173afb11.js";import{u as p}from"./answers.637b8734.js";import{u as V}from"./account.c5f939ae.js";import{g as F,d as X}from"./data.6ab9a877.js";import{u as S}from"./questions.a9e3a5c5.js";import{u as Y}from"./users.f2f268e2.js";import"./api.655bb52e.js";const Z={class:"flex justify-start items-center"},ee=["src"],te=T({__name:"EmployeeStaffMain",setup(M){const v=c(()=>V().accountId),h=[{name:"\u59D3\u540D",key:"profile"},{name:"\u90E8\u9580",key:"department",width:"20%"},{name:"\u8A55\u5206",key:"scores",width:"60%"},{name:"\u529F\u80FD",key:"function"}],w=c(()=>{var e;return(e=p().answersInformation(1))==null?void 0:e.map(t=>({profile:{name:t.reviewee.name,picture:t.reviewee.picture},department:t.reviewee.department,scores:t.answers.filter(a=>a.score).map(a=>a.score),function:t.id}))}),y=e=>X.findIndex(t=>e===t.value),_=k("setToastData",()=>null),f=k("setIsLoading",()=>null),g=async e=>{try{f(!0);const t=await p().deleteAnswersInformation(e);_({isActive:!0,variant:"success",message:"\u522A\u9664\u6210\u529F"}),p().readAnswersInformation({userId:v.value,qId:1})}catch{_({isActive:!0,variant:"error",message:"\u522A\u9664\u5931\u6557"})}finally{f(!1)}},A=$(),r=e=>A.push(`/employee/staff/edit/${e}`),u=k("setConfirmData",()=>null),m=e=>{u({isActive:!0,confirm:()=>g(e),text:"\u8ACB\u78BA\u8A8D\u662F\u5426\u522A\u9664\u8A72\u7B46\u8CC7\u6599\uFF1F"})};return(e,t)=>{const a=W,N=P,B=G,j=Q;return l(),C(j,{fields:h,items:i(w)},{profile:n(s=>[d("div",Z,[d("img",{class:"inline-block rounded-full w-16 max-w-none h-16 bg-light mr-4",src:s.data.picture||"/user.png",alt:"user"},null,8,ee),d("span",null,b(s.data.name),1)])]),department:n(s=>[o(a,{variant:i(F)(y(s.data))},{default:n(()=>[R(b(s.data),1)]),_:2},1032,["variant"])]),scores:n(s=>[(l(!0),q(U,null,z(s.data,(I,x)=>(l(),C(N,{key:x,variant:i(F)(x),class:"w-[4.5rem] h-[4.5rem]",score:I},null,8,["variant","score"]))),128))]),function:n(s=>[d("div",null,[o(B,{role:"button",class:"w-6 h-6 m-2 fill-muted hover:fill-theme",name:"edit",onClick:I=>r(s.data)},null,8,["onClick"]),o(B,{role:"button",class:"w-6 h-6 m-2 fill-muted hover:fill-theme",name:"delete",onClick:I=>m(s.data)},null,8,["onClick"])])]),_:1},8,["items"])}}}),se=E(te,[["__file","/home/runner/work/peer-assessment/peer-assessment/src/components/EmployeeStaffMain.vue"]]),ne={key:0,class:"absolute w-full h-full pt-6 px-4"},oe=T({__name:"EmployeeStaff",setup(M){const v=c(()=>V().accountId),h=$(),w=[{name:"create",icon:"plus",function:()=>h.push("/employee/staff/new")}],y=c(()=>S().questionnaire(1)),_=async r=>{try{const u=await S().readQuestionnaire(r)}catch{}},f=c(()=>p().answersInformation(1)),g=async({userId:r,qId:u})=>{try{const m=await p().readAnswersInformation({userId:r,qId:u})}catch{}},A=c(()=>Y().users);return H(()=>{_(1),g({userId:v.value,qId:1})}),(r,u)=>{const m=se,e=L,t=J("router-view");return i(y)&&i(f)&&i(A)?(l(),q("div",ne,[o(m),o(D,{name:"sidebar",mode:"out-in",appear:""},{default:n(()=>[o(e,{items:w})]),_:1}),o(t,null,{default:n(({Component:a})=>[o(D,{name:"modal",mode:"out-in",appear:""},{default:n(()=>[(l(),C(O(a)))]),_:2},1024)]),_:1})])):K("v-if",!0)}}}),ve=E(oe,[["__file","/home/runner/work/peer-assessment/peer-assessment/src/views/EmployeeStaff.vue"]]);export{ve as default};
