import{_ as j}from"./TheSideBar.5a57433e.js";import{_ as Q}from"./BaseTable.0da79a06.js";import{_ as L,d as T,z as c,i as k,u as $,l,c as C,f as t,g as o,e as f,t as D,h as i,q as R,F as z,C as U,k as q,s as G,A as H,b as J,T as F,j as K,B as O}from"./index.ca97bf03.js";import{_ as P}from"./BaseScore.104f0ff3.js";import{_ as W}from"./BaseTag.40556f5c.js";import{u as p}from"./answers.06deac7a.js";import{u as V}from"./account.f4baf2e6.js";import{g as b,d as X}from"./data.d5f5edba.js";import{u as E}from"./questions.41db5345.js";import{u as Y}from"./users.0ccac95b.js";import"./api.41d29b3e.js";const Z={class:"mx-5 my-2"},ee={class:"flex justify-start items-center"},se=["src"],ne=T({__name:"EmployeeLeaderMain",setup(M){const v=c(()=>V().accountId),h=[{name:"\u59D3\u540D",key:"profile"},{name:"\u90E8\u9580",key:"department",width:"20%"},{name:"\u8A55\u5206",key:"scores",width:"60%"},{name:"\u529F\u80FD",key:"function"}],w=c(()=>{var e;return(e=p().answersInformation(2))==null?void 0:e.map(s=>({profile:{name:s.reviewee.name,picture:s.reviewee.picture},department:s.reviewee.department,scores:s.answers.filter(a=>a.score).map(a=>a.score),function:s.id}))}),y=e=>X.findIndex(s=>e===s.value),_=k("setToastData",()=>null),d=k("setIsLoading",()=>null),g=async e=>{try{d(!0);const s=await p().deleteAnswersInformation(e);_({isActive:!0,variant:"success",message:"\u522A\u9664\u6210\u529F"}),p().readAnswersInformation({userId:v.value,qId:2})}catch{_({isActive:!0,variant:"error",message:"\u522A\u9664\u5931\u6557"})}finally{d(!1)}},A=$(),r=e=>A.push(`/employee/leader/edit/${e}`),u=k("setConfirmData",()=>null),m=e=>{u({isActive:!0,confirm:()=>g(e),text:"\u8ACB\u78BA\u8A8D\u662F\u5426\u522A\u9664\u8A72\u7B46\u8CC7\u6599\uFF1F"})};return(e,s)=>{const a=W,N=P,B=G,S=Q;return l(),C("div",Z,[t(S,{fields:h,items:i(w)},{profile:o(n=>[f("div",ee,[f("img",{class:"inline-block rounded-full w-16 max-w-none h-16 mr-4",src:n.data.picture||"/user.png",alt:"user"},null,8,se),f("span",null,D(n.data.name),1)])]),department:o(n=>[t(a,{variant:i(b)(y(n.data))},{default:o(()=>[R(D(n.data),1)]),_:2},1032,["variant"])]),scores:o(n=>[(l(!0),C(z,null,U(n.data,(I,x)=>(l(),q(N,{key:x,class:"w-[4.5rem] h-[4.5rem]",variant:i(b)(x),score:I},null,8,["variant","score"]))),128))]),function:o(n=>[f("div",null,[t(B,{role:"button",class:"w-6 h-6 m-2 fill-muted hover:fill-theme",name:"edit",onClick:I=>r(n.data)},null,8,["onClick"]),t(B,{role:"button",class:"w-6 h-6 m-2 fill-muted hover:fill-theme",name:"delete",onClick:I=>m(n.data)},null,8,["onClick"])])]),_:1},8,["items"])])}}}),te=L(ne,[["__file","/home/runner/work/peer-assessment/peer-assessment/src/components/EmployeeLeaderMain.vue"]]),oe={key:0,class:"absolute w-full h-full"},ae=T({__name:"EmployeeLeader",setup(M){const v=c(()=>V().accountId),h=$(),w=[{name:"create",icon:"plus",function:()=>h.push("/employee/leader/new")}],y=c(()=>E().questionnaire(2)),_=async r=>{try{const u=await E().readQuestionnaire(r)}catch{}},d=c(()=>p().answersInformation(2)),g=async({userId:r,qId:u})=>{try{const m=await p().readAnswersInformation({userId:r,qId:u})}catch{}},A=c(()=>Y().users);return H(()=>{_(2),g({userId:v.value,qId:2})}),(r,u)=>{const m=te,e=j,s=J("router-view");return i(y)&&i(d)&&i(A)?(l(),C("div",oe,[t(m),t(F,{name:"sidebar",mode:"out-in",appear:""},{default:o(()=>[t(e,{items:w})]),_:1}),t(s,null,{default:o(({Component:a})=>[t(F,{name:"modal",mode:"out-in",appear:""},{default:o(()=>[(l(),q(O(a)))]),_:2},1024)]),_:1})])):K("v-if",!0)}}}),he=L(ae,[["__file","/home/runner/work/peer-assessment/peer-assessment/src/views/EmployeeLeader.vue"]]);export{he as default};
