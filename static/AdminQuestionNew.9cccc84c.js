import{_ as A,a as b}from"./BaseFormSelect.a27fad28.js";import{_ as w}from"./BaseFormInput.90fab33f.js";import{_ as R}from"./BaseFormTextarea.411346c3.js";import{_ as S,d as $,z as f,a as k,i as B,u as Q,A as H,k as a,g as T,h as t,l as r,e as D,f as i,j as g}from"./index.0dbdd8c0.js";import{u as V}from"./vee-validate.esm.5134fc0c.js";import{q as E}from"./data.6ab9a877.js";import{u as F}from"./questions.ee41367c.js";import{b as j,c,a as z,e as L}from"./array.9d55df34.js";import{u as M}from"./system.6a3a7555.js";import"./BaseMessage.c3165d5c.js";import"./BaseSelect.45bf0d37.js";import"./BaseInput.347f38d3.js";import"./BaseTextarea.1cb938ac.js";import"./api.a5ece804.js";const G={class:"m-2 p-8 grid grid-cols-1 lg:grid-cols-2 2xl:grid-cols-3 gap-4 bg-white rounded-2xl duration-500"},J=$({__name:"AdminQuestionNew",setup(K){const y=f(()=>M().systemStatus),C=k(),s=f(()=>Number(C.params.roleId)),x=j({content:c().required("\u6B64\u6B04\u4F4D\u5FC5\u586B"),tag:c().required("\u6B64\u6B04\u4F4D\u5FC5\u586B"),textHint:c(),typeId:z(),isRequired:L()}),{setFieldValue:o,values:u,handleSubmit:I}=V({validationSchema:x});o("content",""),o("tag",""),o("textHint",""),o("typeId",1),o("isRequired",!1);const m=B("setToastData",()=>null),p=B("setIsLoading",()=>null),h=I(async e=>{try{p(!0);const l=await F().createQuestion({roleId:s.value,question:{content:e.content,tag:e.tag,textHint:e.textHint,typeId:Number(e.typeId),isRequired:String(e.isRequired)==="true"}});m({isActive:!0,variant:"success",message:"\u65B0\u589E\u6210\u529F"}),F().readQuestionnaire(s.value),n.push(`/admin/question/${s.value}`)}catch({response:l}){m({isActive:!0,variant:"error",message:"\u65B0\u589E\u5931\u6557"})}finally{p(!1)}}),n=Q(),v=()=>n.push(`/admin/question/${s.value}`);return H(()=>{y.value!==0&&n.push(`/admin/question/${s.value}`)}),(e,l)=>{const d=b,_=R,q=w,N=A;return r(),a(N,{size:"full",onConfirm:t(h),onCancel:v},{default:T(()=>[D("article",G,[i(d,{class:"col-span-1 p-0",name:"typeId",options:t(E),title:"\u8ACB\u9078\u64C7\u554F\u7B54\u985E\u578B"},null,8,["options"]),i(_,{name:"content",class:"col-span-1 lg:col-span-2 2xl:col-span-3",title:"\u8ACB\u8F38\u5165\u554F\u984C\u6558\u8FF0"}),i(q,{name:"tag",type:"text",class:"col-span-1 p-0",title:"\u8ACB\u8F38\u5165\u6A19\u7C64"}),Number(t(u).typeId)===2||Number(t(u).typeId)===3?(r(),a(_,{key:0,name:"textHint",class:"col-span-1 lg:col-span-2 2xl:col-span-3",title:"\u8ACB\u8F38\u5165\u6587\u5B57\u554F\u984C\u6558\u8FF0"})):g("v-if",!0),Number(t(u).typeId)===2||Number(t(u).typeId)===3?(r(),a(d,{key:1,class:"col-span-1 p-0",name:"isRequired",options:[{text:"\u9078\u586B",value:!1},{text:"\u5FC5\u586B",value:!0}],title:"\u662F\u5426\u5FC5\u586B"})):g("v-if",!0)])]),_:1},8,["onConfirm"])}}}),re=S(J,[["__file","/home/runner/work/peer-assessment/peer-assessment/src/views/AdminQuestionNew.vue"]]);export{re as default};
