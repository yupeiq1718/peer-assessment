import{_ as N}from"./TheSideBar.b04e10ff.js";import{_ as V}from"./BaseTable.4504afcc.js";import{_ as F,d as D,m as b,i as g,x as T,o as r,c as d,b as a,w as t,a as i,t as c,j as B,F as S,v as R,f as $,u as p,e as I,k as q,y as z,q as G,T as C,s as H}from"./index.82aa29db.js";import{_ as J}from"./BaseTag.cfb2bf7b.js";import{_ as j}from"./user.ef8b3aab.js";import{u}from"./users.586efed2.js";import{r as K}from"./data.054ee288.js";import"./api.ea9e52da.js";const O={class:"mx-5 my-2"},P={class:"flex justify-start items-center"},Q=i("img",{class:"inline-block rounded-full w-16 max-w-none h-16 mx-4",src:j,alt:"user"},null,-1),W={key:0,class:"flex justify-start items-center"},X=i("img",{class:"inline-block rounded-full w-16 max-w-none h-16 mx-4",src:j,alt:"user"},null,-1),Y=D({__name:"AdminUsersMain",setup(E){const l=[{name:"\u59D3\u540D",key:"name"},{name:"\u96FB\u5B50\u4FE1\u7BB1",key:"email",width:"25%"},{name:"\u90E8\u9580",key:"department",width:"10%"},{name:"\u89D2\u8272",key:"role",width:"25%"},{name:"\u4E3B\u7BA1",key:"manager"},{name:"\u529F\u80FD",key:"function"}],f=["success","alert","error","info","muted"],h=b(()=>{var s;return(s=u().filteredUsers)==null?void 0:s.map(n=>({name:n.name,email:n.email,department:n.department,role:n.role,manager:n.managerId,function:n.id}))}),_=g("setToastData",()=>null),m=g("setIsLoading",()=>null),x=async()=>{try{const s=await u().readUsers()}catch{}},v=async s=>{try{m(!0);const n=await u().deleteUser(s);_({isActive:!0,variant:"success",message:"\u522A\u9664\u6210\u529F"}),x()}catch{_({isActive:!0,variant:"error",message:"\u522A\u9664\u5931\u6557"})}finally{m(!1)}},y=g("setConfirmData",()=>null),w=s=>{y({isActive:!0,confirm:()=>v(s),text:"\u8ACB\u78BA\u8A8D\u662F\u5426\u522A\u9664\u8A72\u7B46\u8CC7\u6599\uFF1F"})},k=T(),L=s=>k.push(`/admin/users/edit/${s}`);return(s,n)=>{const A=J,U=q,M=V;return r(),d("div",O,[a(M,{fields:l,items:p(h)},{name:t(e=>[i("div",P,[Q,i("span",null,c(e.data),1)])]),email:t(e=>[B(c(e.data),1)]),department:t(e=>[a(A,{variant:"theme"},{default:t(()=>[B(c(e.data),1)]),_:2},1024)]),role:t(e=>[(r(!0),d(S,null,R(e.data,o=>(r(),$(A,{key:o,variant:f[o-1],class:"mx-1"},{default:t(()=>[B(c(p(K)[o-1].text),1)]),_:2},1032,["variant"]))),128))]),manager:t(e=>{var o;return[e.data?(r(),d("div",W,[X,i("span",null,c((o=p(u)().user(e.data))==null?void 0:o.name),1)])):I("v-if",!0)]}),function:t(e=>[i("div",null,[a(U,{role:"button",class:"w-6 h-6 m-2 fill-muted hover:fill-theme",name:"edit",onClick:o=>L(e.data)},null,8,["onClick"]),a(U,{role:"button",class:"w-6 h-6 m-2 fill-muted hover:fill-theme",name:"delete",onClick:o=>w(e.data)},null,8,["onClick"])])]),_:1},8,["items"])])}}}),Z=F(Y,[["__file","/home/runner/work/peer-assessment/peer-assessment/src/components/AdminUsersMain.vue"]]),ee={key:0,class:"absolute w-full h-full"},se=D({__name:"AdminUsers",setup(E){const l=T(),f=[{name:"create",icon:"plus",function:()=>l.push("/admin/users/new")},{name:"filter",icon:"filter",function:()=>l.push("/admin/users/filter")}],h=async()=>{try{const m=await u().readUsers()}catch{}},_=b(()=>u().users);return z(async()=>{await h()}),(m,x)=>{const v=Z,y=N,w=G("router-view");return p(_)?(r(),d("div",ee,[a(v),a(C,{name:"sidebar",mode:"out-in",appear:""},{default:t(()=>[a(y,{items:f})]),_:1}),a(w,null,{default:t(({Component:k})=>[a(C,{name:"modal",mode:"out-in",appear:""},{default:t(()=>[(r(),$(H(k)))]),_:2},1024)]),_:1})])):I("v-if",!0)}}}),ce=F(se,[["__file","/home/runner/work/peer-assessment/peer-assessment/src/views/AdminUsers.vue"]]);export{ce as default};
