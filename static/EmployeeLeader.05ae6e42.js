import{_ as N}from"./TheSideBar.09fd9802.js";import{_ as S}from"./BaseTable.6a094686.js";import{_ as E,d as L,m as _,i as I,x as T,o as c,c as C,b as n,w as a,a as p,t as B,j as V,F as Q,v as U,f as $,u as d,k as j,y as R,q as z,T as b,e as G,s as H}from"./index.afca9dea.js";import{_ as J}from"./BaseScore.678b9138.js";import{_ as K}from"./BaseTag.abb97a7f.js";import{_ as O}from"./user.ef8b3aab.js";import{u as m}from"./answers.402596ce.js";import{u as x}from"./questions.b0717569.js";import{u as D}from"./users.5cc855d4.js";import"./api.b6312681.js";const P={class:"mx-5 my-2"},W=p("img",{class:"inline-block rounded-full w-16 max-w-none h-16 mr-4",src:O,alt:"user"},null,-1),X=L({__name:"EmployeeLeaderMain",setup(F){const f=[{name:"\u59D3\u540D",key:"name"},{name:"\u90E8\u9580",key:"department",width:"20%"},{name:"\u8A55\u5206",key:"scores",width:"60%"},{name:"\u529F\u80FD",key:"function"}],w=_(()=>{var e;return(e=m().answersInformation(2))==null?void 0:e.map(s=>({name:s.reviewee.name,department:s.reviewee.department,scores:s.answers.filter(r=>r.score).map(r=>r.score),function:s.id}))}),i=I("setToastData",()=>null),u=I("setIsLoading",()=>null),h=async e=>{try{u(!0);const s=await m().deleteAnswersInformation(e);i({isActive:!0,variant:"success",message:"\u522A\u9664\u6210\u529F"}),m().readAnswersInformation({userId:1,qId:2})}catch{i({isActive:!0,variant:"error",message:"\u522A\u9664\u5931\u6557"})}finally{u(!1)}},v=T(),y=e=>v.push(`/employee/leader/edit/${e}`),g=I("setConfirmData",()=>null),t=e=>{g({isActive:!0,confirm:()=>h(e)})};return(e,s)=>{const r=K,k=J,l=j,q=S;return c(),C("div",P,[n(q,{fields:f,items:d(w)},{name:a(o=>[p("div",null,[W,p("span",null,B(o.data),1)])]),department:a(o=>[n(r,{variant:"theme"},{default:a(()=>[V(B(o.data),1)]),_:2},1024)]),scores:a(o=>[(c(!0),C(Q,null,U(o.data,(A,M)=>(c(),$(k,{key:M,variant:"theme",score:A},null,8,["score"]))),128))]),function:a(o=>[p("div",null,[n(l,{role:"button",class:"w-6 h-6 m-2 fill-muted hover:fill-theme",name:"edit",onClick:A=>y(o.data)},null,8,["onClick"]),n(l,{role:"button",class:"w-6 h-6 m-2 fill-muted hover:fill-theme",name:"delete",onClick:A=>t(o.data)},null,8,["onClick"])])]),_:1},8,["items"])])}}}),Y=E(X,[["__file","/home/runner/work/peer-assessment/peer-assessment/src/components/EmployeeLeaderMain.vue"]]),Z={key:0,class:"absolute w-full h-full"},ee=L({__name:"EmployeeLeader",setup(F){const f=T(),w=[{name:"create",icon:"plus",function:()=>f.push("/employee/leader/new")}],i=_(()=>x().questionnaire(2)),u=async t=>{try{const e=await x().readQuestionnaire(t)}catch{}},h=_(()=>m().answersInformation(2)),v=async({userId:t,qId:e})=>{try{const s=await m().readAnswersInformation({userId:t,qId:e})}catch{}},y=async()=>{try{const t=await D().readUsers()}catch{}},g=_(()=>D().users);return R(()=>{u(2),v({userId:1,qId:2}),y()}),(t,e)=>{const s=Y,r=N,k=z("router-view");return d(i)&&d(h)&&d(g)?(c(),C("div",Z,[n(s),n(b,{name:"sidebar",mode:"out-in",appear:""},{default:a(()=>[n(r,{items:w})]),_:1}),n(k,null,{default:a(({Component:l})=>[n(b,{name:"modal",mode:"out-in",appear:""},{default:a(()=>[(c(),$(H(l)))]),_:2},1024)]),_:1})])):G("v-if",!0)}}}),le=E(ee,[["__file","/home/runner/work/peer-assessment/peer-assessment/src/views/EmployeeLeader.vue"]]);export{le as default};
