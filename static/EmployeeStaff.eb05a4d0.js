import{_ as U}from"./TheSideBar.acf880a2.js";import{_ as G}from"./BaseTable.7b8807c6.js";import{_ as q,d as M,z as o,i as I,u as V,l as u,k as f,g as a,e as r,t as D,f as m,h as s,c as j,C as H,F as J,n as F,s as K,A as O,b as P,T as E,j as C,B as W}from"./index.50ad54cf.js";import{_ as X}from"./BaseScore.bb8cbc74.js";import{_ as Y}from"./BaseTag.e0b51c41.js";import{u as v}from"./answers.94eacf98.js";import{u as L}from"./account.708a0467.js";import{g as T,d as Z}from"./data.ff9c2fa5.js";import{u as N}from"./system.a9ea42c4.js";import{u as $}from"./questions.05981389.js";import{u as ee}from"./users.cd86d143.js";import"./api.0fa44fbb.js";const te={class:"flex justify-start items-center"},se=["src"],ne={class:"text-sm 2xl:text-base"},oe={class:"text-sm 2xl:text-base"},ae=["disabled","onClick"],re=["disabled","onClick"],ue=M({__name:"EmployeeStaffMain",setup(Q){const i=o(()=>N().systemStatus),w=o(()=>L().accountId),y=[{name:"\u59D3\u540D",key:"profile"},{name:"\u90E8\u9580",key:"department",width:"20%"},{name:"\u8A55\u5206",key:"scores",width:"60%"},{name:"\u529F\u80FD",key:"function"}],x=o(()=>{var e;return(e=v().answersInformation(1))==null?void 0:e.map(t=>({profile:{name:t.reviewee.name,picture:t.reviewee.picture},department:t.reviewee.department,scores:t.answers.filter(d=>d.score).map(d=>d.score),function:t.id}))}),g=e=>Z.findIndex(t=>e===t.value),p=I("setToastData",()=>null),h=I("setIsLoading",()=>null),A=async e=>{try{h(!0);const t=await v().deleteAnswersInformation(e);p({isActive:!0,variant:"success",message:"\u522A\u9664\u6210\u529F"}),v().readAnswersInformation({userId:w.value,qId:1})}catch{p({isActive:!0,variant:"error",message:"\u522A\u9664\u5931\u6557"})}finally{h(!1)}},c=V(),l=e=>c.push(`/employee/staff/edit/${e}`),_=I("setConfirmData",()=>null),b=e=>{_({isActive:!0,confirm:()=>A(e),text:"\u8ACB\u78BA\u8A8D\u662F\u5426\u522A\u9664\u8A72\u7B46\u8CC7\u6599\uFF1F"})};return(e,t)=>{const d=Y,z=X,S=K,R=G;return u(),f(R,{fields:y,items:s(x)},{profile:a(n=>[r("div",te,[r("img",{class:"inline-block rounded-full w-14 2xl:w-16 max-w-none h-14 2xl:h-16 bg-light mx-3 2xl:mx-4",src:n.data.picture||"/user.png",alt:"user"},null,8,se),r("span",ne,D(n.data.name),1)])]),department:a(n=>[m(d,{variant:s(T)(g(n.data))},{default:a(()=>[r("span",oe,D(n.data),1)]),_:2},1032,["variant"])]),scores:a(n=>[(u(!0),j(J,null,H(n.data,(k,B)=>(u(),f(z,{key:B,variant:s(T)(B),class:"w-16 2xl:w-18 h-16 2xl:h-18",score:k},null,8,["variant","score"]))),128))]),function:a(n=>[r("div",null,[r("button",{disabled:s(i)!==1,class:F(s(i)==1?["fill-muted hover:fill-theme hover:animate-bounce"]:"fill-muted-light pointer-events-none"),onClick:k=>l(n.data)},[m(S,{role:"button",class:"w-5 2xl:w-6 h-5 2xl:h-6 m-1 2xl:m-2",name:"edit"})],10,ae),r("button",{disabled:s(i)!==1,class:F(s(i)==1?["fill-muted hover:fill-theme hover:animate-bounce"]:"fill-muted-light pointer-events-none"),onClick:k=>b(n.data)},[m(S,{role:"button",class:"w-5 2xl:w-6 h-5 2xl:h-6 m-1 2xl:m-2",name:"delete"})],10,re)])]),_:1},8,["items"])}}}),ie=q(ue,[["__file","/home/runner/work/peer-assessment/peer-assessment/src/components/EmployeeStaffMain.vue"]]),ce={key:0,class:"absolute w-full h-full pt-6 px-4"},le=M({__name:"EmployeeStaff",setup(Q){const i=o(()=>N().systemStatus),w=o(()=>L().accountId),y=V(),x=o(()=>i.value===1?[{name:"create",icon:"plus",function:()=>y.push("/employee/staff/new")}]:[]),g=async c=>{try{const l=await $().readQuestionnaire(c)}catch{}},p=o(()=>$().questionnaire(1)),h=async({userId:c,qId:l})=>{try{const _=await v().readAnswersInformation({userId:c,qId:l})}catch{}},A=o(()=>ee().users);return O(()=>{g(1),h({userId:w.value,qId:1})}),(c,l)=>{const _=ie,b=U,e=P("router-view");return s(A)?(u(),j("div",ce,[m(_),m(E,{name:"sidebar",mode:"out-in",appear:""},{default:a(()=>[s(p)?(u(),f(b,{key:0,items:s(x)},null,8,["items"])):C("v-if",!0)]),_:1}),s(p)?(u(),f(e,{key:0},{default:a(({Component:t})=>[m(E,{name:"modal",mode:"out-in",appear:""},{default:a(()=>[(u(),f(W(t)))]),_:2},1024)]),_:1})):C("v-if",!0)])):C("v-if",!0)}}}),be=q(le,[["__file","/home/runner/work/peer-assessment/peer-assessment/src/views/EmployeeStaff.vue"]]);export{be as default};
