import{_ as U}from"./TheSideBar.7310c7f4.js";import{_ as G}from"./BaseTable.6ef7d406.js";import{_ as $,d as q,z as o,i as I,u as M,l as r,k as f,g as a,e as l,t as F,f as m,h as s,c as V,C as H,F as J,n as E,s as K,A as O,b as P,T as L,j as C,B as W}from"./index.57433029.js";import{_ as X}from"./BaseScore.0186a6ca.js";import{_ as Y}from"./BaseTag.ac315403.js";import{u as v}from"./answers.b7afcfc0.js";import{u as j}from"./account.85edfc9e.js";import{g as S,d as Z}from"./data.6ab9a877.js";import{u as N}from"./system.90bac7a6.js";import{u as T}from"./questions.f516b068.js";import{u as ee}from"./users.f875ecc3.js";import"./api.66e06c5f.js";const te={class:"flex justify-start items-center"},se=["src"],ne={class:"text-sm 2xl:text-base"},oe={class:"text-sm 2xl:text-base"},ae=["disabled","onClick"],re=["disabled","onClick"],ue=q({__name:"EmployeeLeaderMain",setup(Q){const u=o(()=>N().systemStatus),w=o(()=>j().accountId),y=[{name:"\u59D3\u540D",key:"profile"},{name:"\u90E8\u9580",key:"department",width:"20%"},{name:"\u8A55\u5206",key:"scores",width:"60%"},{name:"\u529F\u80FD",key:"function"}],x=o(()=>{var e;return(e=v().answersInformation(2))==null?void 0:e.map(t=>({profile:{name:t.reviewee.name,picture:t.reviewee.picture},department:t.reviewee.department,scores:t.answers.filter(_=>_.score).map(_=>_.score),function:t.id}))}),g=e=>Z.findIndex(t=>e===t.value),d=I("setToastData",()=>null),h=I("setIsLoading",()=>null),A=async e=>{try{h(!0);const t=await v().deleteAnswersInformation(e);d({isActive:!0,variant:"success",message:"\u522A\u9664\u6210\u529F"}),v().readAnswersInformation({userId:w.value,qId:2})}catch{d({isActive:!0,variant:"error",message:"\u522A\u9664\u5931\u6557"})}finally{h(!1)}},i=M(),c=e=>i.push(`/employee/leader/edit/${e}`),p=I("setConfirmData",()=>null),b=e=>{p({isActive:!0,confirm:()=>A(e),text:"\u8ACB\u78BA\u8A8D\u662F\u5426\u522A\u9664\u8A72\u7B46\u8CC7\u6599\uFF1F"})};return(e,t)=>{const _=Y,z=X,B=K,R=G;return r(),f(R,{fields:y,items:s(x)},{profile:a(n=>[l("div",te,[l("img",{class:"inline-block rounded-full w-14 2xl:w-16 max-w-none h-14 2xl:h-16 bg-light mx-3 2xl:mx-4",src:n.data.picture||"/user.png",alt:"user"},null,8,se),l("span",ne,F(n.data.name),1)])]),department:a(n=>[m(_,{variant:s(S)(g(n.data))},{default:a(()=>[l("span",oe,F(n.data),1)]),_:2},1032,["variant"])]),scores:a(n=>[(r(!0),V(J,null,H(n.data,(k,D)=>(r(),f(z,{key:D,class:"w-16 2xl:w-18 h-16 2xl:h-18",variant:s(S)(D),score:k},null,8,["variant","score"]))),128))]),function:a(n=>[l("button",{disabled:s(u)!==1,class:E(s(u)==1?["fill-muted hover:fill-theme hover:animate-bounce"]:"fill-muted-light pointer-events-none"),onClick:k=>c(n.data)},[m(B,{role:"button",class:"w-5 2xl:w-6 h-5 2xl:h-6 m-1 2xl:m-2",name:"edit"})],10,ae),l("button",{disabled:s(u)!==1,class:E(s(u)==1?["fill-muted hover:fill-theme hover:animate-bounce"]:"fill-muted-light pointer-events-none"),onClick:k=>b(n.data)},[m(B,{role:"button",class:"w-5 2xl:w-6 h-5 2xl:h-6 m-1 2xl:m-2",name:"delete"})],10,re)]),_:1},8,["items"])}}}),ie=$(ue,[["__file","/home/runner/work/peer-assessment/peer-assessment/src/components/EmployeeLeaderMain.vue"]]),ce={key:0,class:"absolute w-full h-full pt-6 px-4"},le=q({__name:"EmployeeLeader",setup(Q){const u=o(()=>N().systemStatus),w=o(()=>j().accountId),y=M(),x=o(()=>u.value===1?[{name:"create",icon:"plus",function:()=>y.push("/employee/leader/new")}]:[]),g=async i=>{try{const c=await T().readQuestionnaire(i)}catch{}},d=o(()=>T().questionnaire(2)),h=async({userId:i,qId:c})=>{try{const p=await v().readAnswersInformation({userId:i,qId:c})}catch{}},A=o(()=>ee().users);return O(()=>{g(2),h({userId:w.value,qId:2})}),(i,c)=>{const p=ie,b=U,e=P("router-view");return s(A)?(r(),V("div",ce,[m(p),m(L,{name:"sidebar",mode:"out-in",appear:""},{default:a(()=>[s(d)?(r(),f(b,{key:0,items:s(x)},null,8,["items"])):C("v-if",!0)]),_:1}),s(d)?(r(),f(e,{key:0},{default:a(({Component:t})=>[m(L,{name:"modal",mode:"out-in",appear:""},{default:a(()=>[(r(),f(W(t)))]),_:2},1024)]),_:1})):C("v-if",!0)])):C("v-if",!0)}}}),be=$(le,[["__file","/home/runner/work/peer-assessment/peer-assessment/src/views/EmployeeLeader.vue"]]);export{be as default};
