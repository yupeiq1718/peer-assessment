import{_ as b,a as w}from"./BaseFormSelect.6d70968b.js";import{_ as S}from"./BaseFormInput.a1395c76.js";import{_ as D}from"./BaseFormTextarea.d65ceccb.js";import{_ as Q,d as k,z as f,a as R,i as F,u as $,A as T,k as r,g as H,h as t,l as i,e as C,f as l,j as g,p as V,m as E}from"./index.a32bcd10.js";import{u as j}from"./vee-validate.esm.78d42f1b.js";import{q as z}from"./data.ff9c2fa5.js";import{u as y}from"./questions.aa957120.js";import{a as L,c,e as M}from"./array.f21bae85.js";import{u as G}from"./system.37c5d4bb.js";import"./BaseMessage.647f0997.js";import"./BaseSelect.729da32e.js";import"./BaseInput.d3cb4591.js";import"./BaseTextarea.f608fa16.js";import"./api.359bc57d.js";const J=o=>(V("data-v-5ef3c3c5"),o=o(),E(),o),K={class:"m-2 p-8 grid grid-cols-1 lg:grid-cols-2 2xl:grid-cols-3 gap-4 bg-white rounded-2xl duration-500"},O=J(()=>C("hr",{class:"border-1 border-theme my-4 col-span-1 lg:col-span-2 2xl:col-span-3"},null,-1)),P=k({__name:"AdminQuestionNew",setup(o){const x=f(()=>G().systemStatus),I=R(),u=f(()=>Number(I.params.roleId)),{setFieldValue:s,values:n,handleSubmit:h}=j();s("content",""),s("tag",""),s("textHint",""),s("typeId",1),s("isRequired",!1);const p=F("setToastData",()=>null),m=F("setIsLoading",()=>null),v=h(async e=>{try{m(!0);const d=await y().createQuestion({roleId:u.value,question:{content:e.content,tag:e.tag,textHint:e.textHint,typeId:Number(e.typeId),isRequired:String(e.isRequired)==="true"}});p({isActive:!0,variant:"success",message:"\u65B0\u589E\u6210\u529F"}),y().readQuestionnaire(u.value),a.push(`/admin/question/${u.value}`)}catch({response:d}){p({isActive:!0,variant:"error",message:"\u65B0\u589E\u5931\u6557"})}finally{m(!1)}}),a=$(),q=()=>a.push(`/admin/question/${u.value}`);return T(()=>{x.value!==0&&a.push(`/admin/question/${u.value}`)}),(e,d)=>{const _=w,B=D,N=S,A=b;return i(),r(A,{size:"full",onConfirm:t(v),onCancel:q},{default:H(()=>[C("article",K,[l(_,{class:"col-span-1 p-0",name:"typeId",options:t(z),title:"\u8ACB\u9078\u64C7\u554F\u7B54\u985E\u578B",rule:L().required("\u6B64\u6B04\u4F4D\u5FC5\u586B")},null,8,["options","rule"]),O,l(B,{name:"content",class:"col-span-1 lg:col-span-2 2xl:col-span-3 p-0",title:"\u8ACB\u8F38\u5165\u554F\u984C\u6558\u8FF0",rule:c().required("\u6B64\u6B04\u4F4D\u5FC5\u586B")},null,8,["rule"]),l(N,{name:"tag",type:"text",class:"col-span-1 p-0",title:"\u8ACB\u8F38\u5165\u6A19\u7C64",rule:c().required("\u6B64\u6B04\u4F4D\u5FC5\u586B")},null,8,["rule"]),Number(t(n).typeId)===2||Number(t(n).typeId)===3?(i(),r(B,{key:0,name:"textHint",class:"col-span-1 lg:col-span-2 2xl:col-span-3",title:"\u8ACB\u8F38\u5165\u6587\u5B57\u554F\u984C\u6558\u8FF0",rule:c().required("\u6B64\u6B04\u4F4D\u5FC5\u586B")},null,8,["rule"])):g("v-if",!0),Number(t(n).typeId)===2||Number(t(n).typeId)===3?(i(),r(_,{key:1,class:"col-span-1 p-0",name:"isRequired",options:[{text:"\u9078\u586B",value:!1},{text:"\u5FC5\u586B",value:!0}],title:"\u662F\u5426\u5FC5\u586B",role:M().required("\u6B64\u6B04\u4F4D\u5FC5\u586B")},null,8,["role"])):g("v-if",!0)])]),_:1},8,["onConfirm"])}}}),le=Q(P,[["__scopeId","data-v-5ef3c3c5"],["__file","/home/runner/work/peer-assessment/peer-assessment/src/views/AdminQuestionNew.vue"]]);export{le as default};
