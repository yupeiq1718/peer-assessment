import{_ as G}from"./TheSideBar.3a995769.js";import{_ as q,d as F,a as N,z as u,i as $,u as R,l as c,c as x,e as m,f as r,g as w,q as B,t as k,h as t,k as A,j as C,s as z,F as J,C as K,w as O,A as P,b as W,T as E,B as X}from"./index.d6278b14.js";import{_ as Y}from"./BaseFormTextarea.5b584739.js";import{_ as Z}from"./BaseFormScore.58883ec4.js";import{_ as ee}from"./BaseTag.fad333f2.js";import{u as p}from"./questions.7c0cbbb5.js";import{g as L,r as te}from"./data.054ee288.js";import{u as ne}from"./users.9e6e331b.js";import"./BaseMessage.42ad9d57.js";import"./BaseTextarea.00efb149.js";import"./vee-validate.esm.5d1308fa.js";import"./BaseScore.52e83aff.js";import"./api.14d1c8a9.js";const se={class:"p-8 bg-white rounded-2xl flex flex-col mb-4"},oe={class:"flex flex-row justify-end items-center duration-500 overflow-hidden"},re=m("hr",{class:"border-2 border-light grow-[1] mx-3"},null,-1),ae=F({__name:"AdminQuestionAnswer",props:{id:{type:Number,required:!0}},setup(b){const s=b,f=N(),e=u(()=>Number(f.params.roleId)),n=u(()=>p().question({roleId:e.value,id:s.id})),v=$("setToastData",()=>null),l=$("setIsLoading",()=>null),d=async()=>{try{const o=await p().readQuestionnaire(e.value)}catch{}},y=async({roleId:o,id:i})=>{try{l(!0);const h=await p().deleteQuestion({roleId:o,id:i});v({isActive:!0,variant:"success",message:"\u522A\u9664\u6210\u529F"}),d()}catch{v({isActive:!0,variant:"error",message:"\u522A\u9664\u5931\u6557"})}finally{l(!1)}},a=R(),_=()=>{var o;a.push(`/admin/question/${e.value}/edit/${(o=n.value)==null?void 0:o.id}`)},I=$("setConfirmData",()=>null),Q=()=>{I({isActive:!0,confirm:()=>y({roleId:2,id:s.id}),text:"\u8ACB\u78BA\u8A8D\u662F\u5426\u522A\u9664\u8A72\u7B46\u8CC7\u6599\uFF1F"})};return(o,i)=>{var D,j,S,V,M;const h=ee,H=Z,U=Y,T=z;return c(),x("div",null,[m("article",se,[m("label",null,[r(h,{variant:t(L)(s.id)},{default:w(()=>{var g;return[B(k((g=t(n))==null?void 0:g.tag),1)]}),_:1},8,["variant"]),B(" "+k((D=t(n))==null?void 0:D.content),1)]),((j=t(n))==null?void 0:j.typeId)===1||((S=t(n))==null?void 0:S.typeId)===2?(c(),A(H,{key:0,name:"score",variant:t(L)(s.id),class:"mt-4"},null,8,["variant"])):C("v-if",!0),((V=t(n))==null?void 0:V.typeId)===2||((M=t(n))==null?void 0:M.typeId)===3?(c(),A(U,{key:1,name:"text",placeholder:t(n).textHint,class:"w-full mt-4"},null,8,["placeholder"])):C("v-if",!0)]),m("footer",oe,[re,m("button",{class:"rounded-2xl flex justify-center items-center bg-light hover:bg-theme fill-white w-10 h-10 mr-2 duration-500",onClick:i[0]||(i[0]=g=>_())},[r(T,{name:"edit",class:"w-6 h-6"})]),m("button",{class:"rounded-2xl flex justify-center items-center bg-light hover:bg-theme fill-white w-10 h-10 mr-2 duration-500",onClick:i[1]||(i[1]=g=>Q())},[r(T,{name:"delete",class:"w-6 h-6"})])])])}}}),ie=q(ae,[["__file","/home/runner/work/peer-assessment/peer-assessment/src/components/AdminQuestionAnswer.vue"]]),ue={class:"mx-5 mt-5 mb-2 grid grid-cols-1 lg:grid-cols-2 2xl:grid-cols-3 gap-4"},ce=F({__name:"AdminQuestionMain",setup(b){const s=N(),f=u(()=>Number(s.params.roleId)),e=u(()=>p().questions(f.value));return(n,v)=>{const l=ie;return c(),x("article",ue,[(c(!0),x(J,null,K(t(e),d=>(c(),A(l,{id:d.id,key:d.id,class:"col-span-1 lg:col-span-2 2xl:col-span-3"},null,8,["id"]))),128))])}}}),le=q(ce,[["__file","/home/runner/work/peer-assessment/peer-assessment/src/components/AdminQuestionMain.vue"]]),me={key:0,class:"absolute w-full h-full"},de={class:"font-bold text-dark text-sm"},_e=F({__name:"AdminQuestion",setup(b){const s=R(),f=N(),e=u(()=>Number(f.params.roleId)),n=u(()=>{const a=te.find(_=>_.value===Number(e.value));return`${a==null?void 0:a.text}\u4E92\u8A55\u554F\u5377`}),v=[{name:"create",icon:"plus",function:()=>s.push(`/admin/question/${e.value}/new`)},{name:"filter",icon:"filter",function:()=>s.push(`/admin/question/${e.value}/filter`)}],l=async a=>{try{const _=await p().readQuestionnaire(a)}catch{}},d=u(()=>ne().users),y=u(()=>p().questionnaire(e.value));return O(e,()=>l(e.value)),P(()=>{l(e.value)}),(a,_)=>{const I=z,Q=le,o=G,i=W("router-view");return t(d)&&t(y)?(c(),x("div",me,[m("span",de,[r(I,{name:"question",class:"w-4 h-4 mr-2"}),B(k(t(n)),1)]),r(Q),r(E,{name:"sidebar",mode:"out-in",appear:""},{default:w(()=>[r(o,{items:v})]),_:1}),r(i,null,{default:w(({Component:h})=>[r(E,{name:"modal",mode:"out-in",appear:""},{default:w(()=>[(c(),A(X(h)))]),_:2},1024)]),_:1})])):C("v-if",!0)}}}),Be=q(_e,[["__file","/home/runner/work/peer-assessment/peer-assessment/src/views/AdminQuestion.vue"]]);export{Be as default};
