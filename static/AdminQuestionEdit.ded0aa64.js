import{_ as R,a as $}from"./BaseFormSelect.62e938db.js";import{_ as w}from"./BaseFormInput.6a9e03db.js";import{_ as T}from"./BaseFormTextarea.133d0fbd.js";import{_ as D,d as E,a as H,z as I,i as x,u as V,k as n,g as S,h as e,l as i,e as j,f as r,j as h}from"./index.9ba0f2cc.js";import{u as z}from"./vee-validate.esm.81d1efae.js";import{q as L}from"./data.5612e520.js";import{u as c}from"./questions.578b08b6.js";import{c as M,a as l,b as G,e as J}from"./array.0c22e0ec.js";import"./BaseMessage.fbe759f6.js";import"./BaseSelect.0cb34ebf.js";import"./BaseInput.aeb79259.js";import"./BaseTextarea.96981008.js";import"./api.efb1d207.js";const K={class:"m-2 p-8 grid grid-cols-1 lg:grid-cols-2 2xl:grid-cols-3 gap-4 bg-white rounded-2xl duration-500"},O=E({__name:"AdminQuestionEdit",setup(P){var _,f,B,F,g;const o=H(),t=I(()=>Number(o.params.roleId)),s=I(()=>c().question({roleId:t.value,id:Number(o.params.id)})),q=M({content:l().required("\u6B64\u6B04\u4F4D\u5FC5\u586B"),tag:l().required("\u6B64\u6B04\u4F4D\u5FC5\u586B"),textHint:l(),typeId:G(),isRequired:J()}),{values:u,handleSubmit:b}=z({initialValues:{typeId:((_=s.value)==null?void 0:_.typeId)||1,content:((f=s.value)==null?void 0:f.content)||"",tag:((B=s.value)==null?void 0:B.tag)||"",textHint:((F=s.value)==null?void 0:F.textHint)||"",isRequired:((g=s.value)==null?void 0:g.isRequired)||!1},validationSchema:q}),p=x("setToastData",()=>null),m=x("setIsLoading",()=>null),N=b(async a=>{try{m(!0);const v=await c().updateQuestion({roleId:t.value,id:Number(o.params.id),question:{...a,typeId:Number(a.typeId)}});p({isActive:!0,variant:"success",message:"\u66F4\u65B0\u6210\u529F"}),c().readQuestionnaire(t.value),d.push(`/admin/question/${t.value}`)}catch({response:v}){p({isActive:!0,variant:"error",message:"\u66F4\u65B0\u5931\u6557"})}finally{m(!1)}}),d=V(),A=()=>d.push(`/admin/question/${t.value}`);return(a,v)=>{const C=$,y=T,k=w,Q=R;return i(),n(Q,{size:"full",onConfirm:e(N),onCancel:A},{default:S(()=>[j("article",K,[r(C,{class:"col-span-1 p-0",name:"typeId",options:e(L),title:"\u8ACB\u9078\u64C7\u554F\u7B54\u985E\u578B"},null,8,["options"]),r(y,{name:"content",class:"col-span-1 lg:col-span-2 2xl:col-span-3",title:"\u8ACB\u8F38\u5165\u554F\u984C\u6558\u8FF0"}),r(k,{name:"tag",type:"text",class:"col-span-1 p-0",title:"\u8ACB\u8F38\u5165\u6A19\u7C64"}),Number(e(u).typeId)===2||Number(e(u).typeId)===3?(i(),n(y,{key:0,name:"textHint",class:"col-span-1 lg:col-span-2 2xl:col-span-3",title:"\u8ACB\u8F38\u5165\u6587\u5B57\u554F\u984C\u6558\u8FF0"})):h("v-if",!0),Number(e(u).typeId)===2||Number(e(u).typeId)===3?(i(),n(C,{key:1,class:"col-span-1 p-0",name:"isRequired",options:[{text:"\u9078\u586B",value:!1},{text:"\u5FC5\u586B",value:!0}],title:"\u662F\u5426\u5FC5\u586B"})):h("v-if",!0)])]),_:1},8,["onConfirm"])}}}),re=D(O,[["__file","/home/runner/work/peer-assessment/peer-assessment/src/views/AdminQuestionEdit.vue"]]);export{re as default};
