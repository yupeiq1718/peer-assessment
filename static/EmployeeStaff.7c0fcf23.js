import{_ as V}from"./TheSideBar.3a995769.js";import{_ as j}from"./BaseTable.fdd2e8f4.js";import{_ as F,d as S,z as c,i as k,u as E,l as i,c as C,f as n,g as o,e as _,t as b,q as L,F as Q,C as R,k as T,h as f,s as z,A as U,b as G,T as x,j as H,B as J}from"./index.d6278b14.js";import{_ as K}from"./BaseScore.52e83aff.js";import{_ as O}from"./BaseTag.fad333f2.js";import{u as m}from"./answers.ee827346.js";import{u as $}from"./account.6ee35a83.js";import{u as D}from"./questions.7c0cbbb5.js";import{u as P}from"./users.9e6e331b.js";import"./api.14d1c8a9.js";const W={class:"mx-5 my-2"},X={class:"flex justify-start items-center"},Y=["src"],Z=S({__name:"EmployeeStaffMain",setup(q){const d=c(()=>$().accountId),h=[{name:"\u59D3\u540D",key:"profile"},{name:"\u90E8\u9580",key:"department",width:"20%"},{name:"\u8A55\u5206",key:"scores",width:"60%"},{name:"\u529F\u80FD",key:"function"}],v=c(()=>{var e;return(e=m().answersInformation(1))==null?void 0:e.map(t=>({profile:{name:t.reviewee.name,picture:t.reviewee.picture},department:t.reviewee.department,scores:t.answers.filter(a=>a.score).map(a=>a.score),function:t.id}))}),l=k("setToastData",()=>null),p=k("setIsLoading",()=>null),w=async e=>{try{p(!0);const t=await m().deleteAnswersInformation(e);l({isActive:!0,variant:"success",message:"\u522A\u9664\u6210\u529F"}),m().readAnswersInformation({userId:d.value,qId:1})}catch{l({isActive:!0,variant:"error",message:"\u522A\u9664\u5931\u6557"})}finally{p(!1)}},y=E(),g=e=>y.push(`/employee/staff/edit/${e}`),r=k("setConfirmData",()=>null),u=e=>{r({isActive:!0,confirm:()=>w(e),text:"\u8ACB\u78BA\u8A8D\u662F\u5426\u522A\u9664\u8A72\u7B46\u8CC7\u6599\uFF1F"})};return(e,t)=>{const a=O,A=K,B=z,M=j;return i(),C("div",W,[n(M,{fields:h,items:f(v)},{profile:o(s=>[_("div",X,[_("img",{class:"inline-block rounded-full w-16 max-w-none h-16 bg-light mr-4",src:s.data.picture||"/user.png",alt:"user"},null,8,Y),_("span",null,b(s.data.name),1)])]),department:o(s=>[n(a,{variant:"theme"},{default:o(()=>[L(b(s.data),1)]),_:2},1024)]),scores:o(s=>[(i(!0),C(Q,null,R(s.data,(I,N)=>(i(),T(A,{key:N,variant:"theme",score:I},null,8,["score"]))),128))]),function:o(s=>[_("div",null,[n(B,{role:"button",class:"w-6 h-6 m-2 fill-muted hover:fill-theme",name:"edit",onClick:I=>g(s.data)},null,8,["onClick"]),n(B,{role:"button",class:"w-6 h-6 m-2 fill-muted hover:fill-theme",name:"delete",onClick:I=>u(s.data)},null,8,["onClick"])])]),_:1},8,["items"])])}}}),ee=F(Z,[["__file","/home/runner/work/peer-assessment/peer-assessment/src/components/EmployeeStaffMain.vue"]]),te={key:0,class:"absolute w-full h-full"},se=S({__name:"EmployeeStaff",setup(q){const d=c(()=>$().accountId),h=E(),v=[{name:"create",icon:"plus",function:()=>h.push("/employee/staff/new")}],l=c(()=>D().questionnaire(1)),p=async r=>{try{const u=await D().readQuestionnaire(r)}catch{}},w=c(()=>m().answersInformation(1)),y=async({userId:r,qId:u})=>{try{const e=await m().readAnswersInformation({userId:r,qId:u})}catch{}},g=c(()=>P().users);return U(()=>{p(1),y({userId:d.value,qId:1})}),(r,u)=>{const e=ee,t=V,a=G("router-view");return f(l)&&f(w)&&f(g)?(i(),C("div",te,[n(e),n(x,{name:"sidebar",mode:"out-in",appear:""},{default:o(()=>[n(t,{items:v})]),_:1}),n(a,null,{default:o(({Component:A})=>[n(x,{name:"modal",mode:"out-in",appear:""},{default:o(()=>[(i(),T(J(A)))]),_:2},1024)]),_:1})])):H("v-if",!0)}}}),_e=F(se,[["__file","/home/runner/work/peer-assessment/peer-assessment/src/views/EmployeeStaff.vue"]]);export{_e as default};
