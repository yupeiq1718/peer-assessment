import{_ as G,a as H}from"./TheSideBar.d1d94cb3.js";import{_ as J}from"./BaseTable.a4c10453.js";import{_ as q,d as M,z as o,i as B,u as V,l as u,k as v,g as a,e as m,t as L,f as r,h as s,c as E,C as K,F as O,n as S,s as P,A as W,b as X,T,j as C,B as Y}from"./index.f689cf9e.js";import{_ as Z}from"./BaseScore.a0178e23.js";import{_ as ee}from"./BaseTag.d6f7bee9.js";import{u as h}from"./answers.bd5f15d3.js";import{u as j}from"./account.390f12b3.js";import{g as D,d as te}from"./data.ff9c2fa5.js";import{u as N}from"./system.8ba5b3c0.js";import{u as $}from"./questions.2554ab8a.js";import{u as se}from"./users.5f05567c.js";import"./api.80204498.js";const ne={class:"flex justify-start items-center"},oe=["src"],ae={class:"text-sm 2xl:text-base"},re={class:"text-sm 2xl:text-base"},ue=["disabled","onClick"],ie=["disabled","onClick"],ce=M({__name:"EmployeeLeaderMain",setup(Q){const i=o(()=>N().systemStatus),w=o(()=>j().accountId),y=[{name:"\u59D3\u540D",key:"profile"},{name:"\u90E8\u9580",key:"department",width:"20%"},{name:"\u8A55\u5206",key:"scores",width:"60%"},{name:"\u529F\u80FD",key:"function"}],x=o(()=>{var e;return(e=h().answersInformation(2))==null?void 0:e.map(t=>({profile:{name:t.reviewee.name,picture:t.reviewee.picture},department:t.reviewee.department,scores:t.answers.filter(A=>A.score),function:t.id}))}),g=e=>te.findIndex(t=>e===t.value),p=B("setToastData",()=>null),d=B("setIsLoading",()=>null),b=async e=>{try{d(!0);const t=await h().deleteAnswersInformation(e);p({isActive:!0,variant:"success",message:"\u522A\u9664\u6210\u529F"}),h().readAnswersInformation({userId:w.value,qId:2})}catch{p({isActive:!0,variant:"error",message:"\u522A\u9664\u5931\u6557"})}finally{d(!1)}},c=V(),l=e=>c.push(`/employee/leader/edit/${e}`),_=B("setConfirmData",()=>null),k=e=>{_({isActive:!0,confirm:()=>b(e),text:"\u8ACB\u78BA\u8A8D\u662F\u5426\u522A\u9664\u8A72\u7B46\u8CC7\u6599\uFF1F"})};return(e,t)=>{const A=ee,z=Z,R=G,F=P,U=J;return u(),v(U,{fields:y,items:s(x)},{profile:a(n=>[m("div",ne,[m("img",{class:"inline-block rounded-full w-14 2xl:w-16 max-w-none h-14 2xl:h-16 bg-light mx-3 2xl:mx-4",src:n.data.picture||"/user.png",alt:"user"},null,8,oe),m("span",ae,L(n.data.name),1)])]),department:a(n=>[r(A,{variant:s(D)(g(n.data))},{default:a(()=>[m("span",re,L(n.data),1)]),_:2},1032,["variant"])]),scores:a(n=>[(u(!0),E(O,null,K(n.data,(f,I)=>(u(),E("div",{key:I,class:"relative group inline-block"},[r(z,{variant:s(D)(I),class:"w-16 2xl:w-18 h-16 2xl:h-18",score:f.score},null,8,["variant","score"]),r(R,{class:"absolute whitespace-nowrap left-1/2 bottom-18 2xl:bottom-20 -translate-x-1/2 opacity-0 group-hover:block lg:group-hover:opacity-100",variant:s(D)(I),text:f.tag},null,8,["variant","text"])]))),128))]),function:a(n=>[m("button",{disabled:s(i)!==1,class:S(s(i)==1?["fill-muted hover:fill-theme hover:animate-bounce"]:"fill-muted-light pointer-events-none"),onClick:f=>l(n.data)},[r(F,{role:"button",class:"w-5 2xl:w-6 h-5 2xl:h-6 m-1 2xl:m-2",name:"edit"})],10,ue),m("button",{disabled:s(i)!==1,class:S(s(i)==1?["fill-muted hover:fill-theme hover:animate-bounce"]:"fill-muted-light pointer-events-none"),onClick:f=>k(n.data)},[r(F,{role:"button",class:"w-5 2xl:w-6 h-5 2xl:h-6 m-1 2xl:m-2",name:"delete"})],10,ie)]),_:1},8,["items"])}}}),le=q(ce,[["__file","/home/runner/work/peer-assessment/peer-assessment/src/components/EmployeeLeaderMain.vue"]]),me={key:0,class:"absolute w-full h-full pt-6 px-4"},pe=M({__name:"EmployeeLeader",setup(Q){const i=o(()=>N().systemStatus),w=o(()=>j().accountId),y=V(),x=o(()=>i.value===1?[{name:"\u65B0\u589E",icon:"plus",function:()=>y.push("/employee/leader/new")}]:[]),g=async c=>{try{const l=await $().readQuestionnaire(c)}catch{}},p=o(()=>$().questionnaire(2)),d=async({userId:c,qId:l})=>{try{const _=await h().readAnswersInformation({userId:c,qId:l})}catch{}},b=o(()=>se().users);return W(()=>{g(2),d({userId:w.value,qId:2})}),(c,l)=>{const _=le,k=H,e=X("router-view");return s(b)?(u(),E("div",me,[r(_),r(T,{name:"sidebar",mode:"out-in",appear:""},{default:a(()=>[s(p)?(u(),v(k,{key:0,items:s(x)},null,8,["items"])):C("v-if",!0)]),_:1}),s(p)?(u(),v(e,{key:0},{default:a(({Component:t})=>[r(T,{name:"modal",mode:"out-in",appear:""},{default:a(()=>[(u(),v(Y(t)))]),_:2},1024)]),_:1})):C("v-if",!0)])):C("v-if",!0)}}}),Ie=q(pe,[["__file","/home/runner/work/peer-assessment/peer-assessment/src/views/EmployeeLeader.vue"]]);export{Ie as default};
