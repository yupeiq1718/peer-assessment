import{_ as S}from"./TheSideBar.3a995769.js";import{_ as V}from"./BaseTable.fdd2e8f4.js";import{_ as b,d as E,z as c,i as k,u as L,l as i,c as C,f as t,g as o,e as _,t as x,q as j,F as Q,C as R,k as T,h as d,s as z,A as U,b as G,T as D,j as H,B as J}from"./index.d6278b14.js";import{_ as K}from"./BaseScore.52e83aff.js";import{_ as O}from"./BaseTag.fad333f2.js";import{u as m}from"./answers.ee827346.js";import{u as $}from"./account.6ee35a83.js";import{u as F}from"./questions.7c0cbbb5.js";import{u as P}from"./users.9e6e331b.js";import"./api.14d1c8a9.js";const W={class:"mx-5 my-2"},X={class:"flex justify-start items-center"},Y=["src"],Z=E({__name:"EmployeeLeaderMain",setup(q){const f=c(()=>$().accountId),v=[{name:"\u59D3\u540D",key:"profile"},{name:"\u90E8\u9580",key:"department",width:"20%"},{name:"\u8A55\u5206",key:"scores",width:"60%"},{name:"\u529F\u80FD",key:"function"}],h=c(()=>{var e;return(e=m().answersInformation(2))==null?void 0:e.map(s=>({profile:{name:s.reviewee.name,picture:s.reviewee.picture},department:s.reviewee.department,scores:s.answers.filter(a=>a.score).map(a=>a.score),function:s.id}))}),l=k("setToastData",()=>null),p=k("setIsLoading",()=>null),w=async e=>{try{p(!0);const s=await m().deleteAnswersInformation(e);l({isActive:!0,variant:"success",message:"\u522A\u9664\u6210\u529F"}),m().readAnswersInformation({userId:f.value,qId:2})}catch{l({isActive:!0,variant:"error",message:"\u522A\u9664\u5931\u6557"})}finally{p(!1)}},y=L(),A=e=>y.push(`/employee/leader/edit/${e}`),r=k("setConfirmData",()=>null),u=e=>{r({isActive:!0,confirm:()=>w(e),text:"\u8ACB\u78BA\u8A8D\u662F\u5426\u522A\u9664\u8A72\u7B46\u8CC7\u6599\uFF1F"})};return(e,s)=>{const a=O,g=K,B=z,M=V;return i(),C("div",W,[t(M,{fields:v,items:d(h)},{profile:o(n=>[_("div",X,[_("img",{class:"inline-block rounded-full w-16 max-w-none h-16 mr-4",src:n.data.picture||"/user.png",alt:"user"},null,8,Y),_("span",null,x(n.data.name),1)])]),department:o(n=>[t(a,{variant:"theme"},{default:o(()=>[j(x(n.data),1)]),_:2},1024)]),scores:o(n=>[(i(!0),C(Q,null,R(n.data,(I,N)=>(i(),T(g,{key:N,variant:"theme",score:I},null,8,["score"]))),128))]),function:o(n=>[_("div",null,[t(B,{role:"button",class:"w-6 h-6 m-2 fill-muted hover:fill-theme",name:"edit",onClick:I=>A(n.data)},null,8,["onClick"]),t(B,{role:"button",class:"w-6 h-6 m-2 fill-muted hover:fill-theme",name:"delete",onClick:I=>u(n.data)},null,8,["onClick"])])]),_:1},8,["items"])])}}}),ee=b(Z,[["__file","/home/runner/work/peer-assessment/peer-assessment/src/components/EmployeeLeaderMain.vue"]]),se={key:0,class:"absolute w-full h-full"},ne=E({__name:"EmployeeLeader",setup(q){const f=c(()=>$().accountId),v=L(),h=[{name:"create",icon:"plus",function:()=>v.push("/employee/leader/new")}],l=c(()=>F().questionnaire(2)),p=async r=>{try{const u=await F().readQuestionnaire(r)}catch{}},w=c(()=>m().answersInformation(2)),y=async({userId:r,qId:u})=>{try{const e=await m().readAnswersInformation({userId:r,qId:u})}catch{}},A=c(()=>P().users);return U(()=>{p(2),y({userId:f.value,qId:2})}),(r,u)=>{const e=ee,s=S,a=G("router-view");return d(l)&&d(w)&&d(A)?(i(),C("div",se,[t(e),t(D,{name:"sidebar",mode:"out-in",appear:""},{default:o(()=>[t(s,{items:h})]),_:1}),t(a,null,{default:o(({Component:g})=>[t(D,{name:"modal",mode:"out-in",appear:""},{default:o(()=>[(i(),T(J(g)))]),_:2},1024)]),_:1})])):H("v-if",!0)}}}),_e=b(ne,[["__file","/home/runner/work/peer-assessment/peer-assessment/src/views/EmployeeLeader.vue"]]);export{_e as default};
