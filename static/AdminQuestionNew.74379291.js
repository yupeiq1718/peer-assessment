import{_ as N,a as A}from"./BaseFormSelect.e4703b09.js";import{_ as b}from"./BaseFormInput.bbcb5f3d.js";import{_ as w}from"./BaseFormTextarea.68737fd8.js";import{_ as D,d as k,z as B,a as Q,i as F,u as R,A as S,k as a,g as $,h as t,l as r,e as T,f as i,j as f}from"./index.8860b673.js";import{u as H}from"./vee-validate.esm.4c777bfe.js";import{q as V}from"./data.6ab9a877.js";import{u as g}from"./questions.90f8490d.js";import{a as E,c as l,e as j}from"./array.b130bfd4.js";import{u as z}from"./system.b7cc1d75.js";import"./BaseMessage.9c5f38cf.js";import"./BaseSelect.359f955f.js";import"./BaseInput.cf12d888.js";import"./BaseTextarea.10d33873.js";import"./api.3f8f16a2.js";const L={class:"m-2 p-8 grid grid-cols-1 lg:grid-cols-2 2xl:grid-cols-3 gap-4 bg-white rounded-2xl duration-500"},M=k({__name:"AdminQuestionNew",setup(G){const C=B(()=>z().systemStatus),y=Q(),u=B(()=>Number(y.params.roleId)),{setFieldValue:s,values:o,handleSubmit:x}=H();s("content",""),s("tag",""),s("textHint",""),s("typeId",1),s("isRequired",!1);const c=F("setToastData",()=>null),m=F("setIsLoading",()=>null),q=x(async e=>{try{m(!0);const p=await g().createQuestion({roleId:u.value,question:{content:e.content,tag:e.tag,textHint:e.textHint,typeId:Number(e.typeId),isRequired:String(e.isRequired)==="true"}});c({isActive:!0,variant:"success",message:"\u65B0\u589E\u6210\u529F"}),g().readQuestionnaire(u.value),n.push(`/admin/question/${u.value}`)}catch({response:p}){c({isActive:!0,variant:"error",message:"\u65B0\u589E\u5931\u6557"})}finally{m(!1)}}),n=R(),I=()=>n.push(`/admin/question/${u.value}`);return S(()=>{C.value!==0&&n.push(`/admin/question/${u.value}`)}),(e,p)=>{const d=A,_=w,v=b,h=N;return r(),a(h,{size:"full",onConfirm:t(q),onCancel:I},{default:$(()=>[T("article",L,[i(d,{class:"col-span-1 p-0",name:"typeId",options:t(V),title:"\u8ACB\u9078\u64C7\u554F\u7B54\u985E\u578B",rule:E().required("\u6B64\u6B04\u4F4D\u5FC5\u586B")},null,8,["options","rule"]),i(_,{name:"content",class:"col-span-1 lg:col-span-2 2xl:col-span-3",title:"\u8ACB\u8F38\u5165\u554F\u984C\u6558\u8FF0",rule:l().required("\u6B64\u6B04\u4F4D\u5FC5\u586B")},null,8,["rule"]),i(v,{name:"tag",type:"text",class:"col-span-1 p-0",title:"\u8ACB\u8F38\u5165\u6A19\u7C64",rule:l().required("\u6B64\u6B04\u4F4D\u5FC5\u586B")},null,8,["rule"]),Number(t(o).typeId)===2||Number(t(o).typeId)===3?(r(),a(_,{key:0,name:"textHint",class:"col-span-1 lg:col-span-2 2xl:col-span-3",title:"\u8ACB\u8F38\u5165\u6587\u5B57\u554F\u984C\u6558\u8FF0",rule:l().required("\u6B64\u6B04\u4F4D\u5FC5\u586B")},null,8,["rule"])):f("v-if",!0),Number(t(o).typeId)===2||Number(t(o).typeId)===3?(r(),a(d,{key:1,class:"col-span-1 p-0",name:"isRequired",options:[{text:"\u9078\u586B",value:!1},{text:"\u5FC5\u586B",value:!0}],title:"\u662F\u5426\u5FC5\u586B",role:j().required("\u6B64\u6B04\u4F4D\u5FC5\u586B")},null,8,["role"])):f("v-if",!0)])]),_:1},8,["onConfirm"])}}}),ne=D(M,[["__file","/home/runner/work/peer-assessment/peer-assessment/src/views/AdminQuestionNew.vue"]]);export{ne as default};
