import{_ as F,a as T}from"./TheSideBar.37d972ec.js";import{_ as C}from"./BaseTable.50f2a09d.js";import{_ as M}from"./BaseScore.e0a15b4d.js";import{_ as $}from"./BaseTag.11fc7ff1.js";import{_ as B,d as E,A as w,o as u,k as D,g as c,e as p,t as N,f as r,h as _,c as b,F as A,D as L,u as S,r as V,P as I,i as j,w as P,B as q,b as z,T as k,C as G}from"./index.c127d763.js";import{u as d}from"./history.522a23b0.js";import{g as x,d as J}from"./data.ff9c2fa5.js";import{u as K}from"./account.6cc40958.js";import"./api.733c7d9b.js";const O={class:"flex justify-start items-center"},Q=["src"],U={class:"text-sm 2xl:text-base"},W={class:"text-sm 2xl:text-base"},X=E({__name:"EmployeeResultMain",setup(H){const m=[{name:"\u59D3\u540D",key:"profile"},{name:"\u90E8\u9580",key:"department",width:"15%"},{name:"\u8A55\u5206",key:"scores",width:"60%"}],f=w(()=>d().historyScore),o=w(()=>{var l;return(l=f.value)==null?void 0:l.map(a=>({profile:{name:a.name,picture:a.picture},department:a.department,function:a.id,scores:a.scores}))}),y=l=>J.findIndex(a=>l===a.value);return(l,a)=>{const v=$,g=M,h=F,t=C;return u(),D(t,{fields:m,items:_(o)},{profile:c(e=>[p("div",O,[p("img",{class:"inline-block rounded-full w-14 2xl:w-16 max-w-none h-14 2xl:h-16 bg-light mx-3 2xl:mx-4",src:e.data.picture||"/user.png",alt:"user"},null,8,Q),p("span",U,N(e.data.name),1)])]),department:c(e=>[r(v,{variant:_(x)(y(e.data))},{default:c(()=>[p("span",W,N(e.data),1)]),_:2},1032,["variant"])]),scores:c(e=>[(u(!0),b(A,null,L(e.data,(s,n)=>(u(),b("div",{key:n,class:"relative group inline-block"},[r(g,{variant:_(x)(n),class:"w-16 2xl:w-18 h-16 2xl:h-18",score:s.average},null,8,["variant","score"]),r(h,{class:"absolute whitespace-nowrap left-1/2 bottom-18 2xl:bottom-20 -translate-x-1/2 opacity-0 group-hover:block lg:group-hover:opacity-100",variant:_(x)(n),text:s.tag},null,8,["variant","text"])]))),128))]),_:1},8,["items"])}}}),Y=B(X,[["__file","/home/runner/work/peer-assessment/peer-assessment/src/components/EmployeeResultMain.vue"]]),Z={class:"absolute w-full h-full pt-6 px-4"},ee=E({__name:"EmployeeResult",setup(H){const m=w(()=>K().accountId),f=S(),o=V(),y=t=>{o.value=t};I("historyFilterData",o),I("setHistoryFilterData",y);const l=[{name:"\u4E0B\u8F09",icon:"download",function:()=>{var t,e,s;return h({year:((t=o.value)==null?void 0:t.year)||NaN,filename:((e=o.value)==null?void 0:e.filename)||"",roleId:((s=o.value)==null?void 0:s.roleId)||NaN,managerId:m.value})}},{name:"\u7BE9\u9078",icon:"filter",function:()=>f.push("/employee/result/filter")}],a=j("setIsLoading",()=>null),v=async()=>{try{a(!0);const t=await d().readHistory()}catch{}finally{a(!1)}},g=async({year:t,filename:e,roleId:s,managerId:n})=>{try{a(!0);const i=await d().readHistoryScore({year:Number(t),filename:e,roleId:Number(s),managerId:Number(n)})}catch{}finally{a(!1)}},h=async({year:t,filename:e,roleId:s,managerId:n})=>{try{a(!0);const i=await d().readHistoryReport({year:Number(t),filename:e,roleId:Number(s),managerId:Number(n)})}catch{}finally{a(!1)}};return P(()=>o.value,()=>{var t,e,s;return g({year:((t=o.value)==null?void 0:t.year)||NaN,filename:((e=o.value)==null?void 0:e.filename)||"",roleId:((s=o.value)==null?void 0:s.roleId)||NaN,managerId:m.value||NaN})}),q(async()=>{await v()}),(t,e)=>{const s=Y,n=T,i=z("router-view");return u(),b("div",Z,[r(s),r(k,{name:"sidebar",mode:"out-in",appear:""},{default:c(()=>[r(n,{items:l})]),_:1}),r(i,null,{default:c(({Component:R})=>[r(k,{name:"modal",mode:"out-in",appear:""},{default:c(()=>[(u(),D(G(R)))]),_:2},1024)]),_:1})])}}}),ue=B(ee,[["__file","/home/runner/work/peer-assessment/peer-assessment/src/views/EmployeeResult.vue"]]);export{ue as default};
