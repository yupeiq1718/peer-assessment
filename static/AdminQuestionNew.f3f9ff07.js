import{_ as v,a as N}from"./BaseFormSelect.6d784795.js";import{_ as b}from"./BaseFormInput.55ccc51d.js";import{_ as A}from"./BaseFormTextarea.ca28a24a.js";import{_ as w,d as R,a as k,z as Q,i as f,u as $,k as u,g as H,h as t,l as a,e as T,f as r,j as g}from"./index.44dce1a8.js";import{u as D}from"./vee-validate.esm.187d56c8.js";import{q as S}from"./data.d5f5edba.js";import{u as B}from"./questions.d116ec7d.js";import{b as V,c as i,a as E,e as j}from"./array.703b9a70.js";import"./BaseMessage.09001526.js";import"./BaseSelect.4b38c029.js";import"./BaseInput.6cdc0027.js";import"./BaseTextarea.de2bc773.js";import"./api.4218be54.js";const z={class:"m-2 p-8 grid grid-cols-1 lg:grid-cols-2 2xl:grid-cols-3 gap-4 bg-white rounded-2xl duration-500"},L=R({__name:"AdminQuestionNew",setup(M){const F=k(),o=Q(()=>Number(F.params.roleId)),C=V({content:i().required("\u6B64\u6B04\u4F4D\u5FC5\u586B"),tag:i().required("\u6B64\u6B04\u4F4D\u5FC5\u586B"),textHint:i(),typeId:E(),isRequired:j()}),{setFieldValue:s,values:n,handleSubmit:x}=D({validationSchema:C});s("content",""),s("tag",""),s("textHint",""),s("typeId",1),s("isRequired",!1);const c=f("setToastData",()=>null),p=f("setIsLoading",()=>null),y=x(async e=>{try{p(!0);const m=await B().createQuestion({roleId:o.value,question:{content:e.content,tag:e.tag,textHint:e.textHint,typeId:Number(e.typeId),isRequired:String(e.isRequired)==="true"}});c({isActive:!0,variant:"success",message:"\u65B0\u589E\u6210\u529F"}),B().readQuestionnaire(o.value),l.push(`/admin/question/${o.value}`)}catch({response:m}){c({isActive:!0,variant:"error",message:"\u65B0\u589E\u5931\u6557"})}finally{p(!1)}}),l=$(),I=()=>l.push(`/admin/question/${o.value}`);return(e,m)=>{const d=N,_=A,h=b,q=v;return a(),u(q,{size:"full",onConfirm:t(y),onCancel:I},{default:H(()=>[T("article",z,[r(d,{class:"col-span-1 p-0",name:"typeId",options:t(S),title:"\u8ACB\u9078\u64C7\u554F\u7B54\u985E\u578B"},null,8,["options"]),r(_,{name:"content",class:"col-span-1 lg:col-span-2 2xl:col-span-3",title:"\u8ACB\u8F38\u5165\u554F\u984C\u6558\u8FF0"}),r(h,{name:"tag",type:"text",class:"col-span-1 p-0",title:"\u8ACB\u8F38\u5165\u6A19\u7C64"}),Number(t(n).typeId)===2||Number(t(n).typeId)===3?(a(),u(_,{key:0,name:"textHint",class:"col-span-1 lg:col-span-2 2xl:col-span-3",title:"\u8ACB\u8F38\u5165\u6587\u5B57\u554F\u984C\u6558\u8FF0"})):g("v-if",!0),Number(t(n).typeId)===2||Number(t(n).typeId)===3?(a(),u(d,{key:1,class:"col-span-1 p-0",name:"isRequired",options:[{text:"\u9078\u586B",value:!1},{text:"\u5FC5\u586B",value:!0}],title:"\u662F\u5426\u5FC5\u586B"})):g("v-if",!0)])]),_:1},8,["onConfirm"])}}}),oe=w(L,[["__file","/home/runner/work/peer-assessment/peer-assessment/src/views/AdminQuestionNew.vue"]]);export{oe as default};
