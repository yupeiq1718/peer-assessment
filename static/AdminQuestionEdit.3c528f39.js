import{_ as S}from"./TheModal.45341db4.js";import{_ as $}from"./BaseFormInput.07c6fa7e.js";import{_ as w}from"./BaseFormTextarea.4c729b54.js";import{_ as H}from"./BaseFormSelect.25e958e1.js";import{_ as T,d as E,A as i,a as V,i as I,u as j,B as L,k as l,g as M,h as u,o as c,e as b,f as m,j as h}from"./index.d57fffa1.js";import{u as z}from"./vee-validate.esm.1588715a.js";import{q as G}from"./data.ff9c2fa5.js";import{u as p}from"./questions.724e4fff.js";import{a as J,c as d,e as K}from"./array.50563ff0.js";import{u as O}from"./system.6f76f2b4.js";import"./BaseMessage.3bc53715.js";import"./BaseInput.921d125e.js";import"./BaseTextarea.b2c4090c.js";import"./BaseSelect.53ec5fc6.js";import"./api.749027f8.js";const P={class:"m-2 p-8 grid grid-cols-1 lg:grid-cols-2 2xl:grid-cols-3 gap-4 bg-white rounded-2xl duration-500"},U=b("hr",{class:"border-1 border-theme my-4 col-span-1 lg:col-span-2 2xl:col-span-3"},null,-1),W=E({__name:"AdminQuestionEdit",setup(X){var f,F,g,y,C;const A=i(()=>O().systemStatus),a=V(),e=i(()=>Number(a.params.roleId)),s=i(()=>p().question({roleId:e.value,id:Number(a.params.id)})),{setFieldValue:o,values:n,handleSubmit:N}=z();o("content",((f=s.value)==null?void 0:f.content)||""),o("tag",((F=s.value)==null?void 0:F.tag)||""),o("textHint",((g=s.value)==null?void 0:g.textHint)||""),o("typeId",((y=s.value)==null?void 0:y.typeId)||1),o("isRequired",((C=s.value)==null?void 0:C.isRequired)||!1);const _=I("setToastData",()=>null),B=I("setIsLoading",()=>null),R=N(async t=>{try{B(!0);const v=await p().updateQuestion({roleId:e.value,id:Number(a.params.id),question:{content:t.content,tag:t.tag,textHint:t.textHint,typeId:Number(t.typeId),isRequired:String(t.isRequired)==="true"}});_({isActive:!0,variant:"success",message:"\u66F4\u65B0\u6210\u529F"}),p().readQuestionnaire(e.value),r.push(`/admin/question/${e.value}`)}catch({response:v}){_({isActive:!0,variant:"error",message:"\u66F4\u65B0\u5931\u6557"})}finally{B(!1)}}),r=j(),k=()=>r.push(`/admin/question/${e.value}`);return L(()=>{A.value!==0&&r.push(`/admin/question/${e.value}`)}),(t,v)=>{const x=H,q=w,D=$,Q=S;return c(),l(Q,{size:"full",onConfirm:u(R),onCancel:k},{default:M(()=>[b("article",P,[m(x,{class:"col-span-1 p-0",name:"typeId",options:u(G),title:"\u8ACB\u9078\u64C7\u554F\u7B54\u985E\u578B",rule:J().required("\u6B64\u6B04\u4F4D\u5FC5\u586B")},null,8,["options","rule"]),U,m(q,{name:"content",class:"col-span-1 lg:col-span-2 2xl:col-span-3",title:"\u8ACB\u8F38\u5165\u554F\u984C\u6558\u8FF0",rule:d().required("\u6B64\u6B04\u4F4D\u5FC5\u586B")},null,8,["rule"]),m(D,{name:"tag",type:"text",class:"col-span-1 p-0",title:"\u8ACB\u8F38\u5165\u6A19\u7C64",rule:d().required("\u6B64\u6B04\u4F4D\u5FC5\u586B")},null,8,["rule"]),Number(u(n).typeId)===2||Number(u(n).typeId)===3?(c(),l(q,{key:0,name:"textHint",class:"col-span-1 lg:col-span-2 2xl:col-span-3",title:"\u8ACB\u8F38\u5165\u6587\u5B57\u554F\u984C\u6558\u8FF0",rule:d().required("\u6B64\u6B04\u4F4D\u5FC5\u586B")},null,8,["rule"])):h("v-if",!0),Number(u(n).typeId)===2||Number(u(n).typeId)===3?(c(),l(x,{key:1,class:"col-span-1 p-0",name:"isRequired",options:[{text:"\u9078\u586B",value:!1},{text:"\u5FC5\u586B",value:!0}],title:"\u662F\u5426\u5FC5\u586B",role:K()},null,8,["role"])):h("v-if",!0)])]),_:1},8,["onConfirm"])}}}),de=T(W,[["__file","/home/runner/work/peer-assessment/peer-assessment/src/views/AdminQuestionEdit.vue"]]);export{de as default};
