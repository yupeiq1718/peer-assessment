import{_ as N}from"./TheSideBar.b04e10ff.js";import{_ as S}from"./BaseTable.4504afcc.js";import{_ as b,d as E,m as _,i as C,x as L,o as u,c as I,b as n,w as a,a as p,t as B,j as V,F as Q,v as U,f as T,u as d,k as j,y as R,q as z,T as x,e as G,s as H}from"./index.82aa29db.js";import{_ as J}from"./BaseScore.f12b3f8d.js";import{_ as K}from"./BaseTag.cfb2bf7b.js";import{_ as O}from"./user.ef8b3aab.js";import{u as c}from"./answers.c2eb1af4.js";import{u as D}from"./questions.0bde0038.js";import{u as F}from"./users.586efed2.js";import"./api.ea9e52da.js";const P={class:"mx-5 my-2"},W=p("img",{class:"inline-block rounded-full w-16 max-w-none h-16 mr-4",src:O,alt:"user"},null,-1),X=E({__name:"EmployeeLeaderMain",setup($){const f=[{name:"\u59D3\u540D",key:"name"},{name:"\u90E8\u9580",key:"department",width:"20%"},{name:"\u8A55\u5206",key:"scores",width:"60%"},{name:"\u529F\u80FD",key:"function"}],w=_(()=>{var e;return(e=c().answersInformation(2))==null?void 0:e.map(s=>({name:s.reviewee.name,department:s.reviewee.department,scores:s.answers.filter(r=>r.score).map(r=>r.score),function:s.id}))}),m=C("setToastData",()=>null),i=C("setIsLoading",()=>null),h=async e=>{try{i(!0);const s=await c().deleteAnswersInformation(e);m({isActive:!0,variant:"success",message:"\u522A\u9664\u6210\u529F"}),c().readAnswersInformation({userId:1,qId:2})}catch{m({isActive:!0,variant:"error",message:"\u522A\u9664\u5931\u6557"})}finally{i(!1)}},v=L(),y=e=>v.push(`/employee/leader/edit/${e}`),A=C("setConfirmData",()=>null),t=e=>{A({isActive:!0,confirm:()=>h(e),text:"\u8ACB\u78BA\u8A8D\u662F\u5426\u522A\u9664\u8A72\u7B46\u8CC7\u6599\uFF1F"})};return(e,s)=>{const r=K,g=J,l=j,q=S;return u(),I("div",P,[n(q,{fields:f,items:d(w)},{name:a(o=>[p("div",null,[W,p("span",null,B(o.data),1)])]),department:a(o=>[n(r,{variant:"theme"},{default:a(()=>[V(B(o.data),1)]),_:2},1024)]),scores:a(o=>[(u(!0),I(Q,null,U(o.data,(k,M)=>(u(),T(g,{key:M,variant:"theme",score:k},null,8,["score"]))),128))]),function:a(o=>[p("div",null,[n(l,{role:"button",class:"w-6 h-6 m-2 fill-muted hover:fill-theme",name:"edit",onClick:k=>y(o.data)},null,8,["onClick"]),n(l,{role:"button",class:"w-6 h-6 m-2 fill-muted hover:fill-theme",name:"delete",onClick:k=>t(o.data)},null,8,["onClick"])])]),_:1},8,["items"])])}}}),Y=b(X,[["__file","/home/runner/work/peer-assessment/peer-assessment/src/components/EmployeeLeaderMain.vue"]]),Z={key:0,class:"absolute w-full h-full"},ee=E({__name:"EmployeeLeader",setup($){const f=L(),w=[{name:"create",icon:"plus",function:()=>f.push("/employee/leader/new")}],m=_(()=>D().questionnaire(2)),i=async t=>{try{const e=await D().readQuestionnaire(t)}catch{}},h=_(()=>c().answersInformation(2)),v=async({userId:t,qId:e})=>{try{const s=await c().readAnswersInformation({userId:t,qId:e})}catch{}},y=async()=>{try{const t=await F().readUsers()}catch{}},A=_(()=>F().users);return R(()=>{i(2),v({userId:1,qId:2}),y()}),(t,e)=>{const s=Y,r=N,g=z("router-view");return d(m)&&d(h)&&d(A)?(u(),I("div",Z,[n(s),n(x,{name:"sidebar",mode:"out-in",appear:""},{default:a(()=>[n(r,{items:w})]),_:1}),n(g,null,{default:a(({Component:l})=>[n(x,{name:"modal",mode:"out-in",appear:""},{default:a(()=>[(u(),T(H(l)))]),_:2},1024)]),_:1})])):G("v-if",!0)}}}),le=b(ee,[["__file","/home/runner/work/peer-assessment/peer-assessment/src/views/EmployeeLeader.vue"]]);export{le as default};
