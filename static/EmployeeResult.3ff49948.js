import{_ as V,a as L}from"./TheSideBar.d95b1161.js";import{_ as j}from"./BaseTable.8a5fd54a.js";import{_ as q}from"./BaseScore.e7909276.js";import{_ as O}from"./BaseTag.89a34d38.js";import{_ as F,d as T,A as g,o as f,k as C,g as c,e as i,t as y,f as r,h as u,c as k,F as $,D as P,u as z,r as G,P as H,i as J,w as K,B as Q,b as U,l as W,T as R,C as X,q as Y}from"./index.8e734258.js";import{u as d}from"./history.0fcab23f.js";import{g as B,d as Z,r as ee}from"./data.ff9c2fa5.js";import{u as te}from"./account.ad01628e.js";import"./api.5131a906.js";const ae={class:"flex justify-start items-center"},se=["src"],oe={class:"text-sm 2xl:text-base"},ne={class:"text-sm 2xl:text-base"},re=T({__name:"EmployeeResultMain",setup(A){const v=[{name:"\u59D3\u540D",key:"profile"},{name:"\u90E8\u9580",key:"department",width:"15%"},{name:"\u8A55\u5206",key:"scores",width:"60%"}],m=g(()=>d().historyScore),h=g(()=>{var e;return(e=m.value)==null?void 0:e.map(s=>({profile:{name:s.name,picture:s.picture},department:s.department,function:s.id,scores:s.scores}))}),x=e=>Z.findIndex(s=>e===s.value);return(e,s)=>{const b=O,l=q,w=V,I=j;return f(),C(I,{fields:v,items:u(h)},{profile:c(n=>[i("div",ae,[i("img",{class:"inline-block rounded-full w-14 2xl:w-16 max-w-none h-14 2xl:h-16 bg-light mx-3 2xl:mx-4",src:n.data.picture||"/user.png",alt:"user"},null,8,se),i("span",oe,y(n.data.name),1)])]),department:c(n=>[r(b,{variant:u(B)(x(n.data))},{default:c(()=>[i("span",ne,y(n.data),1)]),_:2},1032,["variant"])]),scores:c(n=>[(f(!0),k($,null,P(n.data,(t,a)=>(f(),k("div",{key:a,class:"relative group inline-block"},[r(l,{variant:u(B)(a),class:"w-16 2xl:w-18 h-16 2xl:h-18",score:t.average},null,8,["variant","score"]),r(w,{class:"absolute whitespace-nowrap left-1/2 bottom-18 2xl:bottom-20 -translate-x-1/2 opacity-0 group-hover:block lg:group-hover:opacity-100",variant:u(B)(a),text:t.tag},null,8,["variant","text"])]))),128))]),_:1},8,["items"])}}}),le=F(re,[["__file","/home/runner/work/peer-assessment/peer-assessment/src/components/EmployeeResultMain.vue"]]),ue={class:"absolute font-bold text-muted text-sm h-4 mb-2"},ce={class:"absolute w-full h-full pt-6 px-4"},ie=T({__name:"EmployeeResult",setup(A){const v=g(()=>d().histories),m=g(()=>te().accountId),h=ee.slice(0,2),x=z(),e=G(),s=t=>{e.value=t};H("historyFilterData",e),H("setHistoryFilterData",s);const b=[{name:"\u4E0B\u8F09",icon:"download",function:()=>{var t,a,o;return n({year:((t=e.value)==null?void 0:t.year)||NaN,filename:((a=e.value)==null?void 0:a.filename)||"",roleId:((o=e.value)==null?void 0:o.roleId)||NaN,managerId:m.value})}},{name:"\u7BE9\u9078",icon:"filter",function:()=>x.push("/employee/result/filter")}],l=J("setIsLoading",()=>null),w=async()=>{try{l(!0);const t=await d().readHistory()}catch{}finally{l(!1)}},I=async({year:t,filename:a,roleId:o,managerId:p})=>{try{l(!0);const _=await d().readHistoryScore({year:Number(t),filename:a,roleId:Number(o),managerId:Number(p)})}catch{}finally{l(!1)}},n=async({year:t,filename:a,roleId:o,managerId:p})=>{try{l(!0);const _=await d().readHistoryReport({year:Number(t),filename:a,roleId:Number(o),managerId:Number(p)})}catch{}finally{l(!1)}};return K(()=>e.value,()=>{var t,a,o;((t=e.value)==null?void 0:t.year)&&((a=e.value)==null?void 0:a.filename)&&((o=e.value)==null?void 0:o.roleId)&&m.value&&I({year:e.value.year,filename:e.value.filename,roleId:e.value.roleId,managerId:m.value})}),Q(async()=>{var t,a;await w(),s({year:(t=v.value)==null?void 0:t[0].year,filename:(a=v.value)==null?void 0:a[0].filename[0],roleId:h[0].value})}),(t,a)=>{var N,E,D;const o=Y,p=le,_=L,M=U("router-view");return f(),k($,null,[i("span",ue,[r(o,{name:"result",class:"w-4 h-4 mr-2 fill-muted"}),W(y(u(h)[(((N=u(e))==null?void 0:N.roleId)||1)-1].text)+"\u4E92\u8A55\u7D50\u679C/"+y((E=u(e))==null?void 0:E.year)+"\u5E74/"+y((D=u(e))==null?void 0:D.filename),1)]),i("div",ce,[r(p),r(R,{name:"sidebar",mode:"out-in",appear:""},{default:c(()=>[r(_,{items:b})]),_:1}),r(M,null,{default:c(({Component:S})=>[r(R,{name:"modal",mode:"out-in",appear:""},{default:c(()=>[(f(),C(X(S)))]),_:2},1024)]),_:1})])],64)}}}),xe=F(ie,[["__file","/home/runner/work/peer-assessment/peer-assessment/src/views/EmployeeResult.vue"]]);export{xe as default};
