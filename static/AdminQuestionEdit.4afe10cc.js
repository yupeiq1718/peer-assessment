import{_ as R,a as $}from"./BaseFormSelect.51964154.js";import{_ as k}from"./BaseFormInput.9d55c31e.js";import{_ as T}from"./BaseFormTextarea.6b2bee7f.js";import{_ as D,d as E,S as H,m as y,i as I,x as S,f as n,w as V,u as e,o as i,a as L,b as r,e as b}from"./index.6a2fd45d.js";import{u as j}from"./vee-validate.esm.49ef3a0d.js";import{q as z}from"./data.054ee288.js";import{u as c}from"./questions.266a4d67.js";import{c as M,a as l,b as G,e as J}from"./array.f969a70e.js";import"./BaseMessage.9729fd16.js";import"./BaseSelect.05f87e72.js";import"./BaseInput.6dc0c3b4.js";import"./BaseTextarea.93741518.js";import"./api.fe066752.js";const K={class:"m-2 p-8 grid grid-cols-1 lg:grid-cols-2 2xl:grid-cols-3 gap-4 bg-white rounded-2xl duration-500"},O=E({__name:"AdminQuestionEdit",setup(P){var _,f,B,F,g;const o=H(),t=y(()=>Number(o.params.roleId)),s=y(()=>c().question({roleId:t.value,id:Number(o.params.id)})),q=M({content:l().required("\u6B64\u6B04\u4F4D\u5FC5\u586B"),tag:l().required("\u6B64\u6B04\u4F4D\u5FC5\u586B"),textHint:l(),typeId:G(),isRequired:J()}),{values:u,handleSubmit:h}=j({initialValues:{typeId:((_=s.value)==null?void 0:_.typeId)||1,content:((f=s.value)==null?void 0:f.content)||"",tag:((B=s.value)==null?void 0:B.tag)||"",textHint:((F=s.value)==null?void 0:F.textHint)||"",isRequired:((g=s.value)==null?void 0:g.isRequired)||!1},validationSchema:q}),m=I("setToastData",()=>null),p=I("setIsLoading",()=>null),N=h(async a=>{try{p(!0);const v=await c().updateQuestion({roleId:t.value,id:Number(o.params.id),question:{...a,typeId:Number(a.typeId)}});m({isActive:!0,variant:"success",message:"\u66F4\u65B0\u6210\u529F"}),c().readQuestionnaire(t.value),d.push(`/admin/question/${t.value}`)}catch({response:v}){m({isActive:!0,variant:"error",message:"\u66F4\u65B0\u5931\u6557"})}finally{p(!1)}}),d=S(),A=()=>d.push(`/admin/question/${t.value}`);return(a,v)=>{const C=$,x=T,w=k,Q=R;return i(),n(Q,{size:"full",onConfirm:e(N),onCancel:A},{default:V(()=>[L("article",K,[r(C,{class:"col-span-1 p-0",name:"typeId",options:e(z),title:"\u8ACB\u9078\u64C7\u554F\u7B54\u985E\u578B"},null,8,["options"]),r(x,{name:"content",class:"col-span-1 lg:col-span-2 2xl:col-span-3",title:"\u8ACB\u8F38\u5165\u554F\u984C\u6558\u8FF0"}),r(w,{name:"tag",type:"text",class:"col-span-1 p-0",title:"\u8ACB\u8F38\u5165\u6A19\u7C64"}),Number(e(u).typeId)===2||Number(e(u).typeId)===3?(i(),n(x,{key:0,name:"textHint",class:"col-span-1 lg:col-span-2 2xl:col-span-3",title:"\u8ACB\u8F38\u5165\u6587\u5B57\u554F\u984C\u6558\u8FF0"})):b("v-if",!0),Number(e(u).typeId)===2||Number(e(u).typeId)===3?(i(),n(C,{key:1,class:"col-span-1 p-0",name:"isRequired",options:[{text:"\u9078\u586B",value:!1},{text:"\u5FC5\u586B",value:!0}],title:"\u662F\u5426\u5FC5\u586B"})):b("v-if",!0)])]),_:1},8,["onConfirm"])}}}),re=D(O,[["__file","/home/runner/work/peer-assessment/peer-assessment/src/views/AdminQuestionEdit.vue"]]);export{re as default};
