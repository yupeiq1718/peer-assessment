import{_ as Q}from"./TheSideBar.a107e4ac.js";import{_ as R}from"./BaseTable.bedbbe5b.js";import{_ as T,d as $,z as p,i as C,u as q,l as o,k as _,g as n,e as d,t as D,f as u,q as z,h as c,c as V,C as U,F as G,s as H,A as J,b as K,T as F,j as B,B as O}from"./index.4b8d1758.js";import{_ as P}from"./BaseScore.749670d4.js";import{_ as W}from"./BaseTag.82847c5f.js";import{u as v}from"./answers.6970f9c3.js";import{u as M}from"./account.62ed50dd.js";import{g as S,d as X}from"./data.6ab9a877.js";import{u as E}from"./questions.1352beee.js";import{u as Y}from"./users.377c6998.js";import"./api.1ec95094.js";const Z={class:"flex justify-start items-center"},ee=["src"],te=$({__name:"EmployeeStaffMain",setup(N){const h=p(()=>M().accountId),w=[{name:"\u59D3\u540D",key:"profile"},{name:"\u90E8\u9580",key:"department",width:"20%"},{name:"\u8A55\u5206",key:"scores",width:"60%"},{name:"\u529F\u80FD",key:"function"}],y=p(()=>{var e;return(e=v().answersInformation(1))==null?void 0:e.map(t=>({profile:{name:t.reviewee.name,picture:t.reviewee.picture},department:t.reviewee.department,scores:t.answers.filter(l=>l.score).map(l=>l.score),function:t.id}))}),g=e=>X.findIndex(t=>e===t.value),i=C("setToastData",()=>null),f=C("setIsLoading",()=>null),A=async e=>{try{f(!0);const t=await v().deleteAnswersInformation(e);i({isActive:!0,variant:"success",message:"\u522A\u9664\u6210\u529F"}),v().readAnswersInformation({userId:h.value,qId:1})}catch{i({isActive:!0,variant:"error",message:"\u522A\u9664\u5931\u6557"})}finally{f(!1)}},a=q(),r=e=>a.push(`/employee/staff/edit/${e}`),m=C("setConfirmData",()=>null),k=e=>{m({isActive:!0,confirm:()=>A(e),text:"\u8ACB\u78BA\u8A8D\u662F\u5426\u522A\u9664\u8A72\u7B46\u8CC7\u6599\uFF1F"})};return(e,t)=>{const l=W,j=P,x=H,L=R;return o(),_(L,{fields:w,items:c(y)},{profile:n(s=>[d("div",Z,[d("img",{class:"inline-block rounded-full w-16 max-w-none h-16 bg-light mr-4",src:s.data.picture||"/user.png",alt:"user"},null,8,ee),d("span",null,D(s.data.name),1)])]),department:n(s=>[u(l,{variant:c(S)(g(s.data))},{default:n(()=>[z(D(s.data),1)]),_:2},1032,["variant"])]),scores:n(s=>[(o(!0),V(G,null,U(s.data,(I,b)=>(o(),_(j,{key:b,variant:c(S)(b),class:"w-[4.5rem] h-[4.5rem]",score:I},null,8,["variant","score"]))),128))]),function:n(s=>[d("div",null,[u(x,{role:"button",class:"w-6 h-6 m-2 fill-muted hover:fill-theme",name:"edit",onClick:I=>r(s.data)},null,8,["onClick"]),u(x,{role:"button",class:"w-6 h-6 m-2 fill-muted hover:fill-theme",name:"delete",onClick:I=>k(s.data)},null,8,["onClick"])])]),_:1},8,["items"])}}}),se=T(te,[["__file","/home/runner/work/peer-assessment/peer-assessment/src/components/EmployeeStaffMain.vue"]]),ne={key:0,class:"absolute w-full h-full pt-6 px-4"},oe=$({__name:"EmployeeStaff",setup(N){const h=p(()=>M().accountId),w=q(),y=[{name:"create",icon:"plus",function:()=>w.push("/employee/staff/new")}],g=async a=>{try{const r=await E().readQuestionnaire(a)}catch{}},i=p(()=>E().questionnaire(1)),f=async({userId:a,qId:r})=>{try{const m=await v().readAnswersInformation({userId:a,qId:r})}catch{}},A=p(()=>Y().users);return J(()=>{g(1),f({userId:h.value,qId:1})}),(a,r)=>{const m=se,k=Q,e=K("router-view");return c(A)?(o(),V("div",ne,[u(m),u(F,{name:"sidebar",mode:"out-in",appear:""},{default:n(()=>[c(i)?(o(),_(k,{key:0,items:y})):B("v-if",!0)]),_:1}),c(i)?(o(),_(e,{key:0},{default:n(({Component:t})=>[u(F,{name:"modal",mode:"out-in",appear:""},{default:n(()=>[(o(),_(O(t)))]),_:2},1024)]),_:1})):B("v-if",!0)])):B("v-if",!0)}}}),ve=T(oe,[["__file","/home/runner/work/peer-assessment/peer-assessment/src/views/EmployeeStaff.vue"]]);export{ve as default};
