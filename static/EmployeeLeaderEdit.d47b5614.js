import{_ as q,a as D}from"./BaseFormSelect.6e24feba.js";import{_ as T}from"./EmployeeAnswer.2122be8f.js";import{_ as V,d as z,z as t,a as R,i as h,u as S,k as y,g as U,h as o,l as i,e as r,f as I,c as j,C as M,F as O}from"./index.4b8d1758.js";import{u as Q}from"./questions.1352beee.js";import{u as l}from"./answers.6970f9c3.js";import{u as $}from"./users.377c6998.js";import{u as G}from"./vee-validate.esm.bee792e3.js";import{d as H}from"./data.6ab9a877.js";import{u as J}from"./account.62ed50dd.js";import"./BaseMessage.013d6552.js";import"./BaseSelect.6bd4d44b.js";import"./BaseFormTextarea.7f4c804c.js";import"./BaseTextarea.8a439a5e.js";import"./BaseFormScore.445b343d.js";import"./BaseScore.749670d4.js";import"./BaseTag.82847c5f.js";import"./array.6df825b5.js";import"./api.1ec95094.js";const K={class:"mx-5 mt-5 mb-2"},P={class:"grid grid-cols-1 lg:grid-cols-2 2xl:grid-cols-3 gap-4"},W=r("hr",{class:"border-1 border-theme my-4 w-full"},null,-1),X={class:"grid grid-cols-1 lg:grid-cols-2 2xl:grid-cols-3 gap-4"},Y=z({__name:"EmployeeLeaderEdit",setup(Z){var _,f,w;const u=t(()=>J().accountId),c=R(),b=t(()=>Q().questions(2)),a=t(()=>l().answerInformation({qId:2,id:Number(c.params.id)})),{values:x,handleSubmit:C,setFieldValue:n}=G();n("department",(_=a.value)==null?void 0:_.reviewee.department),n("reviewee",(f=a.value)==null?void 0:f.reviewee.id),n("answers",((w=a.value)==null?void 0:w.answers)||[]);const F=t(()=>{var e;return(e=$().activeUsers)==null?void 0:e.filter(s=>s.department===x.department&&s.roles.includes(2))}),E=t(()=>{var e;return(e=F.value)==null?void 0:e.map(s=>({text:s.name,value:s.id}))}),m=h("setToastData",()=>null),d=h("setIsLoading",()=>null),A=C(async e=>{try{d(!0);const s=await l().updateAnswers({id:Number(c.params.id),reviewer:u.value,qId:2,reviewee:Number(e.reviewee),answers:e.answers});m({isActive:!0,variant:"success",message:"\u66F4\u65B0\u6210\u529F"}),l().readAnswersInformation({userId:u.value,qId:2}),p.push("/employee/leader")}catch({response:s}){m({isActive:!0,variant:"error",message:"\u66F4\u65B0\u5931\u6557"})}finally{d(!1)}}),p=S(),B=()=>p.push("/employee/leader");return(e,s)=>{const g=D,k=T,L=q;return i(),y(L,{size:"full",onConfirm:o(A),onCancel:B},{default:U(()=>[r("article",K,[r("header",P,[I(g,{name:"department",options:o(H),class:"col-span-1",title:"\u5408\u4F5C\u90E8\u9580",disabled:""},null,8,["options"]),I(g,{name:"reviewee",options:o(E),class:"col-span-1",title:"\u5408\u4F5C\u5C0D\u8C61",disabled:""},null,8,["options"])]),W,r("article",X,[(i(!0),j(O,null,M(o(b),(v,N)=>(i(),y(k,{id:v.id,key:v.id,index:N,"role-id":2,class:"col-span-1 lg:col-span-2 2xl:col-span-3"},null,8,["id","index"]))),128))])])]),_:1},8,["onConfirm"])}}}),ve=V(Y,[["__file","/home/runner/work/peer-assessment/peer-assessment/src/views/EmployeeLeaderEdit.vue"]]);export{ve as default};
