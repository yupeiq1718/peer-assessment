import{_ as h,a as N}from"./BaseFormSelect.444052c1.js";import{c as b,a as o,d as q,e as A,_ as w}from"./array.f16ea848.js";import{u as _,_ as Q}from"./questions.4ed33f6c.js";import{_ as $,d as k,S as R,m as T,i as B,x as D,f as n,w as S,u as e,o as a,a as V,b as r,e as f}from"./index.bfd7bb5a.js";import{a as E}from"./vee-validate.esm.18170894.js";import{q as H}from"./data.ea6db125.js";import"./BaseMessage.9ad08472.js";import"./BaseSelect.30123327.js";import"./BaseInput.a3e76a86.js";import"./BaseTextarea.c1729713.js";import"./api.9b010a04.js";const L={class:"m-2 p-8 grid grid-cols-1 lg:grid-cols-2 2xl:grid-cols-3 gap-4 bg-white rounded-2xl duration-500"},j=k({__name:"AdminQuestionNew",setup(z){const F=R(),t=T(()=>Number(F.params.roleId)),g=b({content:o().required("\u6B64\u6B04\u4F4D\u5FC5\u586B"),tag:o().required("\u6B64\u6B04\u4F4D\u5FC5\u586B"),textHint:o(),typeId:q(),isRequired:A()}),{values:s,handleSubmit:C}=E({initialValues:{typeId:1,content:"",tag:"",textHint:"",isRequired:!1},validationSchema:g}),i=B("setToastData",()=>null),c=B("setIsLoading",()=>null),x=C(async u=>{try{c(!0);const p=await _().createQuestion({roleId:t.value,question:{...u,typeId:Number(u.typeId)}});i({isActive:!0,variant:"success",message:"\u65B0\u589E\u6210\u529F"}),_().readQuestionnaire(t.value),l.push(`/admin/question/${t.value}`)}catch({response:p}){i({isActive:!0,variant:"error",message:"\u65B0\u589E\u5931\u6557"})}finally{c(!1)}}),l=D(),y=()=>l.push(`/admin/question/${t.value}`);return(u,p)=>{const m=N,d=Q,v=w,I=h;return a(),n(I,{size:"full",onConfirm:e(x),onCancel:y},{default:S(()=>[V("article",L,[r(m,{class:"col-span-1 p-0",name:"typeId",options:e(H),title:"\u8ACB\u9078\u64C7\u554F\u7B54\u985E\u578B"},null,8,["options"]),r(d,{name:"content",class:"col-span-1 lg:col-span-2 2xl:col-span-3",title:"\u8ACB\u8F38\u5165\u554F\u984C\u6558\u8FF0"}),r(v,{name:"tag",type:"text",class:"col-span-1 p-0",title:"\u8ACB\u8F38\u5165\u6A19\u7C64"}),Number(e(s).typeId)===2||Number(e(s).typeId)===3?(a(),n(d,{key:0,name:"textHint",class:"col-span-1 lg:col-span-2 2xl:col-span-3",title:"\u8ACB\u8F38\u5165\u6587\u5B57\u554F\u984C\u6558\u8FF0"})):f("v-if",!0),Number(e(s).typeId)===2||Number(e(s).typeId)===3?(a(),n(m,{key:1,class:"col-span-1 p-0",name:"isRequired",options:[{text:"\u9078\u586B",value:!1},{text:"\u5FC5\u586B",value:!0}],title:"\u662F\u5426\u5FC5\u586B"})):f("v-if",!0)])]),_:1},8,["onConfirm"])}}}),ee=$(j,[["__file","/home/runner/work/peer-assessment/peer-assessment/src/views/AdminQuestionNew.vue"]]);export{ee as default};
