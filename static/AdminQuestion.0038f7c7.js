import{_ as J}from"./TheSideBar.6e6fd19a.js";import{_ as N,d as T,S as D,m as u,i as k,x as H,o as c,c as x,a as m,b as a,w,j as q,t as B,u as t,f as y,e as C,k as z,F as K,v as O,A as P,y as W,q as X,T as L,s as Y}from"./index.6a2fd45d.js";import{_ as Z}from"./BaseFormTextarea.6b2bee7f.js";import{_ as ee}from"./BaseFormScore.5d0e8802.js";import{_ as te}from"./BaseTag.d1833c38.js";import{u as p}from"./questions.266a4d67.js";import{g as R,r as se}from"./data.054ee288.js";import{u as U}from"./users.201bf10d.js";import"./BaseMessage.9729fd16.js";import"./BaseTextarea.93741518.js";import"./vee-validate.esm.49ef3a0d.js";import"./BaseScore.ac43b40f.js";import"./api.fe066752.js";const ne={class:"p-8 bg-white rounded-2xl flex flex-col mb-4"},oe={class:"flex flex-row justify-end items-center duration-500 overflow-hidden"},re=m("hr",{class:"border-2 border-light grow-[1] mx-3"},null,-1),ae=T({__name:"AdminQuestionAnswer",props:{id:{type:Number,required:!0}},setup(b){const o=b,f=D(),e=u(()=>Number(f.params.roleId)),s=u(()=>p().question({roleId:e.value,id:o.id})),v=k("setToastData",()=>null),d=k("setIsLoading",()=>null),l=async()=>{try{const r=await p().readQuestionnaire(e.value)}catch{}},A=async({roleId:r,id:i})=>{try{d(!0);const h=await p().deleteQuestion({roleId:r,id:i});v({isActive:!0,variant:"success",message:"\u522A\u9664\u6210\u529F"}),l()}catch{v({isActive:!0,variant:"error",message:"\u522A\u9664\u5931\u6557"})}finally{d(!1)}},I=H(),n=()=>{var r;I.push(`/admin/question/${e.value}/edit/${(r=s.value)==null?void 0:r.id}`)},_=k("setConfirmData",()=>null),Q=()=>{_({isActive:!0,confirm:()=>A({roleId:2,id:o.id})})};return(r,i)=>{var S,j,V,M,E;const h=te,$=ee,G=Z,F=z;return c(),x("div",null,[m("article",ne,[m("label",null,[a(h,{variant:t(R)(o.id)},{default:w(()=>{var g;return[q(B((g=t(s))==null?void 0:g.tag),1)]}),_:1},8,["variant"]),q(" "+B((S=t(s))==null?void 0:S.content),1)]),((j=t(s))==null?void 0:j.typeId)===1||((V=t(s))==null?void 0:V.typeId)===2?(c(),y($,{key:0,name:"score",variant:t(R)(o.id),class:"mt-4"},null,8,["variant"])):C("v-if",!0),((M=t(s))==null?void 0:M.typeId)===2||((E=t(s))==null?void 0:E.typeId)===3?(c(),y(G,{key:1,name:"text",placeholder:t(s).textHint,class:"w-full mt-4"},null,8,["placeholder"])):C("v-if",!0)]),m("footer",oe,[re,m("button",{class:"rounded-2xl flex justify-center items-center bg-light hover:bg-theme fill-white w-10 h-10 mr-2 duration-500",onClick:i[0]||(i[0]=g=>n())},[a(F,{name:"edit",class:"w-6 h-6"})]),m("button",{class:"rounded-2xl flex justify-center items-center bg-light hover:bg-theme fill-white w-10 h-10 mr-2 duration-500",onClick:i[1]||(i[1]=g=>Q())},[a(F,{name:"delete",class:"w-6 h-6"})])])])}}}),ie=N(ae,[["__file","/home/runner/work/peer-assessment/peer-assessment/src/components/AdminQuestionAnswer.vue"]]),ue={class:"mx-5 mt-5 mb-2 grid grid-cols-1 lg:grid-cols-2 2xl:grid-cols-3 gap-4"},ce=T({__name:"AdminQuestionMain",setup(b){const o=D(),f=u(()=>Number(o.params.roleId)),e=u(()=>p().questions(f.value));return(s,v)=>{const d=ie;return c(),x("article",ue,[(c(!0),x(K,null,O(t(e),l=>(c(),y(d,{id:l.id,key:l.id,class:"col-span-1 lg:col-span-2 2xl:col-span-3"},null,8,["id"]))),128))])}}}),le=N(ce,[["__file","/home/runner/work/peer-assessment/peer-assessment/src/components/AdminQuestionMain.vue"]]),me={key:0,class:"absolute w-full h-full"},de={class:"font-bold text-dark text-sm"},_e=T({__name:"AdminQuestion",setup(b){const o=H(),f=D(),e=u(()=>Number(f.params.roleId)),s=u(()=>{const n=se.find(_=>_.value===Number(e.value));return`${n==null?void 0:n.text}\u4E92\u8A55\u554F\u5377`}),v=[{name:"create",icon:"plus",function:()=>o.push(`/admin/question/${e.value}/new`)},{name:"filter",icon:"filter",function:()=>o.push(`/admin/question/${e.value}/filter`)}],d=async()=>{try{const n=await U().readUsers()}catch{}},l=async n=>{try{const _=await p().readQuestionnaire(n)}catch{}},A=u(()=>U().users),I=u(()=>p().questionnaire(e.value));return P(e,()=>l(e.value)),W(()=>{d(),l(e.value)}),(n,_)=>{const Q=z,r=le,i=J,h=X("router-view");return t(A)&&t(I)?(c(),x("div",me,[m("span",de,[a(Q,{name:"question",class:"w-4 h-4 mr-2"}),q(B(t(s)),1)]),a(r),a(L,{name:"sidebar",mode:"out-in",appear:""},{default:w(()=>[a(i,{items:v})]),_:1}),a(h,null,{default:w(({Component:$})=>[a(L,{name:"modal",mode:"out-in",appear:""},{default:w(()=>[(c(),y(Y($)))]),_:2},1024)]),_:1})])):C("v-if",!0)}}}),ke=N(_e,[["__file","/home/runner/work/peer-assessment/peer-assessment/src/views/AdminQuestion.vue"]]);export{ke as default};
