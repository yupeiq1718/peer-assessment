import{_ as q}from"./TheSideBar.1c819e92.js";import{_ as L}from"./BaseTable.66260bf3.js";import{_ as S,d as E,z as f,i as I,u as T,l as i,k as C,g as n,e as p,t as b,f as o,q as Q,h as _,c as $,C as R,F as z,s as U,A as G,b as H,T as D,j as J,B as K}from"./index.f9275dc0.js";import{_ as O}from"./BaseScore.a30a3e8e.js";import{_ as P}from"./BaseTag.134167dd.js";import{u as d}from"./answers.32aeb556.js";import{u as V}from"./account.196a2185.js";import{g as F,d as W}from"./data.6ab9a877.js";import{u as X}from"./questions.a40e6ab0.js";import{u as Y}from"./users.718c968e.js";import"./api.29f17cea.js";const Z={class:"flex justify-start items-center"},ee=["src"],te=E({__name:"EmployeeStaffMain",setup(M){const v=f(()=>V().accountId),h=[{name:"\u59D3\u540D",key:"profile"},{name:"\u90E8\u9580",key:"department",width:"20%"},{name:"\u8A55\u5206",key:"scores",width:"60%"},{name:"\u529F\u80FD",key:"function"}],w=f(()=>{var e;return(e=d().answersInformation(1))==null?void 0:e.map(t=>({profile:{name:t.reviewee.name,picture:t.reviewee.picture},department:t.reviewee.department,scores:t.answers.filter(c=>c.score).map(c=>c.score),function:t.id}))}),y=e=>W.findIndex(t=>e===t.value),m=I("setToastData",()=>null),l=I("setIsLoading",()=>null),a=async e=>{try{l(!0);const t=await d().deleteAnswersInformation(e);m({isActive:!0,variant:"success",message:"\u522A\u9664\u6210\u529F"}),d().readAnswersInformation({userId:v.value,qId:1})}catch{m({isActive:!0,variant:"error",message:"\u522A\u9664\u5931\u6557"})}finally{l(!1)}},r=T(),u=e=>r.push(`/employee/staff/edit/${e}`),g=I("setConfirmData",()=>null),A=e=>{g({isActive:!0,confirm:()=>a(e),text:"\u8ACB\u78BA\u8A8D\u662F\u5426\u522A\u9664\u8A72\u7B46\u8CC7\u6599\uFF1F"})};return(e,t)=>{const c=P,N=O,B=U,j=L;return i(),C(j,{fields:h,items:_(w)},{profile:n(s=>[p("div",Z,[p("img",{class:"inline-block rounded-full w-16 max-w-none h-16 bg-light mr-4",src:s.data.picture||"/user.png",alt:"user"},null,8,ee),p("span",null,b(s.data.name),1)])]),department:n(s=>[o(c,{variant:_(F)(y(s.data))},{default:n(()=>[Q(b(s.data),1)]),_:2},1032,["variant"])]),scores:n(s=>[(i(!0),$(z,null,R(s.data,(k,x)=>(i(),C(N,{key:x,variant:_(F)(x),class:"w-[4.5rem] h-[4.5rem]",score:k},null,8,["variant","score"]))),128))]),function:n(s=>[p("div",null,[o(B,{role:"button",class:"w-6 h-6 m-2 fill-muted hover:fill-theme",name:"edit",onClick:k=>u(s.data)},null,8,["onClick"]),o(B,{role:"button",class:"w-6 h-6 m-2 fill-muted hover:fill-theme",name:"delete",onClick:k=>A(s.data)},null,8,["onClick"])])]),_:1},8,["items"])}}}),se=S(te,[["__file","/home/runner/work/peer-assessment/peer-assessment/src/components/EmployeeStaffMain.vue"]]),ne={key:0,class:"absolute w-full h-full pt-6 px-4"},oe=E({__name:"EmployeeStaff",setup(M){const v=f(()=>V().accountId),h=T(),w=[{name:"create",icon:"plus",function:()=>h.push("/employee/staff/new")}],y=async a=>{try{const r=await X().readQuestionnaire(a)}catch{}},m=async({userId:a,qId:r})=>{try{const u=await d().readAnswersInformation({userId:a,qId:r})}catch{}},l=f(()=>Y().users);return G(()=>{y(1),m({userId:v.value,qId:1})}),(a,r)=>{const u=se,g=q,A=H("router-view");return _(l)?(i(),$("div",ne,[o(u),o(D,{name:"sidebar",mode:"out-in",appear:""},{default:n(()=>[o(g,{items:w})]),_:1}),o(A,null,{default:n(({Component:e})=>[o(D,{name:"modal",mode:"out-in",appear:""},{default:n(()=>[(i(),C(K(e)))]),_:2},1024)]),_:1})])):J("v-if",!0)}}}),ve=S(oe,[["__file","/home/runner/work/peer-assessment/peer-assessment/src/views/EmployeeStaff.vue"]]);export{ve as default};
