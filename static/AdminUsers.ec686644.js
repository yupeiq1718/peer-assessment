import{_ as L}from"./TheSideBar.6f337134.js";import{_ as N}from"./BaseTable.4943192e.js";import{_ as b,d as F,z as U,i as w,u as D,l as r,c,f as a,g as t,e as o,t as u,q as B,F as V,C as M,k as T,h as y,j as $,s as S,b as R,T as C,B as q}from"./index.e20371ec.js";import{_ as z}from"./BaseTag.3146ea13.js";import{u as m}from"./users.a1b98be4.js";import{r as G}from"./data.ecc5dcde.js";import"./api.c7e43ded.js";const H={class:"mx-5 my-2"},J={class:"flex justify-start items-center"},K=["src"],O={key:0,class:"flex justify-start items-center"},P=["src"],Q=F({__name:"AdminUsersMain",setup(j){const l=[{name:"\u59D3\u540D",key:"profile"},{name:"\u96FB\u5B50\u4FE1\u7BB1",key:"email",width:"25%"},{name:"\u90E8\u9580",key:"department",width:"10%"},{name:"\u89D2\u8272",key:"role",width:"25%"},{name:"\u4E3B\u7BA1",key:"manager"},{name:"\u529F\u80FD",key:"function"}],_=["success","alert","error","info","muted"],d=U(()=>{var n;return(n=m().filteredUsers)==null?void 0:n.map(s=>({profile:{name:s.name,picture:s.picture},email:s.email,department:s.department,role:s.role,manager:s.manager,function:s.id}))}),p=w("setToastData",()=>null),f=w("setIsLoading",()=>null),h=async n=>{try{f(!0);const s=await m().deleteUser(n);p({isActive:!0,variant:"success",message:"\u522A\u9664\u6210\u529F"}),await m().readUsers()}catch{p({isActive:!0,variant:"error",message:"\u522A\u9664\u5931\u6557"})}finally{f(!1)}},v=w("setConfirmData",()=>null),g=n=>{v({isActive:!0,confirm:()=>h(n),text:"\u8ACB\u78BA\u8A8D\u662F\u5426\u522A\u9664\u8A72\u7B46\u8CC7\u6599\uFF1F"})},k=D(),E=n=>k.push(`/admin/users/edit/${n}`);return(n,s)=>{const A=z,x=S,I=N;return r(),c("div",H,[a(I,{fields:l,items:y(d)},{profile:t(e=>[o("div",J,[o("img",{class:"inline-block rounded-full w-16 max-w-none h-16 bg-light mx-4",src:e.data.picture||"/user.png",alt:"user"},null,8,K),o("span",null,u(e.data.name),1)])]),email:t(e=>[B(u(e.data),1)]),department:t(e=>[a(A,{variant:"theme"},{default:t(()=>[B(u(e.data),1)]),_:2},1024)]),role:t(e=>[(r(!0),c(V,null,M(e.data,i=>(r(),T(A,{key:i,variant:_[i-1],class:"mx-1"},{default:t(()=>[B(u(y(G)[i-1].text),1)]),_:2},1032,["variant"]))),128))]),manager:t(e=>[e.data?(r(),c("div",O,[o("img",{class:"inline-block rounded-full w-16 max-w-none h-16 bg-light mx-4",src:e.data.picture||"/user.png",alt:"user"},null,8,P),o("span",null,u(e.data.name),1)])):$("v-if",!0)]),function:t(e=>[o("div",null,[a(x,{role:"button",class:"w-6 h-6 m-2 fill-muted hover:fill-theme",name:"edit",onClick:i=>E(e.data)},null,8,["onClick"]),a(x,{role:"button",class:"w-6 h-6 m-2 fill-muted hover:fill-theme",name:"delete",onClick:i=>g(e.data)},null,8,["onClick"])])]),_:1},8,["items"])])}}}),W=b(Q,[["__file","/home/runner/work/peer-assessment/peer-assessment/src/components/AdminUsersMain.vue"]]),X={key:0,class:"absolute w-full h-full"},Y=F({__name:"AdminUsers",setup(j){const l=D(),_=[{name:"create",icon:"plus",function:()=>l.push("/admin/users/new")},{name:"filter",icon:"filter",function:()=>l.push("/admin/users/filter")}],d=U(()=>m().users);return(p,f)=>{const h=W,v=L,g=R("router-view");return y(d)?(r(),c("div",X,[a(h),a(C,{name:"sidebar",mode:"out-in",appear:""},{default:t(()=>[a(v,{items:_})]),_:1}),a(g,null,{default:t(({Component:k})=>[a(C,{name:"modal",mode:"out-in",appear:""},{default:t(()=>[(r(),T(q(k)))]),_:2},1024)]),_:1})])):$("v-if",!0)}}}),re=b(Y,[["__file","/home/runner/work/peer-assessment/peer-assessment/src/views/AdminUsers.vue"]]);export{re as default};
