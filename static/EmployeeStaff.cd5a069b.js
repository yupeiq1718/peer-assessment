import{_ as N}from"./TheSideBar.6b5502a3.js";import{_ as V}from"./BaseTable.519f1016.js";import{_ as D,d as E,m as _,i as I,x as T,o as c,c as C,b as n,w as a,a as p,t as B,j as L,F as Q,v as U,f as $,u as f,k as j,y as R,q as z,T as S,e as G,s as H}from"./index.708eb5c6.js";import{_ as J}from"./BaseScore.d2fd7f85.js";import{_ as K}from"./BaseTag.bd826634.js";import{_ as O}from"./user.ef8b3aab.js";import{u as m}from"./answers.52549a6e.js";import{u as b}from"./questions.1acc58b7.js";import{u as x}from"./users.ecad4c1a.js";import"./api.d802ac0b.js";const P={class:"mx-5 my-2"},W=p("img",{class:"inline-block rounded-full w-16 max-w-none h-16 mr-4",src:O,alt:"user"},null,-1),X=E({__name:"EmployeeStaffMain",setup(F){const d=[{name:"\u59D3\u540D",key:"name"},{name:"\u90E8\u9580",key:"department",width:"20%"},{name:"\u8A55\u5206",key:"scores",width:"60%"},{name:"\u529F\u80FD",key:"function"}],w=_(()=>{var e;return(e=m().answersInformation(1))==null?void 0:e.map(s=>({name:s.reviewee.name,department:s.reviewee.department,scores:s.answers.filter(r=>r.score).map(r=>r.score),function:s.id}))}),i=I("setToastData",()=>null),u=I("setIsLoading",()=>null),h=async e=>{try{u(!0);const s=await m().deleteAnswersInformation(e);i({isActive:!0,variant:"success",message:"\u522A\u9664\u6210\u529F"}),m().readAnswersInformation({userId:1,qId:1})}catch{i({isActive:!0,variant:"error",message:"\u522A\u9664\u5931\u6557"})}finally{u(!1)}},v=T(),y=e=>v.push(`/employee/staff/edit/${e}`),g=I("setConfirmData",()=>null),t=e=>{g({isActive:!0,confirm:()=>h(e)})};return(e,s)=>{const r=K,k=J,l=j,q=V;return c(),C("div",P,[n(q,{fields:d,items:f(w)},{name:a(o=>[p("div",null,[W,p("span",null,B(o.data),1)])]),department:a(o=>[n(r,{variant:"theme"},{default:a(()=>[L(B(o.data),1)]),_:2},1024)]),scores:a(o=>[(c(!0),C(Q,null,U(o.data,(A,M)=>(c(),$(k,{key:M,variant:"theme",score:A},null,8,["score"]))),128))]),function:a(o=>[p("div",null,[n(l,{role:"button",class:"w-6 h-6 m-2 fill-muted hover:fill-theme",name:"edit",onClick:A=>y(o.data)},null,8,["onClick"]),n(l,{role:"button",class:"w-6 h-6 m-2 fill-muted hover:fill-theme",name:"delete",onClick:A=>t(o.data)},null,8,["onClick"])])]),_:1},8,["items"])])}}}),Y=D(X,[["__file","/home/runner/work/peer-assessment/peer-assessment/src/components/EmployeeStaffMain.vue"]]),Z={key:0,class:"absolute w-full h-full"},ee=E({__name:"EmployeeStaff",setup(F){const d=T(),w=[{name:"create",icon:"plus",function:()=>d.push("/employee/staff/new")}],i=_(()=>b().questionnaire(1)),u=async t=>{try{const e=await b().readQuestionnaire(t)}catch{}},h=_(()=>m().answersInformation(1)),v=async({userId:t,qId:e})=>{try{const s=await m().readAnswersInformation({userId:t,qId:e})}catch{}},y=async()=>{try{const t=await x().readUsers()}catch{}},g=_(()=>x().users);return R(()=>{u(1),v({userId:1,qId:1}),y()}),(t,e)=>{const s=Y,r=N,k=z("router-view");return f(i)&&f(h)&&f(g)?(c(),C("div",Z,[n(s),n(S,{name:"sidebar",mode:"out-in",appear:""},{default:a(()=>[n(r,{items:w})]),_:1}),n(k,null,{default:a(({Component:l})=>[n(S,{name:"modal",mode:"out-in",appear:""},{default:a(()=>[(c(),$(H(l)))]),_:2},1024)]),_:1})])):G("v-if",!0)}}}),le=D(ee,[["__file","/home/runner/work/peer-assessment/peer-assessment/src/views/EmployeeStaff.vue"]]);export{le as default};
