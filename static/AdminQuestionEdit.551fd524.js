import{_ as S,a as $}from"./BaseFormSelect.da252460.js";import{_ as w}from"./BaseFormInput.46a5fbaa.js";import{_ as H}from"./BaseFormTextarea.b0fb2f3a.js";import{_ as T,d as E,z as i,a as V,i as I,u as j,A as z,k as l,g as L,h as u,l as c,e as b,f as m,j as h}from"./index.50ad54cf.js";import{u as M}from"./vee-validate.esm.3ec8caa1.js";import{q as G}from"./data.ff9c2fa5.js";import{u as p}from"./questions.05981389.js";import{a as J,c as d,e as K}from"./array.1c1006f0.js";import{u as O}from"./system.a9ea42c4.js";import"./BaseMessage.2c91ed7b.js";import"./BaseSelect.8cad5dee.js";import"./BaseInput.7efbea95.js";import"./BaseTextarea.6a826da6.js";import"./api.0fa44fbb.js";const P={class:"m-2 p-8 grid grid-cols-1 lg:grid-cols-2 2xl:grid-cols-3 gap-4 bg-white rounded-2xl duration-500"},U=b("hr",{class:"border-1 border-theme my-4 col-span-1 lg:col-span-2 2xl:col-span-3"},null,-1),W=E({__name:"AdminQuestionEdit",setup(X){var F,f,g,y,C;const A=i(()=>O().systemStatus),a=V(),e=i(()=>Number(a.params.roleId)),s=i(()=>p().question({roleId:e.value,id:Number(a.params.id)})),{setFieldValue:o,values:n,handleSubmit:N}=M();o("content",((F=s.value)==null?void 0:F.content)||""),o("tag",((f=s.value)==null?void 0:f.tag)||""),o("textHint",((g=s.value)==null?void 0:g.textHint)||""),o("typeId",((y=s.value)==null?void 0:y.typeId)||1),o("isRequired",((C=s.value)==null?void 0:C.isRequired)||!1);const _=I("setToastData",()=>null),B=I("setIsLoading",()=>null),R=N(async t=>{try{B(!0);const v=await p().updateQuestion({roleId:e.value,id:Number(a.params.id),question:{content:t.content,tag:t.tag,textHint:t.textHint,typeId:Number(t.typeId),isRequired:String(t.isRequired)==="true"}});_({isActive:!0,variant:"success",message:"\u66F4\u65B0\u6210\u529F"}),p().readQuestionnaire(e.value),r.push(`/admin/question/${e.value}`)}catch({response:v}){_({isActive:!0,variant:"error",message:"\u66F4\u65B0\u5931\u6557"})}finally{B(!1)}}),r=j(),k=()=>r.push(`/admin/question/${e.value}`);return z(()=>{A.value!==0&&r.push(`/admin/question/${e.value}`)}),(t,v)=>{const x=$,q=H,D=w,Q=S;return c(),l(Q,{size:"full",onConfirm:u(R),onCancel:k},{default:L(()=>[b("article",P,[m(x,{class:"col-span-1 p-0",name:"typeId",options:u(G),title:"\u8ACB\u9078\u64C7\u554F\u7B54\u985E\u578B",rule:J().required("\u6B64\u6B04\u4F4D\u5FC5\u586B")},null,8,["options","rule"]),U,m(q,{name:"content",class:"col-span-1 lg:col-span-2 2xl:col-span-3",title:"\u8ACB\u8F38\u5165\u554F\u984C\u6558\u8FF0",rule:d().required("\u6B64\u6B04\u4F4D\u5FC5\u586B")},null,8,["rule"]),m(D,{name:"tag",type:"text",class:"col-span-1 p-0",title:"\u8ACB\u8F38\u5165\u6A19\u7C64",rule:d().required("\u6B64\u6B04\u4F4D\u5FC5\u586B")},null,8,["rule"]),Number(u(n).typeId)===2||Number(u(n).typeId)===3?(c(),l(q,{key:0,name:"textHint",class:"col-span-1 lg:col-span-2 2xl:col-span-3",title:"\u8ACB\u8F38\u5165\u6587\u5B57\u554F\u984C\u6558\u8FF0",rule:d().required("\u6B64\u6B04\u4F4D\u5FC5\u586B")},null,8,["rule"])):h("v-if",!0),Number(u(n).typeId)===2||Number(u(n).typeId)===3?(c(),l(x,{key:1,class:"col-span-1 p-0",name:"isRequired",options:[{text:"\u9078\u586B",value:!1},{text:"\u5FC5\u586B",value:!0}],title:"\u662F\u5426\u5FC5\u586B",role:K()},null,8,["role"])):h("v-if",!0)])]),_:1},8,["onConfirm"])}}}),pe=T(W,[["__file","/home/runner/work/peer-assessment/peer-assessment/src/views/AdminQuestionEdit.vue"]]);export{pe as default};
