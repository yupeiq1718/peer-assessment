import{_ as O}from"./TheSideBar.7310c7f4.js";import{_ as F,d as N,z as n,a as S,i as B,u as z,l as a,c as g,e as _,f as r,g as x,q as C,t as q,h as e,k as b,j as y,s as H,C as P,F as U,w as W,A as X,b as Y,T as L,B as Z}from"./index.57433029.js";import{_ as ee}from"./BaseFormTextarea.d3b7af2a.js";import{_ as te}from"./BaseFormScore.3c940c8a.js";import{_ as se}from"./BaseTag.ac315403.js";import{u as h}from"./questions.f516b068.js";import{g as R,r as ne}from"./data.6ab9a877.js";import{u as G}from"./system.90bac7a6.js";import{u as oe}from"./users.f875ecc3.js";import"./BaseMessage.0165fbbe.js";import"./BaseTextarea.7fec5461.js";import"./vee-validate.esm.704f972e.js";import"./BaseScore.0186a6ca.js";import"./api.66e06c5f.js";const re={class:"p-8 bg-white rounded-2xl flex flex-col mb-4"},ae={key:0,class:"flex flex-row justify-end items-center duration-500 overflow-hidden mb-4"},ue=_("hr",{class:"border-2 border-light grow-[1] mx-3"},null,-1),ie=N({__name:"AdminQuestionAnswer",props:{id:{type:Number,required:!0},index:{type:Number,required:!0}},setup(A){const u=A,m=n(()=>G().systemStatus),f=S(),t=n(()=>Number(f.params.roleId)),s=n(()=>h().question({roleId:t.value,id:u.id})),d=B("setToastData",()=>null),i=B("setIsLoading",()=>null),v=async()=>{try{const o=await h().readQuestionnaire(t.value)}catch{}},c=async({roleId:o,id:l})=>{try{i(!0);const k=await h().deleteQuestion({roleId:o,id:l});d({isActive:!0,variant:"success",message:"\u522A\u9664\u6210\u529F"}),v()}catch{d({isActive:!0,variant:"error",message:"\u522A\u9664\u5931\u6557"})}finally{i(!1)}},p=z(),I=()=>{var o;p.push(`/admin/question/${t.value}/edit/${(o=s.value)==null?void 0:o.id}`)},Q=B("setConfirmData",()=>null),$=()=>{Q({isActive:!0,confirm:()=>c({roleId:2,id:u.id}),text:"\u8ACB\u78BA\u8A8D\u662F\u5426\u522A\u9664\u8A72\u7B46\u8CC7\u6599\uFF1F"})};return(o,l)=>{var D,j,V,M,E;const k=se,J=te,K=ee,T=H;return a(),g("div",null,[_("article",re,[_("label",null,[r(k,{variant:e(R)(u.index)},{default:x(()=>{var w;return[C(q((w=e(s))==null?void 0:w.tag),1)]}),_:1},8,["variant"]),C(" "+q((D=e(s))==null?void 0:D.content),1)]),((j=e(s))==null?void 0:j.typeId)===1||((V=e(s))==null?void 0:V.typeId)===2?(a(),b(J,{key:0,name:"score",variant:e(R)(u.index),class:"mt-4"},null,8,["variant"])):y("v-if",!0),((M=e(s))==null?void 0:M.typeId)===2||((E=e(s))==null?void 0:E.typeId)===3?(a(),b(K,{key:1,name:"text",placeholder:e(s).textHint,class:"w-full mt-4"},null,8,["placeholder"])):y("v-if",!0)]),e(m)===0?(a(),g("footer",ae,[ue,_("button",{class:"rounded-2xl flex justify-center items-center bg-light hover:bg-theme fill-white w-10 h-10 mr-2 duration-500",onClick:l[0]||(l[0]=w=>I())},[r(T,{name:"edit",class:"w-6 h-6"})]),_("button",{class:"rounded-2xl flex justify-center items-center bg-light hover:bg-theme fill-white w-10 h-10 mr-2 duration-500",onClick:l[1]||(l[1]=w=>$())},[r(T,{name:"delete",class:"w-6 h-6"})])])):y("v-if",!0)])}}}),ce=F(ie,[["__file","/home/runner/work/peer-assessment/peer-assessment/src/components/AdminQuestionAnswer.vue"]]),le=N({__name:"AdminQuestionMain",setup(A){const u=S(),m=n(()=>Number(u.params.roleId)),f=n(()=>h().questions(m.value)||[]);return(t,s)=>{const d=ce;return a(!0),g(U,null,P(e(f),(i,v)=>(a(),b(d,{id:i.id,key:i.id,index:v,class:"col-span-1 lg:col-span-2 2xl:col-span-3"},null,8,["id","index"]))),128)}}}),me=F(le,[["__file","/home/runner/work/peer-assessment/peer-assessment/src/components/AdminQuestionMain.vue"]]),de={class:"absolute font-bold text-dark text-sm h-4 mb-2"},pe={key:0,class:"absolute top-8 left-0 w-full h-[calc(100%-2rem)] pt-2 px-4 overflow-auto"},_e=N({__name:"AdminQuestion",setup(A){const u=n(()=>G().systemStatus),m=z(),f=S(),t=n(()=>Number(f.params.roleId)),s=n(()=>{const c=ne.find(p=>p.value===Number(t.value));return`${c==null?void 0:c.text}\u4E92\u8A55\u554F\u5377`}),d=n(()=>u.value===0?[{name:"create",icon:"plus",function:()=>m.push(`/admin/question/${t.value}/new`)},{name:"filter",icon:"filter",function:()=>m.push(`/admin/question/${t.value}/filter`)}]:[{name:"filter",icon:"filter",function:()=>m.push(`/admin/question/${t.value}/filter`)}]),i=async c=>{try{const p=await h().readQuestionnaire(c)}catch{}},v=n(()=>oe().users);return W(t,()=>i(t.value)),X(()=>{i(t.value)}),(c,p)=>{const I=H,Q=me,$=O,o=Y("router-view");return a(),g(U,null,[_("span",de,[r(I,{name:"question",class:"w-4 h-4 mr-2"}),C(q(e(s)),1)]),e(v)?(a(),g("div",pe,[r(Q),r(L,{name:"sidebar",mode:"out-in",appear:""},{default:x(()=>[r($,{items:e(d)},null,8,["items"])]),_:1}),r(o,null,{default:x(({Component:l})=>[r(L,{name:"modal",mode:"out-in",appear:""},{default:x(()=>[(a(),b(Z(l)))]),_:2},1024)]),_:1})])):y("v-if",!0)],64)}}}),Ce=F(_e,[["__file","/home/runner/work/peer-assessment/peer-assessment/src/views/AdminQuestion.vue"]]);export{Ce as default};
