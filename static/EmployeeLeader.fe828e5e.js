import{_ as S}from"./TheSideBar.1daaf0d6.js";import{_ as V}from"./BaseTable.5c50ed8d.js";import{_ as b,d as E,z as c,i as k,u as L,l as i,c as C,f as n,g as o,e as p,t as x,q as j,F as Q,C as R,k as T,h as d,s as z,A as U,b as G,T as D,j as H,B as J}from"./index.fe3aa23c.js";import{_ as K}from"./BaseScore.ee7d2920.js";import{_ as O}from"./BaseTag.31cf6300.js";import{u as m}from"./answers.ff129ad9.js";import{u as $}from"./account.6254ada4.js";import{u as F}from"./questions.4dd51f61.js";import{u as P}from"./users.7cf8a190.js";import"./api.a4fc115a.js";const W={class:"mx-5 my-2"},X={class:"flex justify-start items-center"},Y=["src"],Z=E({__name:"EmployeeLeaderMain",setup(q){const f=c(()=>$().accountId),v=[{name:"\u59D3\u540D",key:"profile"},{name:"\u90E8\u9580",key:"department",width:"20%"},{name:"\u8A55\u5206",key:"scores",width:"60%"},{name:"\u529F\u80FD",key:"function"}],h=c(()=>{var e;return(e=m().answersInformation(2))==null?void 0:e.map(s=>({profile:{name:s.reviewee.name,picture:s.reviewee.picture},department:s.reviewee.department,scores:s.answers.filter(a=>a.score).map(a=>a.score),function:s.id}))}),l=k("setToastData",()=>null),_=k("setIsLoading",()=>null),w=async e=>{try{_(!0);const s=await m().deleteAnswersInformation(e);l({isActive:!0,variant:"success",message:"\u522A\u9664\u6210\u529F"}),m().readAnswersInformation({userId:f.value,qId:2})}catch{l({isActive:!0,variant:"error",message:"\u522A\u9664\u5931\u6557"})}finally{_(!1)}},y=L(),A=e=>y.push(`/employee/leader/edit/${e}`),r=k("setConfirmData",()=>null),u=e=>{r({isActive:!0,confirm:()=>w(e),text:"\u8ACB\u78BA\u8A8D\u662F\u5426\u522A\u9664\u8A72\u7B46\u8CC7\u6599\uFF1F"})};return(e,s)=>{const a=O,g=K,B=z,M=V;return i(),C("div",W,[n(M,{fields:v,items:d(h)},{profile:o(t=>[p("div",X,[p("img",{class:"inline-block rounded-full w-16 max-w-none h-16 mr-4",src:t.data.picture,alt:"user"},null,8,Y),p("span",null,x(t.data.name),1)])]),department:o(t=>[n(a,{variant:"theme"},{default:o(()=>[j(x(t.data),1)]),_:2},1024)]),scores:o(t=>[(i(!0),C(Q,null,R(t.data,(I,N)=>(i(),T(g,{key:N,variant:"theme",score:I},null,8,["score"]))),128))]),function:o(t=>[p("div",null,[n(B,{role:"button",class:"w-6 h-6 m-2 fill-muted hover:fill-theme",name:"edit",onClick:I=>A(t.data)},null,8,["onClick"]),n(B,{role:"button",class:"w-6 h-6 m-2 fill-muted hover:fill-theme",name:"delete",onClick:I=>u(t.data)},null,8,["onClick"])])]),_:1},8,["items"])])}}}),ee=b(Z,[["__file","/home/runner/work/peer-assessment/peer-assessment/src/components/EmployeeLeaderMain.vue"]]),se={key:0,class:"absolute w-full h-full"},te=E({__name:"EmployeeLeader",setup(q){const f=c(()=>$().accountId),v=L(),h=[{name:"create",icon:"plus",function:()=>v.push("/employee/leader/new")}],l=c(()=>F().questionnaire(2)),_=async r=>{try{const u=await F().readQuestionnaire(r)}catch{}},w=c(()=>m().answersInformation(2)),y=async({userId:r,qId:u})=>{try{const e=await m().readAnswersInformation({userId:r,qId:u})}catch{}},A=c(()=>P().users);return U(()=>{_(2),y({userId:f.value,qId:2})}),(r,u)=>{const e=ee,s=S,a=G("router-view");return d(l)&&d(w)&&d(A)?(i(),C("div",se,[n(e),n(D,{name:"sidebar",mode:"out-in",appear:""},{default:o(()=>[n(s,{items:h})]),_:1}),n(a,null,{default:o(({Component:g})=>[n(D,{name:"modal",mode:"out-in",appear:""},{default:o(()=>[(i(),T(J(g)))]),_:2},1024)]),_:1})])):H("v-if",!0)}}}),pe=b(te,[["__file","/home/runner/work/peer-assessment/peer-assessment/src/views/EmployeeLeader.vue"]]);export{pe as default};
