import{_ as D,a as w}from"./BaseFormSelect.51964154.js";import{_ as x}from"./BaseFormTag.d4c7f577.js";import{_ as y}from"./BaseFormInput.9d55c31e.js";import{_ as v,d as E,i as c,x as U,f as A,w as N,u as a,o as q,a as T,b as t}from"./index.6a2fd45d.js";import{u as i}from"./users.201bf10d.js";import{u as b}from"./vee-validate.esm.49ef3a0d.js";import{d as k,r as I}from"./data.054ee288.js";import{c as S,a as o,d as V}from"./array.f969a70e.js";import"./BaseMessage.9729fd16.js";import"./BaseSelect.05f87e72.js";import"./BaseTag.d1833c38.js";import"./BaseInput.6dc0c3b4.js";import"./api.fe066752.js";const $={class:"m-2 grid grid-cols-1 lg:grid-cols-2 2xl:grid-cols-3 gap-4"},L=E({__name:"AdminUsersNew",setup(j){const m=S({department:o().required("\u6B64\u6B04\u4F4D\u5FC5\u586B"),name:o().required("\u6B64\u6B04\u4F4D\u5FC5\u586B"),email:o().required("\u6B64\u6B04\u4F4D\u5FC5\u586B").email("\u4E0D\u7B26\u5408\u96FB\u5B50\u90F5\u4EF6\u683C\u5F0F"),role:V().required("\u6B64\u6B04\u4F4D\u5FC5\u586B").min(1,"\u6700\u5C11\u9078\u64C7\u4E00\u9805")}),{handleSubmit:l,resetForm:p}=b({initialValues:{department:"",email:"",name:"",role:[]},validationSchema:m}),n=c("setToastData",()=>null),e=c("setIsLoading",()=>null),_=U(),d=async()=>{try{e(!0);const s=await i().readUsers()}catch{}finally{e(!1)}},B=l(async s=>{try{e(!0);const r=await i().createUser(s);n({isActive:!0,variant:"success",message:"\u65B0\u589E\u6210\u529F"}),p(),d()}catch({response:r}){n({isActive:!0,variant:"error",message:"\u65B0\u589E\u5931\u6557"})}finally{e(!1)}}),f=()=>_.push("/admin/users");return(s,r)=>{const u=y,F=w,g=x,C=D;return q(),A(C,{size:"full",onConfirm:a(B),onCancel:f},{default:N(()=>[T("article",$,[t(u,{name:"name",type:"text",class:"col-span-1",title:"\u59D3\u540D"}),t(u,{type:"email",name:"email",class:"col-span-1",title:"\u96FB\u5B50\u90F5\u4EF6"}),t(F,{name:"department",options:a(k),class:"col-span-1",title:"\u90E8\u9580"},null,8,["options"]),t(g,{name:"role",class:"col-span-1 lg:col-span-2 2xl:col-span-3",title:"\u89D2\u8272",tags:a(I).map(h=>h.text)},null,8,["tags"])])]),_:1},8,["onConfirm"])}}}),Z=v(L,[["__file","/home/runner/work/peer-assessment/peer-assessment/src/views/AdminUsersNew.vue"]]);export{Z as default};
