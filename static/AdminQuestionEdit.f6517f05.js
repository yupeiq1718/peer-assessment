import{_ as Q,a as S}from"./BaseFormSelect.fa346bb0.js";import{_ as $}from"./BaseFormInput.8eb3bdbb.js";import{_ as w}from"./BaseFormTextarea.2f528d64.js";import{_ as H,d as T,z as i,a as E,i as I,u as V,A as j,k as l,g as z,h as u,l as c,e as L,f as m,j as h}from"./index.2995e7f5.js";import{u as M}from"./vee-validate.esm.fef05e6d.js";import{q as G}from"./data.6ab9a877.js";import{u as p}from"./questions.e47944b8.js";import{a as J,c as d,e as K}from"./array.b0574b48.js";import{u as O}from"./system.e8de7046.js";import"./BaseMessage.0c3c4d40.js";import"./BaseSelect.dddd2a45.js";import"./BaseInput.225263d0.js";import"./BaseTextarea.2bd80849.js";import"./api.37b67db8.js";const P={class:"m-2 p-8 grid grid-cols-1 lg:grid-cols-2 2xl:grid-cols-3 gap-4 bg-white rounded-2xl duration-500"},U=T({__name:"AdminQuestionEdit",setup(W){var F,f,g,C,v;const b=i(()=>O().systemStatus),a=E(),e=i(()=>Number(a.params.roleId)),s=i(()=>p().question({roleId:e.value,id:Number(a.params.id)})),{setFieldValue:o,values:n,handleSubmit:A}=M();o("content",((F=s.value)==null?void 0:F.content)||""),o("tag",((f=s.value)==null?void 0:f.tag)||""),o("textHint",((g=s.value)==null?void 0:g.textHint)||""),o("typeId",((C=s.value)==null?void 0:C.typeId)||1),o("isRequired",((v=s.value)==null?void 0:v.isRequired)||!1);const _=I("setToastData",()=>null),B=I("setIsLoading",()=>null),N=A(async t=>{try{B(!0);const y=await p().updateQuestion({roleId:e.value,id:Number(a.params.id),question:{content:t.content,tag:t.tag,textHint:t.textHint,typeId:Number(t.typeId),isRequired:String(t.isRequired)==="true"}});_({isActive:!0,variant:"success",message:"\u66F4\u65B0\u6210\u529F"}),p().readQuestionnaire(e.value),r.push(`/admin/question/${e.value}`)}catch({response:y}){_({isActive:!0,variant:"error",message:"\u66F4\u65B0\u5931\u6557"})}finally{B(!1)}}),r=V(),R=()=>r.push(`/admin/question/${e.value}`);return j(()=>{b.value!==0&&r.push(`/admin/question/${e.value}`)}),(t,y)=>{const q=S,x=w,k=$,D=Q;return c(),l(D,{size:"full",onConfirm:u(N),onCancel:R},{default:z(()=>[L("article",P,[m(q,{class:"col-span-1 p-0",name:"typeId",options:u(G),title:"\u8ACB\u9078\u64C7\u554F\u7B54\u985E\u578B",rule:J().required("\u6B64\u6B04\u4F4D\u5FC5\u586B")},null,8,["options","rule"]),m(x,{name:"content",class:"col-span-1 lg:col-span-2 2xl:col-span-3",title:"\u8ACB\u8F38\u5165\u554F\u984C\u6558\u8FF0",rule:d().required("\u6B64\u6B04\u4F4D\u5FC5\u586B")},null,8,["rule"]),m(k,{name:"tag",type:"text",class:"col-span-1 p-0",title:"\u8ACB\u8F38\u5165\u6A19\u7C64",rule:d().required("\u6B64\u6B04\u4F4D\u5FC5\u586B")},null,8,["rule"]),Number(u(n).typeId)===2||Number(u(n).typeId)===3?(c(),l(x,{key:0,name:"textHint",class:"col-span-1 lg:col-span-2 2xl:col-span-3",title:"\u8ACB\u8F38\u5165\u6587\u5B57\u554F\u984C\u6558\u8FF0",rule:d().required("\u6B64\u6B04\u4F4D\u5FC5\u586B")},null,8,["rule"])):h("v-if",!0),Number(u(n).typeId)===2||Number(u(n).typeId)===3?(c(),l(q,{key:1,class:"col-span-1 p-0",name:"isRequired",options:[{text:"\u9078\u586B",value:!1},{text:"\u5FC5\u586B",value:!0}],title:"\u662F\u5426\u5FC5\u586B",role:K()},null,8,["role"])):h("v-if",!0)])]),_:1},8,["onConfirm"])}}}),me=H(U,[["__file","/home/runner/work/peer-assessment/peer-assessment/src/views/AdminQuestionEdit.vue"]]);export{me as default};
