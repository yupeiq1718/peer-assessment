import{_ as N}from"./TheSideBar.4994e65a.js";import{_ as L}from"./BaseTable.9dd2004d.js";import{_ as F,d as U,z as T,i as w,u as $,l as r,k as B,g as n,e as o,t as u,q as x,f as a,h as l,c as A,C as M,F as S,j as I,s as R,b as q,T as b,B as z}from"./index.6deaa61a.js";import{_ as G}from"./BaseTag.986e51cc.js";import{u as c}from"./users.72a3ff26.js";import{g as D,r as H,d as J}from"./data.6ab9a877.js";import"./api.b8ed9cc4.js";const K={class:"flex justify-start items-center"},O=["src"],P={key:0,class:"flex justify-start items-center"},Q=["src"],W=U({__name:"AdminUsersMain",setup(V){const m=[{name:"\u59D3\u540D",key:"profile"},{name:"\u96FB\u5B50\u4FE1\u7BB1",key:"email",width:"25%"},{name:"\u90E8\u9580",key:"department",width:"10%"},{name:"\u89D2\u8272",key:"roles",width:"25%"},{name:"\u4E3B\u7BA1",key:"manager"},{name:"\u529F\u80FD",key:"function"}],d=T(()=>{var s;return(s=c().filteredUsers)==null?void 0:s.map(t=>({profile:{name:t.name,picture:t.picture},email:t.email,department:t.department,roles:t.roles,manager:t.manager,function:t.id}))}),_=s=>J.findIndex(t=>s===t.value),p=w("setToastData",()=>null),f=w("setIsLoading",()=>null),h=async s=>{try{f(!0);const t=await c().deleteUser(s);p({isActive:!0,variant:"success",message:"\u522A\u9664\u6210\u529F"}),await c().readUsers()}catch{p({isActive:!0,variant:"error",message:"\u522A\u9664\u5931\u6557"})}finally{f(!1)}},v=w("setConfirmData",()=>null),g=s=>{v({isActive:!0,confirm:()=>h(s),text:"\u8ACB\u78BA\u8A8D\u662F\u5426\u522A\u9664\u8A72\u7B46\u8CC7\u6599\uFF1F"})},k=$(),j=s=>k.push(`/admin/users/edit/${s}`);return(s,t)=>{const y=G,C=R,E=L;return r(),B(E,{fields:m,items:l(d)},{profile:n(e=>[o("div",K,[o("img",{class:"inline-block rounded-full w-16 max-w-none h-16 bg-light mx-4",src:e.data.picture||"/user.png",alt:"user"},null,8,O),o("span",null,u(e.data.name),1)])]),email:n(e=>[x(u(e.data),1)]),department:n(e=>[a(y,{variant:l(D)(_(e.data))},{default:n(()=>[x(u(e.data),1)]),_:2},1032,["variant"])]),roles:n(e=>[(r(!0),A(S,null,M(e.data,i=>(r(),B(y,{key:i,variant:l(D)(i-1),class:"mx-1"},{default:n(()=>[x(u(l(H)[i-1].text),1)]),_:2},1032,["variant"]))),128))]),manager:n(e=>[e.data?(r(),A("div",P,[o("img",{class:"inline-block rounded-full w-16 max-w-none h-16 bg-light mx-4",src:e.data.picture||"/user.png",alt:"user"},null,8,Q),o("span",null,u(e.data.name),1)])):I("v-if",!0)]),function:n(e=>[o("div",null,[a(C,{role:"button",class:"w-6 h-6 m-2 fill-muted hover:fill-theme",name:"edit",onClick:i=>j(e.data)},null,8,["onClick"]),a(C,{role:"button",class:"w-6 h-6 m-2 fill-muted hover:fill-theme",name:"delete",onClick:i=>g(e.data)},null,8,["onClick"])])]),_:1},8,["items"])}}}),X=F(W,[["__file","/home/runner/work/peer-assessment/peer-assessment/src/components/AdminUsersMain.vue"]]),Y={key:0,class:"absolute w-full h-full pt-6 px-4"},Z=U({__name:"AdminUsers",setup(V){const m=$(),d=[{name:"create",icon:"plus",function:()=>m.push("/admin/users/new")},{name:"filter",icon:"filter",function:()=>m.push("/admin/users/filter")}],_=T(()=>c().users);return(p,f)=>{const h=X,v=N,g=q("router-view");return l(_)?(r(),A("div",Y,[a(h),a(b,{name:"sidebar",mode:"out-in",appear:""},{default:n(()=>[a(v,{items:d})]),_:1}),a(g,null,{default:n(({Component:k})=>[a(b,{name:"modal",mode:"out-in",appear:""},{default:n(()=>[(r(),B(z(k)))]),_:2},1024)]),_:1})])):I("v-if",!0)}}}),ie=F(Z,[["__file","/home/runner/work/peer-assessment/peer-assessment/src/views/AdminUsers.vue"]]);export{ie as default};
