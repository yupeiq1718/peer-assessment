import{_ as K}from"./TheSideBar.c7c70072.js";import{_ as I,d as Q,o as r,c as h,a as c,F as H,v as O,b as a,u as s,f as b,e as A,S as N,m as p,i as S,x as z,w as $,j as C,t as F,k as G,y as P,O as W,q as X,T as L,s as Y}from"./index.8e5d0c4b.js";import{u as g,_ as Z}from"./questions.1aedc87e.js";import{_ as ee}from"./BaseMessage.2ffdf9d7.js";import{_ as se}from"./BaseScore.c24b2179.js";import{u as te}from"./vee-validate.esm.88b5c7f4.js";import{_ as ne}from"./BaseTag.f6c13a5a.js";import{a as R,r as oe}from"./data.ea6db125.js";import{u as U}from"./users.8bd03f2c.js";import"./BaseTextarea.bdb576c1.js";import"./api.f0676fc6.js";const re={class:"bg-white rounded-2xl flex flex-col items-start"},ae=Q({__name:"BaseFormScore",props:{name:{type:String,required:!0},disabled:{type:Boolean,required:!1},variant:{type:String,required:!0}},setup(w){const n=w,{value:l,errorMessage:e}=te(n.name),t=m=>{l.value=m};return(m,f)=>{const i=se,x=ee;return r(),h("form",re,[c("div",null,[(r(),h(H,null,O(5,_=>c("div",{key:_,class:"inline-block"},[a(i,{variant:s(l)===_?n.variant:"muted",score:_,onClick:o=>t(_)},null,8,["variant","score","onClick"])])),64))]),s(e)?(r(),b(x,{key:0,status:"error",message:s(e)},null,8,["message"])):A("v-if",!0)])}}}),ie=I(ae,[["__file","/home/runner/work/peer-assessment/peer-assessment/src/components/BaseFormScore.vue"]]),ue={class:"p-8 bg-white rounded-2xl flex flex-col mb-4"},ce={class:"flex flex-row justify-end items-center duration-500 overflow-hidden"},le=c("hr",{class:"border-2 border-light grow-[1] mx-3"},null,-1),me=Q({__name:"AdminQuestionAnswer",props:{id:{type:Number,required:!0}},setup(w){const n=w,l=N(),e=p(()=>Number(l.params.roleId)),t=p(()=>g().question({roleId:e.value,id:n.id})),m=S("setToastData",()=>null),f=S("setIsLoading",()=>null),i=async()=>{try{const u=await g().readQuestionnaire(e.value)}catch{}},x=async({roleId:u,id:d})=>{try{f(!0);const y=await g().deleteQuestion({roleId:u,id:d});m({isActive:!0,variant:"success",message:"\u522A\u9664\u6210\u529F"}),i()}catch{m({isActive:!0,variant:"error",message:"\u522A\u9664\u5931\u6557"})}finally{f(!1)}},_=z(),o=()=>{var u;_.push(`/admin/question/${e.value}/edit/${(u=t.value)==null?void 0:u.id}`)},v=S("setConfirmData",()=>null),B=()=>{v({isActive:!0,confirm:()=>x({roleId:2,id:n.id})})};return(u,d)=>{var D,M,j,V,E;const y=ne,q=ie,J=Z,T=G;return r(),h("div",null,[c("article",ue,[c("label",null,[a(y,{variant:s(R)(n.id)},{default:$(()=>{var k;return[C(F((k=s(t))==null?void 0:k.tag),1)]}),_:1},8,["variant"]),C(" "+F((D=s(t))==null?void 0:D.content),1)]),((M=s(t))==null?void 0:M.typeId)===1||((j=s(t))==null?void 0:j.typeId)===2?(r(),b(q,{key:0,name:"score",variant:s(R)(n.id),class:"mt-4"},null,8,["variant"])):A("v-if",!0),((V=s(t))==null?void 0:V.typeId)===2||((E=s(t))==null?void 0:E.typeId)===3?(r(),b(J,{key:1,name:"text",placeholder:s(t).textHint,class:"w-full mt-4"},null,8,["placeholder"])):A("v-if",!0)]),c("footer",ce,[le,c("button",{class:"rounded-2xl flex justify-center items-center bg-light hover:bg-theme fill-white w-10 h-10 mr-2 duration-500",onClick:d[0]||(d[0]=k=>o())},[a(T,{name:"edit",class:"w-6 h-6"})]),c("button",{class:"rounded-2xl flex justify-center items-center bg-light hover:bg-theme fill-white w-10 h-10 mr-2 duration-500",onClick:d[1]||(d[1]=k=>B())},[a(T,{name:"delete",class:"w-6 h-6"})])])])}}}),_e=I(me,[["__file","/home/runner/work/peer-assessment/peer-assessment/src/components/AdminQuestionAnswer.vue"]]),de={class:"mx-5 mt-5 mb-2 grid grid-cols-1 lg:grid-cols-2 2xl:grid-cols-3 gap-4"},pe=Q({__name:"AdminQuestionMain",setup(w){const n=N(),l=p(()=>Number(n.params.roleId)),e=p(()=>g().questions(l.value));return(t,m)=>{const f=_e;return r(),h("article",de,[(r(!0),h(H,null,O(s(e),i=>(r(),b(f,{id:i.id,key:i.id,class:"col-span-1 lg:col-span-2 2xl:col-span-3"},null,8,["id"]))),128))])}}}),fe=I(pe,[["__file","/home/runner/work/peer-assessment/peer-assessment/src/components/AdminQuestionMain.vue"]]),ve={key:0,class:"absolute w-full h-full"},ge={class:"font-bold text-dark text-sm"},he=Q({__name:"AdminQuestion",setup(w){const n=z(),l=N(),e=p(()=>Number(l.params.roleId)),t=p(()=>{const o=oe.find(v=>v.value===Number(e.value));return`${o==null?void 0:o.text}\u4E92\u8A55\u554F\u5377`}),m=[{name:"create",icon:"plus",function:()=>n.push(`/admin/question/${e.value}/new`)},{name:"filter",icon:"filter",function:()=>n.push(`/admin/question/${e.value}/filter`)}],f=async()=>{try{const o=await U().readUsers()}catch{}},i=async o=>{try{const v=await g().readQuestionnaire(o)}catch{}},x=p(()=>U().users),_=p(()=>g().questionnaire(e.value));return P(e,()=>i(e.value)),W(()=>{f(),i(e.value)}),(o,v)=>{const B=G,u=fe,d=K,y=X("router-view");return s(x)&&s(_)?(r(),h("div",ve,[c("span",ge,[a(B,{name:"question",class:"w-4 h-4 mr-2"}),C(F(s(t)),1)]),a(u),a(L,{name:"sidebar",mode:"out-in",appear:""},{default:$(()=>[a(d,{items:m})]),_:1}),a(y,null,{default:$(({Component:q})=>[a(L,{name:"modal",mode:"out-in",appear:""},{default:$(()=>[(r(),b(Y(q)))]),_:2},1024)]),_:1})])):A("v-if",!0)}}}),Se=I(he,[["__file","/home/runner/work/peer-assessment/peer-assessment/src/views/AdminQuestion.vue"]]);export{Se as default};
