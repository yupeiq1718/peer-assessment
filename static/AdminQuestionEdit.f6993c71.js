import{_ as R,a as $}from"./BaseFormSelect.444052c1.js";import{c as k,a as n,d as T,e as D,_ as E}from"./array.f16ea848.js";import{u as i,_ as H}from"./questions.4ed33f6c.js";import{_ as S,d as V,S as L,m as y,i as I,x as j,f as r,w as z,u as e,o as c,a as M,b as l,e as q}from"./index.bfd7bb5a.js";import{a as G}from"./vee-validate.esm.18170894.js";import{q as J}from"./data.ea6db125.js";import"./BaseMessage.9ad08472.js";import"./BaseSelect.30123327.js";import"./BaseInput.a3e76a86.js";import"./BaseTextarea.c1729713.js";import"./api.9b010a04.js";const K={class:"m-2 p-8 grid grid-cols-1 lg:grid-cols-2 2xl:grid-cols-3 gap-4 bg-white rounded-2xl duration-500"},O=V({__name:"AdminQuestionEdit",setup(P){var _,B,F,f,g;const a=L(),t=y(()=>Number(a.params.roleId)),s=y(()=>i().question({roleId:t.value,id:Number(a.params.id)})),b=k({content:n().required("\u6B64\u6B04\u4F4D\u5FC5\u586B"),tag:n().required("\u6B64\u6B04\u4F4D\u5FC5\u586B"),textHint:n(),typeId:T(),isRequired:D()}),{values:u,handleSubmit:h}=G({initialValues:{typeId:((_=s.value)==null?void 0:_.typeId)||1,content:((B=s.value)==null?void 0:B.content)||"",tag:((F=s.value)==null?void 0:F.tag)||"",textHint:((f=s.value)==null?void 0:f.textHint)||"",isRequired:((g=s.value)==null?void 0:g.isRequired)||!1},validationSchema:b}),p=I("setToastData",()=>null),m=I("setIsLoading",()=>null),N=h(async o=>{try{m(!0);const v=await i().updateQuestion({roleId:t.value,id:Number(a.params.id),question:{...o,typeId:Number(o.typeId)}});p({isActive:!0,variant:"success",message:"\u66F4\u65B0\u6210\u529F"}),i().readQuestionnaire(t.value),d.push(`/admin/question/${t.value}`)}catch({response:v}){p({isActive:!0,variant:"error",message:"\u66F4\u65B0\u5931\u6557"})}finally{m(!1)}}),d=j(),A=()=>d.push(`/admin/question/${t.value}`);return(o,v)=>{const C=$,x=H,w=E,Q=R;return c(),r(Q,{size:"full",onConfirm:e(N),onCancel:A},{default:z(()=>[M("article",K,[l(C,{class:"col-span-1 p-0",name:"typeId",options:e(J),title:"\u8ACB\u9078\u64C7\u554F\u7B54\u985E\u578B"},null,8,["options"]),l(x,{name:"content",class:"col-span-1 lg:col-span-2 2xl:col-span-3",title:"\u8ACB\u8F38\u5165\u554F\u984C\u6558\u8FF0"}),l(w,{name:"tag",type:"text",class:"col-span-1 p-0",title:"\u8ACB\u8F38\u5165\u6A19\u7C64"}),Number(e(u).typeId)===2||Number(e(u).typeId)===3?(c(),r(x,{key:0,name:"textHint",class:"col-span-1 lg:col-span-2 2xl:col-span-3",title:"\u8ACB\u8F38\u5165\u6587\u5B57\u554F\u984C\u6558\u8FF0"})):q("v-if",!0),Number(e(u).typeId)===2||Number(e(u).typeId)===3?(c(),r(C,{key:1,class:"col-span-1 p-0",name:"isRequired",options:[{text:"\u9078\u586B",value:!1},{text:"\u5FC5\u586B",value:!0}],title:"\u662F\u5426\u5FC5\u586B"})):q("v-if",!0)])]),_:1},8,["onConfirm"])}}}),ne=S(O,[["__file","/home/runner/work/peer-assessment/peer-assessment/src/views/AdminQuestionEdit.vue"]]);export{ne as default};
