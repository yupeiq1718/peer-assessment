import{_ as x,a as w}from"./BaseFormSelect.3c857ac6.js";import{_ as v}from"./BaseFormTag.59307da5.js";import{c as y,a,b as E,_ as U}from"./array.279115cb.js";import{_ as A,d as N,m as b,i as c,x as q,f as T,w as k,u as o,o as I,a as S,b as t}from"./index.8e5d0c4b.js";import{u as m}from"./users.8bd03f2c.js";import{a as V}from"./vee-validate.esm.88b5c7f4.js";import{r as $,g as L}from"./data.ea6db125.js";import"./BaseMessage.2ffdf9d7.js";import"./BaseSelect.05416da6.js";import"./BaseTag.f6c13a5a.js";import"./BaseInput.738a5e02.js";import"./api.f0676fc6.js";const j={class:"m-2 grid grid-cols-1 lg:grid-cols-2 2xl:grid-cols-3 gap-4"},z=N({__name:"AdminUsersNew",setup(M){const i=y({department:a().required("\u6B64\u6B04\u4F4D\u5FC5\u586B"),name:a().required("\u6B64\u6B04\u4F4D\u5FC5\u586B"),email:a().required("\u6B64\u6B04\u4F4D\u5FC5\u586B").email("\u4E0D\u7B26\u5408\u96FB\u5B50\u90F5\u4EF6\u683C\u5F0F"),role:E().required("\u6B64\u6B04\u4F4D\u5FC5\u586B").min(1,"\u6700\u5C11\u9078\u64C7\u4E00\u9805")}),{handleSubmit:l,resetForm:p}=V({initialValues:{department:"",email:"",name:"",role:[]},validationSchema:i}),_=b(()=>L().map(e=>({value:e,text:e}))),n=c("setToastData",()=>null),s=c("setIsLoading",()=>null),d=q(),B=async()=>{try{s(!0);const e=await m().readUsers()}catch{}finally{s(!1)}},f=l(async e=>{try{s(!0);const r=await m().createUser(e);n({isActive:!0,variant:"success",message:"\u65B0\u589E\u6210\u529F"}),p(),B()}catch({response:r}){n({isActive:!0,variant:"error",message:"\u65B0\u589E\u5931\u6557"})}finally{s(!1)}}),F=()=>d.push("/admin/users");return(e,r)=>{const u=U,g=w,C=v,h=x;return I(),T(h,{size:"full",onConfirm:o(f),onCancel:F},{default:k(()=>[S("article",j,[t(u,{name:"name",type:"text",class:"col-span-1",title:"\u59D3\u540D"}),t(u,{type:"email",name:"email",class:"col-span-1",title:"\u96FB\u5B50\u90F5\u4EF6"}),t(g,{name:"department",options:o(_),class:"col-span-1",title:"\u90E8\u9580"},null,8,["options"]),t(C,{name:"role",class:"col-span-1 lg:col-span-2 2xl:col-span-3",title:"\u89D2\u8272",tags:o($).map(D=>D.text)},null,8,["tags"])])]),_:1},8,["onConfirm"])}}}),ee=A(z,[["__file","/home/runner/work/peer-assessment/peer-assessment/src/views/AdminUsersNew.vue"]]);export{ee as default};
