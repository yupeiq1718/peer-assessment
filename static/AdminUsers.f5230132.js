import{_ as N}from"./TheSideBar.14696c5b.js";import{_ as V}from"./BaseTable.c98cdd53.js";import{_ as F,d as D,m as b,i as y,x as T,o as i,c as g,b as n,w as t,a as _,t as l,j as k,F as j,v as E,f as $,u as A,k as S,y as R,q,T as C,e as z,s as G}from"./index.043853cc.js";import{_ as H}from"./BaseTag.9416b871.js";import{_ as J}from"./user.ef8b3aab.js";import{u}from"./users.af9a9982.js";import{r as K}from"./data.054ee288.js";import"./api.f3d74f86.js";const O={class:"mx-5 my-2"},P={class:"flex justify-start items-center"},Q=_("img",{class:"inline-block rounded-full w-16 max-w-none h-16 mx-4",src:J,alt:"user"},null,-1),W=D({__name:"AdminUsersMain",setup(I){const c=[{name:"\u59D3\u540D",key:"name"},{name:"\u96FB\u5B50\u4FE1\u7BB1",key:"email",width:"40%"},{name:"\u90E8\u9580",key:"department",width:"20%"},{name:"\u89D2\u8272",key:"role",width:"20%"},{name:"\u529F\u80FD",key:"function"}],d=["success","alert","error","info","muted"],p=b(()=>{var e;return(e=u().filteredUsers)==null?void 0:e.map(a=>({name:a.name,email:a.email,department:a.department,role:a.role,function:a.id}))}),m=y("setToastData",()=>null),o=y("setIsLoading",()=>null),B=async()=>{try{const e=await u().readUsers()}catch{}},f=async e=>{try{o(!0);const a=await u().deleteUser(e);m({isActive:!0,variant:"success",message:"\u522A\u9664\u6210\u529F"}),B()}catch{m({isActive:!0,variant:"error",message:"\u522A\u9664\u5931\u6557"})}finally{o(!1)}},h=y("setConfirmData",()=>null),v=e=>{h({isActive:!0,confirm:()=>f(e),text:"\u8ACB\u78BA\u8A8D\u662F\u5426\u522A\u9664\u8A72\u7B46\u8CC7\u6599\uFF1F"})},w=T(),L=e=>w.push(`/admin/users/edit/${e}`);return(e,a)=>{const U=H,x=S,M=V;return i(),g("div",O,[n(M,{fields:c,items:A(p)},{name:t(s=>[_("div",P,[Q,_("span",null,l(s.data),1)])]),email:t(s=>[k(l(s.data),1)]),department:t(s=>[n(U,{variant:"theme"},{default:t(()=>[k(l(s.data),1)]),_:2},1024)]),role:t(s=>[(i(!0),g(j,null,E(s.data,r=>(i(),$(U,{key:r,variant:d[r-1],class:"mx-1"},{default:t(()=>[k(l(A(K)[r-1].text),1)]),_:2},1032,["variant"]))),128))]),function:t(s=>[_("div",null,[n(x,{role:"button",class:"w-6 h-6 m-2 fill-muted hover:fill-theme",name:"edit",onClick:r=>L(s.data)},null,8,["onClick"]),n(x,{role:"button",class:"w-6 h-6 m-2 fill-muted hover:fill-theme",name:"delete",onClick:r=>v(s.data)},null,8,["onClick"])])]),_:1},8,["items"])])}}}),X=F(W,[["__file","/home/runner/work/peer-assessment/peer-assessment/src/components/AdminUsersMain.vue"]]),Y={key:0,class:"absolute w-full h-full"},Z=D({__name:"AdminUsers",setup(I){const c=T(),d=[{name:"create",icon:"plus",function:()=>c.push("/admin/users/new")},{name:"filter",icon:"filter",function:()=>c.push("/admin/users/filter")}],p=async()=>{try{const o=await u().readUsers()}catch{}},m=b(()=>u().users);return R(async()=>{await p()}),(o,B)=>{const f=X,h=N,v=q("router-view");return A(m)?(i(),g("div",Y,[n(f),n(C,{name:"sidebar",mode:"out-in",appear:""},{default:t(()=>[n(h,{items:d})]),_:1}),n(v,null,{default:t(({Component:w})=>[n(C,{name:"modal",mode:"out-in",appear:""},{default:t(()=>[(i(),$(G(w)))]),_:2},1024)]),_:1})])):z("v-if",!0)}}}),ue=F(Z,[["__file","/home/runner/work/peer-assessment/peer-assessment/src/views/AdminUsers.vue"]]);export{ue as default};
