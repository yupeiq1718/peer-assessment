import{_ as N}from"./TheSideBar.5a57433e.js";import{_ as L}from"./BaseTable.0da79a06.js";import{_ as D,d as F,z as U,i as x,u as T,l as r,c,f as a,g as n,e as o,t as u,q as B,h as l,F as M,C as S,k as $,j as I,s as R,b as q,T as C,B as z}from"./index.ca97bf03.js";import{_ as G}from"./BaseTag.40556f5c.js";import{u as d}from"./users.0ccac95b.js";import{g as b,r as H,d as J}from"./data.d5f5edba.js";import"./api.41d29b3e.js";const K={class:"mx-5 my-2"},O={class:"flex justify-start items-center"},P=["src"],Q={key:0,class:"flex justify-start items-center"},W=["src"],X=F({__name:"AdminUsersMain",setup(V){const m=[{name:"\u59D3\u540D",key:"profile"},{name:"\u96FB\u5B50\u4FE1\u7BB1",key:"email",width:"25%"},{name:"\u90E8\u9580",key:"department",width:"10%"},{name:"\u89D2\u8272",key:"roles",width:"25%"},{name:"\u4E3B\u7BA1",key:"manager"},{name:"\u529F\u80FD",key:"function"}],_=U(()=>{var s;return(s=d().filteredUsers)==null?void 0:s.map(t=>({profile:{name:t.name,picture:t.picture},email:t.email,department:t.department,roles:t.roles,manager:t.manager,function:t.id}))}),p=s=>J.findIndex(t=>s===t.value),f=x("setToastData",()=>null),h=x("setIsLoading",()=>null),v=async s=>{try{h(!0);const t=await d().deleteUser(s);f({isActive:!0,variant:"success",message:"\u522A\u9664\u6210\u529F"}),await d().readUsers()}catch{f({isActive:!0,variant:"error",message:"\u522A\u9664\u5931\u6557"})}finally{h(!1)}},g=x("setConfirmData",()=>null),k=s=>{g({isActive:!0,confirm:()=>v(s),text:"\u8ACB\u78BA\u8A8D\u662F\u5426\u522A\u9664\u8A72\u7B46\u8CC7\u6599\uFF1F"})},w=T(),j=s=>w.push(`/admin/users/edit/${s}`);return(s,t)=>{const y=G,A=R,E=L;return r(),c("div",K,[a(E,{fields:m,items:l(_)},{profile:n(e=>[o("div",O,[o("img",{class:"inline-block rounded-full w-16 max-w-none h-16 bg-light mx-4",src:e.data.picture||"/user.png",alt:"user"},null,8,P),o("span",null,u(e.data.name),1)])]),email:n(e=>[B(u(e.data),1)]),department:n(e=>[a(y,{variant:l(b)(p(e.data))},{default:n(()=>[B(u(e.data),1)]),_:2},1032,["variant"])]),roles:n(e=>[(r(!0),c(M,null,S(e.data,i=>(r(),$(y,{key:i,variant:l(b)(i-1),class:"mx-1"},{default:n(()=>[B(u(l(H)[i-1].text),1)]),_:2},1032,["variant"]))),128))]),manager:n(e=>[e.data?(r(),c("div",Q,[o("img",{class:"inline-block rounded-full w-16 max-w-none h-16 bg-light mx-4",src:e.data.picture||"/user.png",alt:"user"},null,8,W),o("span",null,u(e.data.name),1)])):I("v-if",!0)]),function:n(e=>[o("div",null,[a(A,{role:"button",class:"w-6 h-6 m-2 fill-muted hover:fill-theme",name:"edit",onClick:i=>j(e.data)},null,8,["onClick"]),a(A,{role:"button",class:"w-6 h-6 m-2 fill-muted hover:fill-theme",name:"delete",onClick:i=>k(e.data)},null,8,["onClick"])])]),_:1},8,["items"])])}}}),Y=D(X,[["__file","/home/runner/work/peer-assessment/peer-assessment/src/components/AdminUsersMain.vue"]]),Z={key:0,class:"absolute w-full h-full"},ee=F({__name:"AdminUsers",setup(V){const m=T(),_=[{name:"create",icon:"plus",function:()=>m.push("/admin/users/new")},{name:"filter",icon:"filter",function:()=>m.push("/admin/users/filter")}],p=U(()=>d().users);return(f,h)=>{const v=Y,g=N,k=q("router-view");return l(p)?(r(),c("div",Z,[a(v),a(C,{name:"sidebar",mode:"out-in",appear:""},{default:n(()=>[a(g,{items:_})]),_:1}),a(k,null,{default:n(({Component:w})=>[a(C,{name:"modal",mode:"out-in",appear:""},{default:n(()=>[(r(),$(z(w)))]),_:2},1024)]),_:1})])):I("v-if",!0)}}}),ue=D(ee,[["__file","/home/runner/work/peer-assessment/peer-assessment/src/views/AdminUsers.vue"]]);export{ue as default};
