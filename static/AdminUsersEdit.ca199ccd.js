import{_ as A}from"./TheModal.380816f1.js";import{_ as C,a as E}from"./BaseFormInput.6de1a4f4.js";import{u as N,_ as T}from"./BaseFormSelect.e3bc3e4f.js";import{_ as k,d as I,m as n,i as f,S as R,x as S,f as V,w as L,u as o,o as j,a as z,b as a}from"./index.c199146d.js";import{u as r,g as M,a as $}from"./data.4d0ace72.js";import"./BaseMessage.2afa892f.js";import"./BaseTag.559855b4.js";import"./BaseInput.186c6cef.js";import"./BaseSelect.3fa907ed.js";const q={class:"m-2 grid grid-cols-1 lg:grid-cols-2 2xl:grid-cols-3 gap-4"},G=I({__name:"AdminUsersEdit",setup(H){var m,i,p,_;const v=n(()=>$().map(e=>({value:e,text:e}))),u=f("setToastData",()=>null),s=f("setIsLoading",()=>null),h=R(),l=n(()=>h.params.id),t=n(()=>r().user(Number(l.value))),{handleSubmit:x}=N({initialValues:{department:((m=t.value)==null?void 0:m.department)||"",email:((i=t.value)==null?void 0:i.email)||"",name:((p=t.value)==null?void 0:p.name)||"",role:((_=t.value)==null?void 0:_.role)||[]}}),B=async()=>{try{s(!0);const e=await r().readUsers()}catch{}finally{s(!1)}},F=x(async e=>{try{s(!0);const d=await r().updateUser({id:Number(l.value),user:{name:e.name,department:e.department}});u({isActive:!0,variant:"success",message:"\u66F4\u65B0\u6210\u529F"}),c.push("/admin/users"),B()}catch({response:d}){u({isActive:!0,variant:"error",message:"\u66F4\u65B0\u5931\u6557"})}finally{s(!1)}}),c=S(),y=()=>c.push("/admin/users");return(e,d)=>{const g=E,b=T,U=C,w=A;return j(),V(w,{size:"full",onConfirm:o(F),onCancel:y},{default:L(()=>[z("article",q,[a(g,{name:"name",type:"text",class:"col-span-1",title:"\u59D3\u540D"}),a(g,{name:"email",class:"col-span-1",type:"email",title:"\u96FB\u5B50\u90F5\u4EF6",disabled:""}),a(b,{name:"department",options:o(v),class:"col-span-1",title:"\u90E8\u9580"},null,8,["options"]),a(U,{name:"role",class:"col-span-1 lg:col-span-2 2xl:col-span-3",title:"\u89D2\u8272",tags:o(M)().map(D=>D.text),disabled:""},null,8,["tags"])])]),_:1},8,["onConfirm"])}}}),ee=k(G,[["__file","/home/runner/work/peer-assessment/peer-assessment/src/views/AdminUsersEdit.vue"]]);export{ee as default};
