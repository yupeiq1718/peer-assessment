import{a as P}from"./TheSideBar.6e568260.js";import{_ as F,d as N,z as o,a as S,i as C,u as H,l as n,c as p,e as d,f as a,g as y,q as U,t as b,h as e,n as W,k as A,j as x,s as G,F as q,C as X,w as Y,A as Z,b as ee,T as L,B as te}from"./index.a32bcd10.js";import{_ as se}from"./BaseFormTextarea.d65ceccb.js";import{_ as ne}from"./BaseFormScore.4f7f5378.js";import{_ as oe}from"./BaseTag.a01f1525.js";import{u as g}from"./questions.aa957120.js";import{g as z,r as re}from"./data.ff9c2fa5.js";import{u as J}from"./system.37c5d4bb.js";import{u as ae}from"./users.9a742a63.js";import"./BaseMessage.647f0997.js";import"./BaseTextarea.f608fa16.js";import"./vee-validate.esm.78d42f1b.js";import"./BaseScore.46ec2b9e.js";import"./api.359bc57d.js";const ue={class:"p-8 bg-white rounded-2xl flex flex-col mb-4"},ie={key:0,class:"flex flex-row justify-end items-center duration-500 overflow-hidden mb-4"},le=d("hr",{class:"border-2 border-light grow-[1] mx-3"},null,-1),ce=N({__name:"AdminQuestionAnswer",props:{id:{type:Number,required:!0},index:{type:Number,required:!0}},setup(B){const u=B,m=o(()=>J().systemStatus),_=S(),t=o(()=>Number(_.params.roleId)),s=o(()=>g().question({roleId:t.value,id:u.id})),f=C("setToastData",()=>null),i=C("setIsLoading",()=>null),h=async()=>{try{const r=await g().readQuestionnaire(t.value)}catch{}},l=async({roleId:r,id:c})=>{try{i(!0);const k=await g().deleteQuestion({roleId:r,id:c});f({isActive:!0,variant:"success",message:"\u522A\u9664\u6210\u529F"}),h()}catch{f({isActive:!0,variant:"error",message:"\u522A\u9664\u5931\u6557"})}finally{i(!1)}},v=H(),I=()=>{var r;v.push(`/admin/question/${t.value}/edit/${(r=s.value)==null?void 0:r.id}`)},Q=C("setConfirmData",()=>null),$=()=>{Q({isActive:!0,confirm:()=>l({roleId:2,id:u.id}),text:"\u8ACB\u78BA\u8A8D\u662F\u5426\u522A\u9664\u8A72\u7B46\u8CC7\u6599\uFF1F"})};return(r,c)=>{var D,E,j,V,M,R;const k=oe,K=ne,O=se,T=G;return n(),p("div",null,[d("article",ue,[d("label",null,[a(k,{class:"mr-1",variant:e(z)(u.index)},{default:y(()=>{var w;return[U(b((w=e(s))==null?void 0:w.tag),1)]}),_:1},8,["variant"]),d("span",{class:W(((D=e(s))==null?void 0:D.isRequired)&&"after:content-['*'] after:ml-1 after:text-error")},b((E=e(s))==null?void 0:E.content),3)]),((j=e(s))==null?void 0:j.typeId)===1||((V=e(s))==null?void 0:V.typeId)===2?(n(),A(K,{key:0,name:"score",variant:e(z)(u.index),class:"mt-4"},null,8,["variant"])):x("v-if",!0),((M=e(s))==null?void 0:M.typeId)===2||((R=e(s))==null?void 0:R.typeId)===3?(n(),A(O,{key:1,name:"text",placeholder:e(s).textHint,class:"w-full mt-4"},null,8,["placeholder"])):x("v-if",!0)]),e(m)===0?(n(),p("footer",ie,[le,d("button",{class:"rounded-2xl flex justify-center items-center bg-light hover:bg-theme fill-white w-10 h-10 mr-2 duration-500",onClick:c[0]||(c[0]=w=>I())},[a(T,{name:"edit",class:"w-6 h-6"})]),d("button",{class:"rounded-2xl flex justify-center items-center bg-light hover:bg-theme fill-white w-10 h-10 mr-2 duration-500",onClick:c[1]||(c[1]=w=>$())},[a(T,{name:"delete",class:"w-6 h-6"})])])):x("v-if",!0)])}}}),me=F(ce,[["__file","/home/runner/work/peer-assessment/peer-assessment/src/components/AdminQuestionAnswer.vue"]]),de={key:0,class:"px-3 2xl:px-4 py-8 rounded-2xl bg-white text-center text-dark align-middle whitespace-nowrap col-span-1 sm:col-span-2 lg:col-span-3 xl:col-span-4 2xl:col-span-5"},pe=N({__name:"AdminQuestionMain",setup(B){const u=S(),m=o(()=>Number(u.params.roleId)),_=o(()=>g().questions(m.value)||[]);return(t,s)=>{const f=me;return n(),p(q,null,[(n(!0),p(q,null,X(e(_),(i,h)=>(n(),A(f,{id:i.id,key:i.id,index:h,class:"col-span-1 lg:col-span-2 2xl:col-span-3"},null,8,["id","index"]))),128)),e(_).length?x("v-if",!0):(n(),p("div",de,b("\u66AB\u7121\u8CC7\u6599")))],64)}}}),_e=F(pe,[["__file","/home/runner/work/peer-assessment/peer-assessment/src/components/AdminQuestionMain.vue"]]),fe={class:"absolute font-bold text-muted text-sm h-4 mb-2"},ve={key:0,class:"absolute top-8 left-0 w-full h-[calc(100%-2rem)] pt-2 px-4 overflow-auto"},he=N({__name:"AdminQuestion",setup(B){const u=o(()=>J().systemStatus),m=H(),_=S(),t=o(()=>Number(_.params.roleId)),s=o(()=>{const l=re.find(v=>v.value===Number(t.value));return`${l==null?void 0:l.text}\u4E92\u8A55\u554F\u5377`}),f=o(()=>u.value===0?[{name:"\u65B0\u589E",icon:"plus",function:()=>m.push(`/admin/question/${t.value}/new`)},{name:"\u7BE9\u9078",icon:"filter",function:()=>m.push(`/admin/question/${t.value}/filter`)}]:[{name:"\u7BE9\u9078",icon:"filter",function:()=>m.push(`/admin/question/${t.value}/filter`)}]),i=async l=>{try{const v=await g().readQuestionnaire(l)}catch{}},h=o(()=>ae().users);return Y(t,()=>i(t.value)),Z(()=>{i(t.value)}),(l,v)=>{const I=G,Q=_e,$=P,r=ee("router-view");return n(),p(q,null,[d("span",fe,[a(I,{name:"question",class:"w-4 h-4 mr-2 fill-muted"}),U(b(e(s)),1)]),e(h)?(n(),p("div",ve,[a(Q),a(L,{name:"sidebar",mode:"out-in",appear:""},{default:y(()=>[a($,{items:e(f)},null,8,["items"])]),_:1}),a(r,null,{default:y(({Component:c})=>[a(L,{name:"modal",mode:"out-in",appear:""},{default:y(()=>[(n(),A(te(c)))]),_:2},1024)]),_:1})])):x("v-if",!0)],64)}}}),Ne=F(he,[["__file","/home/runner/work/peer-assessment/peer-assessment/src/views/AdminQuestion.vue"]]);export{Ne as default};
