import{a as O}from"./TheSideBar.65f184e5.js";import{_ as C,d as q,A as o,a as F,i as M,u as z,o as n,c as p,e as d,f as a,g as b,m as H,t as A,h as e,n as P,k as B,j as g,y as W,q as U,F as k,D as X,w as Y,B as Z,b as ee,T as R,C as te}from"./index.8a7eebd7.js";import{_ as se}from"./BaseFormTextarea.e3c5dff2.js";import{_ as ne}from"./BaseFormScore.9b74912f.js";import{_ as oe}from"./BaseTag.c23d0e6e.js";import{u as w}from"./questions.82fa4c4d.js";import{g as L,r as re}from"./data.ff9c2fa5.js";import{u as G}from"./system.301dd653.js";import{u as ae}from"./users.9f95d837.js";import"./BaseMessage.b0f3323e.js";import"./BaseTextarea.7a47815a.js";import"./vee-validate.esm.31a7a497.js";import"./BaseScore.532e7dba.js";import"./api.ff4995b0.js";const ue={class:"p-8 bg-white rounded-2xl flex flex-col mb-4"},ie={key:0,class:"flex flex-row justify-end items-center duration-500 overflow-hidden mb-4"},le=d("hr",{class:"border-2 border-light grow-[1] mx-3"},null,-1),ce=q({__name:"AdminQuestionAnswer",props:{id:{type:Number,required:!0},index:{type:Number,required:!0}},setup(I){const u=I,m=o(()=>G().systemStatus),_=F(),t=o(()=>Number(_.params.roleId)),s=o(()=>w().question({roleId:t.value,id:u.id})),f=M("setToastData",()=>null),i=M("setIsLoading",()=>null),h=async()=>{try{const r=await w().readQuestionnaire(t.value)}catch{}},l=async({roleId:r,id:c})=>{try{i(!0);const x=await w().deleteQuestion({roleId:r,id:c});f({isActive:!0,variant:"success",message:"\u522A\u9664\u6210\u529F"}),h()}catch{f({isActive:!0,variant:"error",message:"\u522A\u9664\u5931\u6557"})}finally{i(!1)}},v=z(),Q=()=>{var r;v.push(`/admin/question/${t.value}/edit/${(r=s.value)==null?void 0:r.id}`)},$=()=>{W().setConfirmData({isActive:!0,confirm:()=>l({roleId:2,id:u.id}),text:"\u8ACB\u78BA\u8A8D\u662F\u5426\u522A\u9664\u8A72\u7B46\u8CC7\u6599\uFF1F"})};return(r,c)=>{var S,T,D,E,j,V;const x=oe,J=ne,K=se,N=U;return n(),p("div",null,[d("article",ue,[d("label",null,[a(x,{class:"mr-1",variant:e(L)(u.index)},{default:b(()=>{var y;return[H(A((y=e(s))==null?void 0:y.tag),1)]}),_:1},8,["variant"]),d("span",{class:P(((S=e(s))==null?void 0:S.isRequired)&&"after:content-['*'] after:ml-1 after:text-error")},A((T=e(s))==null?void 0:T.content),3)]),((D=e(s))==null?void 0:D.typeId)===1||((E=e(s))==null?void 0:E.typeId)===2?(n(),B(J,{key:0,name:"score",variant:e(L)(u.index),class:"mt-4"},null,8,["variant"])):g("v-if",!0),((j=e(s))==null?void 0:j.typeId)===2||((V=e(s))==null?void 0:V.typeId)===3?(n(),B(K,{key:1,name:"text",placeholder:e(s).textHint,class:"w-full mt-4"},null,8,["placeholder"])):g("v-if",!0)]),e(m)===0?(n(),p("footer",ie,[le,d("button",{class:"rounded-2xl flex justify-center items-center bg-light hover:bg-theme fill-white w-10 h-10 mr-2 duration-500",onClick:c[0]||(c[0]=y=>Q())},[a(N,{name:"edit",class:"w-6 h-6"})]),d("button",{class:"rounded-2xl flex justify-center items-center bg-light hover:bg-theme fill-white w-10 h-10 mr-2 duration-500",onClick:c[1]||(c[1]=y=>$())},[a(N,{name:"delete",class:"w-6 h-6"})])])):g("v-if",!0)])}}}),me=C(ce,[["__file","/home/runner/work/peer-assessment/peer-assessment/src/components/AdminQuestionAnswer.vue"]]),de={key:0,class:"px-3 2xl:px-4 py-8 rounded-2xl bg-white text-center text-dark align-middle whitespace-nowrap col-span-1 sm:col-span-2 lg:col-span-3 xl:col-span-4 2xl:col-span-5"},pe=q({__name:"AdminQuestionMain",setup(I){const u=F(),m=o(()=>Number(u.params.roleId)),_=o(()=>w().questions(m.value)||[]);return(t,s)=>{const f=me;return n(),p(k,null,[(n(!0),p(k,null,X(e(_),(i,h)=>(n(),B(f,{id:i.id,key:i.id,index:h,class:"col-span-1 lg:col-span-2 2xl:col-span-3"},null,8,["id","index"]))),128)),e(_).length?g("v-if",!0):(n(),p("div",de,A("\u66AB\u7121\u8CC7\u6599")))],64)}}}),_e=C(pe,[["__file","/home/runner/work/peer-assessment/peer-assessment/src/components/AdminQuestionMain.vue"]]),fe={class:"absolute font-bold text-muted text-sm h-4 mb-2"},ve={key:0,class:"absolute top-8 left-0 w-full h-[calc(100%-2rem)] pt-2 px-4 overflow-auto"},he=q({__name:"AdminQuestion",setup(I){const u=o(()=>G().systemStatus),m=z(),_=F(),t=o(()=>Number(_.params.roleId)),s=o(()=>{const l=re.find(v=>v.value===Number(t.value));return`${l==null?void 0:l.text}\u4E92\u8A55\u554F\u5377`}),f=o(()=>u.value===0?[{name:"\u65B0\u589E",icon:"plus",function:()=>m.push(`/admin/question/${t.value}/new`)},{name:"\u7BE9\u9078",icon:"filter",function:()=>m.push(`/admin/question/${t.value}/filter`)}]:[{name:"\u7BE9\u9078",icon:"filter",function:()=>m.push(`/admin/question/${t.value}/filter`)}]),i=async l=>{try{const v=await w().readQuestionnaire(l)}catch{}},h=o(()=>ae().users);return Y(t,()=>i(t.value)),Z(()=>{i(t.value)}),(l,v)=>{const Q=U,$=_e,r=O,c=ee("router-view");return n(),p(k,null,[d("span",fe,[a(Q,{name:"question",class:"w-4 h-4 mr-2 fill-muted"}),H(A(e(s)),1)]),e(h)?(n(),p("div",ve,[a($),a(R,{name:"sidebar",mode:"out-in",appear:""},{default:b(()=>[a(r,{items:e(f)},null,8,["items"])]),_:1}),a(c,null,{default:b(({Component:x})=>[a(R,{name:"modal",mode:"out-in",appear:""},{default:b(()=>[(n(),B(te(x)))]),_:2},1024)]),_:1})])):g("v-if",!0)],64)}}}),Ne=C(he,[["__file","/home/runner/work/peer-assessment/peer-assessment/src/views/AdminQuestion.vue"]]);export{Ne as default};
